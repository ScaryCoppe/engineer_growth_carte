<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æˆé•·ã‚«ãƒ«ãƒ†ï¼ˆãƒãƒ¼ãƒ ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ç”¨ï¼‰</title>
  <meta name="description" content="è‡ªåˆ†ã¨å‘¨ã‚ŠãŒåƒãã‚„ã™ã„ç’°å¢ƒã‚’ã¤ãã‚‹ãŸã‚ã«ã€èªè­˜ã‚’ã™ã‚Šåˆã‚ã›ã‚‹ãŸã‚ã®ã‚«ãƒ«ãƒ†ã§ã™ã€‚">

  <!--
    Security posture (single-file / offline-first)
    - å¤–éƒ¨CDN/å¤–éƒ¨ãƒ•ã‚©ãƒ³ãƒˆ: ä¾å­˜ãªã—ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§å‹•ä½œï¼‰
    - DOMçµ„ã¿ç«‹ã¦: innerHTML ã‚’åŸå‰‡ä½¿ã‚ãšã€createElement + textContent ã«çµ±ä¸€
    - CSP: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¦æ­¢ï¼ˆconnect-src 'none'ï¼‰ã—ã€å¤–éƒ¨èª­ã¿è¾¼ã¿ã‚’æŠ‘æ­¢
      â€»å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã®ãŸã‚ style/script ã¯ 'unsafe-inline' ã‚’è¨±å¯ï¼ˆå¿…è¦æœ€å°é™ï¼‰
  -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'none'; base-uri 'none'; form-action 'none'; frame-ancestors 'none';
                 img-src 'self' data:; font-src 'self' data:;
                 style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline';
                 connect-src 'none'; media-src 'none'; object-src 'none'">

  <style>
    :root{
      --bg:#f0f9ff;          /* sky-50 */
      --card:#ffffff;
      --text:#0f172a;        /* slate-900 */
      --muted:#64748b;       /* slate-500 */
      --border:#cbd5e1;      /* slate-300 */
      --shadow: 0 1px 3px rgba(15,23,42,.08);
      --shadow-lg: 0 10px 25px rgba(15,23,42,.1);

      /* Main Brand Colors: Blue & Teal/Emerald */
      --primary:#0284c7;     /* sky-600 */
      --primary-dark:#0369a1;/* sky-700 */
      --primary-light:#e0f2fe; /* sky-100 */

      --accent:#0d9488;      /* teal-600 */
      --accent-light:#ccfbf1; /* teal-100 */

      --blue:#2563eb;
      --rose:#e11d48;        /* Error only */
      --amber:#d97706;       /* Warning */
    }

    /* Base */
    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, Arial, sans-serif;
      line-height:1.6;
      padding-bottom: 80px;
    }
    a{ color:inherit; }
    .sr-only{
      position:absolute !important;
      width:1px;height:1px;
      padding:0;margin:-1px;
      overflow:hidden;clip:rect(0,0,0,0);
      white-space:nowrap;border:0;
    }
    .container{
      max-width: 1024px;
      margin: 0 auto;
      padding: 0 16px;
    }
    .container-narrow{
      max-width: 768px;
      margin: 0 auto;
      padding: 0 16px;
    }

    /* Header */
    header{
      position: sticky;
      top: 0;
      z-index: 10;
      background: #eff6ff;
      border-bottom: 1px solid #bfdbfe;
      box-shadow: var(--shadow);
      width: 100%;
    }
    .header-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:12px 24px;
    }
    .header-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .logo-img {
      height: 40px;
      width: auto;
      display: block;
    }
    .title-area {
      cursor: pointer; /* ã‚¯ãƒªãƒƒã‚¯ã§ãã‚‹ã“ã¨ã‚’ç¤ºã™ */
      user-select: none;
    }
    .title{
      display:flex;
      align-items:center;
      gap:10px;
      margin:0;
      font-size: 20px;
      font-weight: 800;
      letter-spacing:.2px;
      color: #1e3a8a;
    }
    .title:hover {
      opacity: 0.8;
    }
    .subtitle{
      margin:2px 0 0;
      font-size: 12px;
      color: #475569;
      font-weight: 700;
    }
    .version{
      font-size:12px;
      color:#94a3b8;
      font-family: monospace;
      white-space:nowrap;
    }

    /* Layout sections */
    main{ padding: 28px 0 48px; }
    .stack-xxl{ display:flex; flex-direction:column; gap:48px; }

    /* Cards */
    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      box-shadow: var(--shadow);
    }
    .card.pad{ padding: 20px; }
    .card.pad-lg{ padding: 24px; }
    .card-title{
      font-size: 18px;
      font-weight: 800;
      margin:0;
      display:flex;
      align-items:center;
      gap:10px;
      color: var(--text);
    }
    .card-sub{
      margin:6px 0 0;
      color: var(--muted);
      font-size: 14px;
      font-weight: 600;
    }
    .divider{ height:1px; background: #e2e8f0; margin: 16px 0; }

    /* Intro & Guidelines */
    .intro-block {
      background: linear-gradient(to bottom right, #ffffff, #f0f9ff);
      border-color: #bae6fd;
    }
    .intro-block h2 {
      font-size: 18px;
      font-weight: 800;
      margin: 0 0 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #0369a1;
    }
    .intro-block p {
      margin: 0 0 16px;
      color: #334155;
      font-weight: 700;
      line-height: 1.7;
    }
    .positive-msg {
      background: rgba(255,255,255,0.6);
      border-left: 4px solid var(--accent);
      padding: 12px 16px;
      margin: 12px 0;
      border-radius: 4px;
      color: #0f766e;
      font-weight: 700;
    }
    .safety-note {
      margin-top: 16px;
      padding-top: 12px;
      border-top: 1px dashed #cbd5e1;
      font-size: 12px;
      color: #64748b;
      font-weight: 600;
    }

    /* Fieldsets */
    fieldset{ border:0; margin:0; padding:0; }
    legend{
      font-weight: 900;
      color:#334155;
      margin-bottom: 12px;
      font-size: 15px;
    }
    .req{ color: var(--primary); font-size: 12px; font-weight: 800; margin-left: 4px; }
    .grid{
      display:grid;
      gap: 12px;
    }
    .grid.two{ grid-template-columns: 1fr; }
    .grid.three{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (min-width: 768px){
      .grid.two{ grid-template-columns: repeat(2, minmax(0,1fr)); }
      .grid.three{ grid-template-columns: repeat(3, minmax(0,1fr)); }
    }
    .option{
      display:block;
      cursor:pointer;
    }
    .option-card{
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 14px;
      background: #fff;
      transition: all .2s ease;
      height: 100%;
      position: relative;
    }
    .option-card:hover{
      transform: translateY(-2px);
      border-color: var(--primary);
      box-shadow: 0 4px 12px rgba(2, 132, 199, 0.15);
    }
    input.opt:focus-visible + .option-card{
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }

    /* Checked styles */
    input.opt:checked + .option-card{
      border-color: var(--primary);
      background: var(--primary-light);
      box-shadow: 0 0 0 2px var(--primary);
    }
    input.opt[type="checkbox"]:checked + .option-card{
      border-color: var(--accent);
      background: var(--accent-light);
      box-shadow: 0 0 0 2px var(--accent);
    }

    .opt-title{ font-weight: 800; font-size: 14px; color: #1e293b; }
    .opt-desc{ margin-top: 4px; color: #475569; font-size: 12px; font-weight: 600; line-height: 1.4; }

    /* Buttons */
    .actions{ text-align:center; padding: 10px 0; }
    .btn{
      border:0;
      border-radius: 999px;
      padding: 16px 32px;
      font-weight: 800;
      font-size: 18px;
      box-shadow: var(--shadow);
      cursor:pointer;
      transition: all .2s ease;
      letter-spacing: .02em;
    }
    .btn[disabled]{
      background:#cbd5e1;
      color:#64748b;
      cursor:not-allowed;
    }
    .btn.primary{
      background: var(--primary);
      color:#fff;
    }
    .btn.primary:hover{
      background: var(--primary-dark);
      box-shadow: 0 4px 12px rgba(2, 132, 199, 0.3);
      transform: translateY(-1px);
    }

    .error{
      margin-top: 10px;
      color: var(--rose);
      font-weight: 800;
      font-size: 13px;
    }
    .hidden{ display:none !important; }

    /* Result header */
    .pill{
      display:inline-block;
      padding: 4px 12px;
      border-radius: 999px;
      background: var(--primary-light);
      color: var(--primary-dark);
      font-weight: 800;
      font-size: 12px;
      margin-bottom: 12px;
    }
    .result-head{
      text-align:center;
      border-bottom: 1px solid var(--border);
      padding-bottom: 22px;
    }
    .result-head h2{ margin: 0 0 6px; font-size: 26px; font-weight: 900; color:#0f172a; }
    .result-head p{ margin:0; color: var(--muted); font-weight: 600; }

    /* Result blocks */
    .block{ border-radius: 18px; overflow:hidden; border:1px solid var(--border); box-shadow: var(--shadow); background:#fff; }
    .block-head{ padding: 18px 24px; border-bottom: 1px solid #e2e8f0; }
    .kicker{ font-size: 12px; font-weight: 800; color:#64748b; text-transform: uppercase; letter-spacing: .05em; }
    .block-title{ margin: 6px 0 0; font-size: 20px; font-weight: 900; display:flex; align-items:center; gap:10px; color:#0f172a; }
    .block-sub{ margin: 4px 0 0; color: var(--muted); font-size: 14px; font-weight: 600; }
    .block-body{ padding: 20px 24px 24px; }
    
    .item{
      border: 1px solid #e2e8f0;
      background: #f8fafc;
      border-radius: 14px;
      padding: 16px;
      margin-bottom: 12px;
    }
    .item h4{ margin:0 0 10px; font-size: 16px; font-weight: 800; color:#334155; }
    .row{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }
    @media (min-width: 768px){
      .row{ grid-template-columns: 1fr 1fr; }
    }
    .panel{
      background: #fff;
      border-radius: 10px;
      padding: 12px 14px;
      border-left: 4px solid #cbd5e1;
      border-top: 1px solid #f1f5f9;
      border-right: 1px solid #f1f5f9;
      border-bottom: 1px solid #f1f5f9;
    }
    .panel.good{ border-left-color: var(--primary); }
    .panel .label{
      display:block;
      font-size: 11px;
      font-weight: 800;
      color:#64748b;
      margin-bottom: 4px;
    }
    .panel .text{ font-size: 13.5px; font-weight: 600; color:#334155; line-height: 1.5; }

    /* Summary card */
    .summary{
      background:#1e293b; /* slate-800 */
      color:#f1f5f9;
      border-radius: 18px;
      padding: 24px;
      box-shadow: var(--shadow-lg);
    }
    .summary h3{
      margin:0 0 16px;
      font-size: 20px;
      font-weight: 900;
      color:#fff;
      display:flex; align-items:center; gap:10px;
    }
    .summary-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }
    @media (min-width: 768px){
      .summary-grid{ grid-template-columns: 1fr 1fr; gap: 24px; }
    }
    .summary small{ display:block; color:#94a3b8; font-weight: 700; font-size: 11px; margin-bottom: 4px; }
    .summary .big{ font-size: 18px; font-weight: 800; color:#fff; }
    .summary .amber{ color:#fbbf24; }
    .summary .teal{ color:#2dd4bf; }

    details{
      margin-top: 24px;
      border-radius: 12px;
      background: rgba(255,255,255,0.1);
      padding: 16px;
      border: 1px solid rgba(255,255,255,0.1);
    }
    summary{ cursor:pointer; font-weight: 800; color:#e2e8f0; }
    .summary-actions{
      display:flex;
      justify-content:center;
      gap: 12px;
      flex-wrap:wrap;
      margin-top: 24px;
    }
    .btn-ghost{
      border-radius: 12px;
      padding: 10px 16px;
      font-weight: 800;
      cursor:pointer;
      border: 1px solid rgba(255,255,255,0.2);
      background: transparent;
      color:#e2e8f0;
      transition: all .15s ease;
    }
    .btn-ghost:hover{ background: rgba(255,255,255,0.1); }
    .btn-light{
      border-radius: 12px;
      padding: 10px 16px;
      font-weight: 800;
      cursor:pointer;
      border: 1px solid transparent;
      background: #fff;
      color:#0f172a;
      transition: all .15s ease;
      display:flex; align-items:center; gap:8px;
    }
    .btn-light:hover{ background:#f1f5f9; transform: translateY(-1px); }

    /* Print specific settings */
    /* Fix: #print-root should be visually hidden on screen but available for print.
       Using 'display: none' often prevents printing in some browsers, so we use
       positioning and opacity to hide it from the screen.
    */
    #print-root {
      position: fixed;
      top: 0;
      left: 0;
      width: 1px;
      height: 1px;
      overflow: hidden;
      opacity: 0;
      z-index: -100;
      pointer-events: none;
    }

    @media print{
      @page{ size: A4; margin: 12mm; }
      body{ background:#fff !important; padding-bottom:0; color:#000; }
      
      /* Hide all screen elements */
      header, main, footer, .container, .container-narrow { display:none !important; }
      
      /* Reset print root to be visible and flow normally */
      #print-root { 
        display:block !important; 
        position: static !important;
        width: auto !important;
        height: auto !important;
        overflow: visible !important;
        opacity: 1 !important;
        z-index: auto !important;
      }
      
      #print-root{ font-size: 10.5pt; line-height: 1.5; font-family: "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif; }
      #print-root h1{ font-size: 16pt; margin: 0 0 5mm; border-bottom: 2px solid #000; padding-bottom: 2mm; }
      #print-root h2{ font-size: 12pt; margin: 6mm 0 3mm; background: #eee; padding: 2mm 4mm; border-left: 4px solid #666; }
      .avoid-break{ break-inside: avoid; }
      .logo-print { height: 24px; width: auto; margin-right: 10px; vertical-align: middle; }
    }
  </style>
</head>

<body>
  <!-- Print-only root -->
  <div id="print-root" class="hidden" aria-hidden="true"></div>

  <header>
    <div class="header-row">
      <div class="header-left">
        <!-- ãƒ­ã‚´ (offline safe) -->
        <img src="logo@2x.png" alt="SKYLEAF" class="logo-img" onerror="this.style.display='none'">
        <!-- ã‚¯ãƒªãƒƒã‚¯ã§ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹ï¼‰ -->
        <div class="title-area" onclick="window.location.reload()" role="button" tabindex="0" aria-label="ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹">
          <h1 class="title">ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æˆé•·ã‚«ãƒ«ãƒ†</h1>
          <p class="subtitle">è‡ªåˆ†ã¨å‘¨ã‚ŠãŒå‹•ãã‚„ã™ããªã‚‹ãŸã‚ã®ã€èªè­˜ã™ã‚Šåˆã‚ã›</p>
        </div>
      </div>
      <div id="app-version" class="version" aria-label="ã‚¢ãƒ—ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³"></div>
    </div>
  </header>

  <main>
    <div class="container-narrow stack-xxl">

      <!-- Intro & Guidelines -->
      <section id="intro-area" class="card pad-lg intro-block">
        <h2><span aria-hidden="true">â„¹ï¸</span> ã“ã®ã‚«ãƒ«ãƒ†ã«ã¤ã„ã¦</h2>
        <p>
          ã„ã¾ã®è‡ªåˆ†ã®ç«‹ã¡ä½ç½®ã‚„ã€ä»•äº‹ã®é€²ã‚æ–¹ã®å‚¾å‘ã‹ã‚‰ã€<br>
          <span style="color:var(--primary); font-weight:800;">ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ„è­˜ã™ã¹ãè¦³ç‚¹ã€</span>ã¨
          <span style="color:var(--primary); font-weight:800;">ã€Œã™ã‚Œé•ã„ã‚’æ¸›ã‚‰ã™å·¥å¤«ã€</span>
          ã‚’æ•´ç†ã—ã¾ã™ã€‚
        </p>
        
        <div class="positive-msg">
          <span aria-hidden="true">âœ¨</span>
          ãƒãƒ¼ãƒ ã®èªè­˜ã‚’åˆã‚ã›ã‚‹ã“ã¨ã§ã€<strong>ã‚ãªãŸãŒå®ŸåŠ›ã‚’ç™ºæ®ã—ã‚„ã™ã„ç’°å¢ƒ</strong>ã‚’ã€ãƒãƒ¼ãƒ ã®ã¿ã‚“ãªã§ä½œã£ã¦ã„ããŸã‚ã®ç¬¬ä¸€æ­©ã§ã™ã€‚
        </div>

        <div class="safety-note">
          <strong>å®‰å¿ƒã—ã¦ä½¿ã†ãŸã‚ã®ãƒ«ãƒ¼ãƒ«ï¼š</strong><br>
          æœ¬éŸ³ã§ã™ã‚Šåˆã‚ã›ã‚‹ãŸã‚ã«ã€è©•ä¾¡ãƒ»æŸ»å®šã«ã¯ä½¿ã„ã¾ã›ã‚“ã€‚çµæœã®å…±æœ‰ã‚‚ä»»æ„ã§ã™ã€‚
        </div>
      </section>

      <!-- Form -->
      <form id="reflection-form" class="card pad-lg" novalidate>
        <div style="display:flex; align-items:center; gap:12px; margin-bottom:16px;">
          <div style="width:36px;height:36px;border-radius:50%;background:var(--primary-light);display:flex;align-items:center;justify-content:center;color:var(--primary-dark);font-weight:900;font-size:14px;">1</div>
          <div>
            <p class="card-title" style="margin:0;">ã„ã¾ã®çŠ¶æ³ã‚’æ•´ç†ã™ã‚‹</p>
            <p class="card-sub" style="margin:2px 0 0;">å¿…é ˆé …ç›®ã‚’é¸ã¶ã¨ã€Œã‚«ãƒ«ãƒ†ã‚’è¦‹ã‚‹ã€ãŒæŠ¼ã›ã¾ã™</p>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Q1 -->
        <fieldset>
          <legend>Q1. ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã®çµŒé¨“ã¯ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ <span class="req">*å¿…é ˆ</span></legend>
          <div class="grid two">
            <label class="option">
              <input class="opt sr-only" type="radio" name="exp_eng" value="junior">
              <div class="option-card">
                <div class="opt-title">1ã€œ2å¹´</div>
                <div class="opt-desc">åˆæœŸï¼šç¾å ´ã«æ…£ã‚Œã¦ã„ãæ™‚æœŸ</div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="radio" name="exp_eng" value="middle">
              <div class="option-card">
                <div class="opt-title">3ã€œ5å¹´</div>
                <div class="opt-desc">ä¸­ç›¤ï¼šä»»ã•ã‚Œã‚‹ç¯„å›²ãŒåºƒãŒã‚‹æ™‚æœŸ</div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="radio" name="exp_eng" value="senior">
              <div class="option-card">
                <div class="opt-title">6ã€œ9å¹´</div>
                <div class="opt-desc">çµŒé¨“è€…ï¼šå‘¨å›²ã‚’æ”¯ãˆã‚‹å ´é¢ãŒå¢—ãˆã‚‹æ™‚æœŸ</div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="radio" name="exp_eng" value="veteran">
              <div class="option-card">
                <div class="opt-title">10å¹´ä»¥ä¸Š</div>
                <div class="opt-desc">ç†Ÿç·´ï¼šå…¨ä½“ã‚’è¦‹ã¦åˆ¤æ–­ã™ã‚‹å ´é¢ãŒå¢—ãˆã‚‹æ™‚æœŸ</div>
              </div>
            </label>
          </div>
        </fieldset>

        <div class="divider"></div>

        <!-- Q2 -->
        <fieldset>
          <legend>Q2. å¾Œè¼©ã®ã‚µãƒãƒ¼ãƒˆã‚„ã€ãƒãƒ¼ãƒ ã‚’ã¾ã¨ã‚ã‚‹çµŒé¨“ã¯ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ <span class="req">*å¿…é ˆ</span></legend>
          <div class="grid two">
            <label class="option">
              <input class="opt sr-only" type="radio" name="role_scope" value="none">
              <div class="option-card">
                <div class="opt-title">æœªçµŒé¨“</div>
                <div class="opt-desc">ã¾ã è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ãŒä¸­å¿ƒï¼ˆã“ã‚Œã‹ã‚‰æŒ‘æˆ¦ï¼‰</div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="radio" name="role_scope" value="novice">
              <div class="option-card">
                <div class="opt-title">ã€œ1å¹´</div>
                <div class="opt-desc">å¾Œè¼©ã‚’è¦‹ã‚‹ã“ã¨ãŒå¢—ãˆå§‹ã‚ãŸï¼ˆã¡ã‚‡ã£ã¨ä»»ã•ã‚Œå§‹ã‚ãŸï¼‰</div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="radio" name="role_scope" value="lead">
              <div class="option-card">
                <div class="opt-title">1ã€œ3å¹´</div>
                <div class="opt-desc">å‘¨ã‚Šã‚’æ”¯ãˆã‚‹å ´é¢ãŒå¢—ãˆãŸï¼ˆæ”¯ãˆã‚‹/ä»»ã›ã‚‹ï¼‰</div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="radio" name="role_scope" value="manager">
              <div class="option-card">
                <div class="opt-title">4å¹´ä»¥ä¸Š</div>
                <div class="opt-desc">å…¨ä½“ã‚’è¦‹ã‚‹ãƒ»ç®¡ç†ãŒä¸­å¿ƒ</div>
              </div>
            </label>
          </div>
        </fieldset>

        <div class="divider"></div>

        <!-- Q3 -->
        <fieldset>
          <legend>Q3. ãµã ã‚“ã€ç¾å ´ã§é–¢ã‚ã‚‹ã“ã¨ãŒå¤šã„ç›¸æ‰‹ã¯ï¼Ÿ <span class="req">*å¿…é ˆï¼ˆè¤‡æ•°é¸æŠï¼‰</span></legend>
          <div class="grid three">
            <label class="option">
              <input class="opt sr-only" type="checkbox" name="coworker" value="internal_boss">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:6px;" aria-hidden="true">ğŸ‘¨â€ğŸ’¼</div>
                <div class="opt-title" style="font-size:12px;">è‡ªç¤¾ã®å…ˆè¼©/ä¸Šå¸</div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="checkbox" name="coworker" value="internal_junior">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:6px;" aria-hidden="true">ğŸ£</div>
                <div class="opt-title" style="font-size:12px;">è‡ªç¤¾ã®å¾Œè¼©/éƒ¨ä¸‹</div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="checkbox" name="coworker" value="internal_peer">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:6px;" aria-hidden="true">ğŸ¤</div>
                <div class="opt-title" style="font-size:12px;">è‡ªç¤¾ã®åŒåƒš</div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="checkbox" name="coworker" value="client_boss">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:6px;" aria-hidden="true">ğŸ¢</div>
                <div class="opt-title" style="font-size:12px;">ãŠå®¢æ§˜å´ã®æ‹…å½“è€…</div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="checkbox" name="coworker" value="partner_junior">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:6px;" aria-hidden="true">ğŸ—ï¸</div>
                <div class="opt-title" style="font-size:12px;">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼/å”åŠ›ä¼šç¤¾</div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="checkbox" name="coworker" value="non_engineer">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:6px;" aria-hidden="true">ğŸ¨</div>
                <div class="opt-title" style="font-size:12px;">PM/QA/ãƒ‡ã‚¶ã‚¤ãƒ³</div>
              </div>
            </label>
            <label class="option" style="grid-column: 1 / -1;">
              <input class="opt sr-only" type="checkbox" name="coworker" value="solo">
              <div class="option-card" style="display:flex;align-items:center;justify-content:center;gap:10px;text-align:center;">
                <div style="font-size:24px;" aria-hidden="true">ğŸ’»</div>
                <div class="opt-title" style="font-size:12px;">åŸºæœ¬ã²ã¨ã‚Š</div>
              </div>
            </label>
          </div>
        </fieldset>

        <div class="divider"></div>

        <!-- Phase 2 -->
        <div style="display:flex; align-items:center; gap:12px; margin-top: 8px;">
          <div style="width:36px;height:36px;border-radius:50%;background:var(--primary-light);display:flex;align-items:center;justify-content:center;color:var(--primary-dark);font-weight:900;font-size:14px;">2</div>
          <div>
            <p class="card-title" style="margin:0;">ä»•äº‹ã®é€²ã‚æ–¹ã®å‚¾å‘ã‚’çŸ¥ã‚‹</p>
            <p class="card-sub" style="margin:2px 0 0;">â€œæ­£è§£æ¢ã—â€ã§ã¯ãªãã€ã™ã‚Œé•ã„ã‚’æ¸›ã‚‰ã™ãŸã‚ã®è¦³ç‚¹ã§ã™</p>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Q4 -->
        <fieldset>
          <legend>Q4. ä»Šã®è‡ªåˆ†ãŒæ„è­˜ã—ãŸã„è¦–ç‚¹ã¯ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ <span class="req">*å¿…é ˆ</span></legend>
          <div class="grid" style="gap:14px;">
            <label class="option">
              <input class="opt sr-only" type="radio" name="focus_axis" value="tech">
              <div class="option-card" style="display:flex;gap:14px;align-items:flex-start;">
                <div style="background:var(--primary-light); color:var(--primary); padding:10px; border-radius:12px; font-size:22px;" aria-hidden="true">ğŸ› ï¸</div>
                <div>
                  <div class="opt-title" style="font-size:16px;">æŠ€è¡“é¢</div>
                  <div class="opt-desc" style="font-size:13px;">å“è³ªã€è¨­è¨ˆã€å®Ÿè£…ã®é€²ã‚æ–¹ã€å­¦ç¿’ãªã©ã€‚</div>
                </div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="radio" name="focus_axis" value="people">
              <div class="option-card" style="display:flex;gap:14px;align-items:flex-start;">
                <div style="background:var(--accent-light); color:var(--accent); padding:10px; border-radius:12px; font-size:22px;" aria-hidden="true">ğŸŒ±</div>
                <div>
                  <div class="opt-title" style="font-size:16px;">å‘¨å›²ã¨ã®é–¢ã‚ã‚Šæ–¹</div>
                  <div class="opt-desc" style="font-size:13px;">ç›¸è«‡ã€å”åŠ›ã€ä¼ãˆæ–¹ã€å®‰å¿ƒã—ã¦åƒããŸã‚ã®å·¥å¤«ãªã©ã€‚</div>
                </div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="radio" name="focus_axis" value="biz">
              <div class="option-card" style="display:flex;gap:14px;align-items:flex-start;">
                <div style="background:#f3e8ff; color:#7e22ce; padding:10px; border-radius:12px; font-size:22px;" aria-hidden="true">ğŸ§­</div>
                <div>
                  <div class="opt-title" style="font-size:16px;">å…¨ä½“ã®è¦‹ãˆæ–¹</div>
                  <div class="opt-desc" style="font-size:13px;">å„ªå…ˆé †ä½ã€æœŸå¾…å€¤èª¿æ•´ã€ä¾¡å€¤ãƒ»ã‚³ã‚¹ãƒˆãƒ»æœŸé™ã®ãƒãƒ©ãƒ³ã‚¹ãªã©ã€‚</div>
                </div>
              </div>
            </label>
          </div>
        </fieldset>

        <div class="divider"></div>

        <!-- Q5 -->
        <fieldset>
          <legend>Q5. ãµã ã‚“ã®å…±æœ‰ã®ã—ã‹ãŸã¯ã€ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ <span class="req">*å¿…é ˆ</span></legend>
          <div class="grid three" style="gap:12px;">
            <label class="option">
              <input class="opt emerald sr-only" type="radio" name="share_style" value="detail">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:8px;" aria-hidden="true">ğŸ”</div>
                <div class="opt-title" style="font-size:13px;">ã“ã¾ã‚ã«å…±æœ‰ã™ã‚‹ã“ã¨ãŒå¤šã„</div>
                <div class="opt-desc">é€”ä¸­ã§ã‚‚æ—©ã‚ã«è¦‹ã›ã¦ã€èªè­˜ã‚ºãƒ¬ã‚’æ¸›ã‚‰ã—ãŸã„</div>
              </div>
            </label>
            <label class="option">
              <input class="opt emerald sr-only" type="radio" name="share_style" value="outcome">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:8px;" aria-hidden="true">ğŸ¯</div>
                <div class="opt-title" style="font-size:13px;">ã¾ã¨ã¾ã£ã¦ã‹ã‚‰å…±æœ‰ã™ã‚‹ã“ã¨ãŒå¤šã„</div>
                <div class="opt-desc">ã‚ã‚‹ç¨‹åº¦å½¢ã«ã—ã¦ã‹ã‚‰ç›¸è«‡ã—ãŸã„ï¼ˆä¸­æ–­ã‚’æ¸›ã‚‰ã—ãŸã„ï¼‰</div>
              </div>
            </label>
            <label class="option">
              <input class="opt emerald sr-only" type="radio" name="share_style" value="adaptive">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:8px;" aria-hidden="true">ğŸ”„</div>
                <div class="opt-title" style="font-size:13px;">ç›¸æ‰‹ã‚„çŠ¶æ³ã§å¤‰ãˆã‚‹ã“ã¨ãŒå¤šã„</div>
                <div class="opt-desc">æ€¥ãåº¦ã‚„ç›¸æ‰‹ã®å¥½ã¿ã«åˆã‚ã›ã‚‹</div>
              </div>
            </label>
          </div>
        </fieldset>

        <div class="actions" style="margin-top: 24px;">
          <button id="build-sheet" type="button" class="btn" disabled>ã‚«ãƒ«ãƒ†ã‚’è¦‹ã‚‹</button>
          <div id="error-msg" class="error hidden" role="alert">ã¾ã é¸ã¹ã¦ã„ãªã„é …ç›®ãŒã‚ã‚Šã¾ã™ã€‚å¿…é ˆï¼ˆ*ï¼‰ã‚’ã™ã¹ã¦é¸ã‚“ã§ãã ã•ã„ã€‚</div>
        </div>
      </form>

      <!-- Result area -->
      <section id="result-area" class="hidden stack-xxl" aria-live="polite">
        <div class="result-head">
          <span class="pill">ã‚«ãƒ«ãƒ†ãŒã§ãã¾ã—ãŸ</span>
          <h2>ã„ã¾ã®ç«‹å ´ã®ã€Œæ„è­˜ãƒã‚¤ãƒ³ãƒˆã€</h2>
          <p>é¸æŠå†…å®¹ã‹ã‚‰ã€å¯¾è©±ã®ãŸã‚ã®è¦³ç‚¹ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚</p>
          <div class="hint">â€»ã“ã‚Œã¯ã€Œä»®èª¬ã€ã§ã™ã€‚åˆã†ï¼åˆã‚ãªã„ã‚’ææ–™ã«ã—ã¦ãã ã•ã„ã€‚</div>
        </div>

        <div id="block-stage"></div>
        <div id="block-role"></div>
        <div id="block-comm"></div>
        <div id="block-focus"></div>
        <div id="block-growth"></div>
        <div id="block-share"></div>

        <div class="summary" id="summary-card">
          <h3><span aria-hidden="true">ğŸ“‹</span> ã‚«ãƒ«ãƒ†ã®è¦ç´„</h3>
          <div class="summary-grid">
            <div><small>çµŒé¨“ã®ç›®å®‰</small><div class="big" id="sum-exp">-</div></div>
            <div><small>ä»»ã•ã‚Œæ–¹ã®ç›®å®‰</small><div class="big amber" id="sum-role">-</div></div>
            <div><small>é–¢ã‚ã‚‹ç›¸æ‰‹</small><div class="big teal" id="sum-who">-</div></div>
            <div><small>é‡å¿ƒã®å‚¾å‘</small><div class="big" id="sum-focus">-</div></div>
          </div>

          <details open>
            <summary>ğŸ” ã“ã®ã‚«ãƒ«ãƒ†ã®ä½¿ã„æ–¹ï¼ˆãŠã™ã™ã‚ï¼‰</summary>
            <div style="margin-top:10px; font-size: 13.5px; color:#f1f5f9; font-weight:600; line-height:1.7;">
              <p style="margin:0 0 8px;"><strong>1. ä¸€äººã§è¦‹ã‚‹å ´åˆï¼š</strong><br>
              å½“ã¦ã¯ã¾ã‚‹éƒ¨åˆ†ã«ã€Œã“ã‚Œã ã€ã€é•å’Œæ„ŸãŒã‚ã‚‹éƒ¨åˆ†ã«ã€Œé•ã†ã‹ã‚‚ã€ã¨å°ã‚’ã¤ã‘ã¦ã¿ã¦ãã ã•ã„ã€‚ã€Œé•å’Œæ„Ÿã€ã‚‚è‡ªåˆ†ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’çŸ¥ã‚‹é‡è¦ãªæ‰‹ãŒã‹ã‚Šã§ã™ã€‚</p>
              
              <p style="margin:0 0 8px;"><strong>2. 1on1ã§ä½¿ã†å ´åˆï¼š</strong><br>
              ä¸Šå¸ã‚„ãƒ¡ãƒ³ã‚¿ãƒ¼ã¨ä¸€ç·’ã«è¦‹ãªãŒã‚‰ã€ã€Œä»Šã®è‡ªåˆ†ã¯ã“ã“ã«è¿‘ã„ã€ã€Œã“ã“ã¯ã‚‚ã£ã¨ã“ã†ã—ãŸã„ã€ã¨è©±ã—ã¦ã¿ã¦ãã ã•ã„ã€‚èªè­˜ã®ã‚ºãƒ¬ãŒæ¸›ã‚Šã€ã‚µãƒãƒ¼ãƒˆãŒå¾—ã‚‰ã‚Œã‚„ã™ããªã‚Šã¾ã™ã€‚</p>
              
              <div style="background:rgba(255,255,255,0.1); padding:8px 12px; border-radius:6px; margin-top:12px; font-size:12px;">
                <span style="display:block; font-weight:800; margin-bottom:4px;">âš ï¸ å®‰å¿ƒã—ã¦ä½¿ã†ãŸã‚ã®ãƒ«ãƒ¼ãƒ«</span>
                ãƒ»è©•ä¾¡ã‚„æŸ»å®šã®ææ–™ã«ã¯ã—ã¾ã›ã‚“ã€‚<br>
                ãƒ»æœ¬äººã®åˆæ„ãªãç¬¬ä¸‰è€…ã«å…±æœ‰ã—ã¾ã›ã‚“ã€‚<br>
                ãƒ»ã€Œæ­£è§£ã€ã‚’æŠ¼ã—ä»˜ã‘ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
              </div>
            </div>
          </details>

          <div class="summary-actions">
            <button id="print-btn" type="button" class="btn-light" aria-label="ä¿å­˜ãƒ»å°åˆ·">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M17 17h2a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h2m2 4h6a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2zm8-12V5a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v4h10z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              ä¿å­˜ãƒ»å°åˆ·ï¼ˆã‚ã¨ã§è¦‹è¿”ã™ï¼‰
            </button>
            <button id="reset-btn" type="button" class="btn-ghost">ã‚‚ã†ä¸€åº¦ã¤ãã‚‹</button>
          </div>
        </div>

      </section>
    </div>
  </main>

  <script>
    "use strict";

    const APP_VERSION = "v6.3 (Fix Layout Shift)";

    const LABELS = {
      exp: { junior:"1ã€œ2å¹´", middle:"3ã€œ5å¹´", senior:"6ã€œ9å¹´", veteran:"10å¹´ä»¥ä¸Š" },
      role: { none:"ä»»ã•ã‚Œã‚‹å´ãŒä¸­å¿ƒ", novice:"ã¡ã‚‡ã£ã¨ä»»ã•ã‚Œå§‹ã‚ãŸ", lead:"ãƒªãƒ¼ãƒ‰/æ”¯ãˆã‚‹ãŒå¢—ãˆãŸ", manager:"ç®¡ç†ãƒ»é‹å–¶ãŒå¤šã„" },
      focus: { tech:"æŠ€è¡“é‡è¦–", people:"é–¢ã‚ã‚Šæ–¹é‡è¦–", biz:"å…¨ä½“é‡è¦–" },
      coworker: {
        internal_boss:"è‡ªç¤¾ã®å…ˆè¼©/ä¸Šå¸",
        internal_junior:"è‡ªç¤¾ã®å¾Œè¼©/éƒ¨ä¸‹",
        internal_peer:"è‡ªç¤¾ã®åŒåƒš",
        client_boss:"ãŠå®¢æ§˜å´ã®æ‹…å½“è€…",
        partner_junior:"ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼/å”åŠ›ä¼šç¤¾",
        non_engineer:"PM/QA/ãƒ‡ã‚¶ã‚¤ãƒ³",
        solo:"åŸºæœ¬ã²ã¨ã‚Š"
      }
    };

    function el(tag, opts = {}, children = []) {
      const node = document.createElement(tag);
      if (opts.className) node.className = opts.className;
      if (opts.text != null) node.textContent = opts.text;
      if (opts.attrs) {
        for (const [k, v] of Object.entries(opts.attrs)) node.setAttribute(k, v);
      }
      for (const c of children) if (c) node.appendChild(c);
      return node;
    }

    function clear(node) {
      while (node.firstChild) node.removeChild(node.firstChild);
    }

    function setText(id, text) {
      const t = document.getElementById(id);
      if (t) t.textContent = text;
    }

    function appendRich(container, parts) {
      for (const p of parts) {
        if (!p) continue;
        if (p.t === "text") container.appendChild(document.createTextNode(p.v));
        else if (p.t === "br") container.appendChild(document.createElement("br"));
        else if (p.t === "strong") container.appendChild(el("strong", { text: p.v, className: p.className || "" }));
      }
    }

    // =========================
    // Data Definition
    // =========================
    const STAGES = {
      junior: {
        title: "ã€ã„ã¾ã®ç«‹å ´ã€‘åˆæœŸï¼ˆ1ã€œ2å¹´ç›®ï¼‰",
        subtitle: "ã¾ãšã¯ã€Œå®‰å¿ƒã—ã¦ä»»ã›ã¦ã‚‚ã‚‰ãˆã‚‹äººã€ã«ãªã‚‹ãŸã‚ã®ãƒã‚¤ãƒ³ãƒˆ",
        icon: "ğŸŒ±",
        theme: { border: "#0d9488", bg: "linear-gradient(90deg, #ccfbf1, #fff)" },
        content: [
          { head:"å…±æœ‰ã§ä¿¡é ¼ã‚’è²¯ã‚ã‚‹", bad:"å•é¡ŒãŒèµ·ãã¦ã‹ã‚‰å…±æœ‰ã™ã‚‹ / èã‹ã‚Œã‚‹ã¾ã§è¨€ã‚ãªã„", action:"ã€Œé †èª¿ã§ã™ã€ã ã‘ã§ãªãã€Œã“ã“ãŒä¸å®‰ã§ã™ã€ã‚‚ã‚»ãƒƒãƒˆã§å…±æœ‰ã™ã‚‹ã€‚å›°ã‚Šã”ã¨ã¯ç™ºç”Ÿã—ãŸç¬é–“ã«çŸ­ãå…±æœ‰ã™ã‚‹ã€‚" },
          { head:"å®Œäº†ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã™ã‚Šåˆã‚ã›ã‚‹", bad:"è¨€ã‚ã‚ŒãŸé€šã‚Šã«ä½œã£ãŸã¤ã‚‚ã‚Šã§æ‰‹æˆ»ã‚ŠãŒç™ºç”Ÿã™ã‚‹", action:"ç€æ‰‹å‰ã«ã€Œä½•ãŒã§ããŸã‚‰å®Œäº†ã§ã™ã‹ï¼Ÿã€ã‚’ç¢ºèªã—ã€ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆï¼ˆDoDï¼‰ã‚’ã™ã‚Šåˆã‚ã›ã‚‹ã€‚" },
          { head:"è©°ã¾ã£ãŸæ™‚ã®é€²ã‚æ–¹ã‚’æ•´ãˆã‚‹", bad:"ã™ãã«äººã«èã / é€†ã«æŠ±ãˆè¾¼ã‚“ã§æ­¢ã¾ã‚‹", action:"ãƒ­ã‚°ã‚’èª­ã¿ã€ä»®èª¬ã‚’æŒã£ã¦èª¿ã¹ã‚‹ã€‚15åˆ†è©°ã¾ã£ãŸã‚‰ã€Œã“ã“ã¾ã§èª¿ã¹ãŸã€ã‚’æ·»ãˆã¦ç›¸è«‡ã™ã‚‹ã€‚" }
        ]
      },
      middle: {
        title: "ã€ã„ã¾ã®ç«‹å ´ã€‘ä¸­ç›¤ï¼ˆ3ã€œ5å¹´ç›®ï¼‰",
        subtitle: "ã€Œè‡ªåˆ†ã®æˆæœã€ã‹ã‚‰ã€Œãƒãƒ¼ãƒ ã®å‰é€²ã€ã¸è¦–é‡ã‚’åºƒã’ã‚‹ãƒã‚¤ãƒ³ãƒˆ",
        icon: "ğŸ£",
        theme: { border: "#0284c7", bg: "linear-gradient(90deg, #e0f2fe, #fff)" },
        content: [
          { head:"å‰å¾Œå·¥ç¨‹ã«ç›®ã‚’å‘ã‘ã‚‹", bad:"è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ã ã‘çµ‚ã‚ã‚‰ã›ã¦ã€Œå¾…ã¡ã€ã«ãªã‚‹", action:"è¨­è¨ˆãƒ»ãƒ†ã‚¹ãƒˆãƒ»é‹ç”¨ã®æ‹…å½“ã«ã€Œã“ã®ä»•æ§˜ã§å¾Œã‹ã‚‰å›°ã‚Šãã†ãªç‚¹ã‚ã‚Šã¾ã™ã‹ï¼Ÿã€ã¨æ—©ã‚ã«èãã€æ‰‹æˆ»ã‚Šã‚’æ¸›ã‚‰ã™ã€‚" },
          { head:"ä»£æ¡ˆã‚’æ·»ãˆã¦ç›¸è«‡ã™ã‚‹", bad:"ã€Œç„¡ç†ã§ã™ã€ã ã‘è¨€ã£ã¦æ­¢ã‚ã‚‹", action:"ã€ŒAæ¡ˆã¯ãƒªã‚¹ã‚¯é«˜ã„ã§ã™ãŒã€Bæ¡ˆãªã‚‰æœŸæ—¥ã¾ã§å¯èƒ½ã§ã™ã€ã¨é¸æŠè‚¢ã‚’å‡ºã—ã¦ä¸€ç·’ã«æ±ºã‚ã‚‹ã€‚" },
          { head:"æ‹¾ã†ã¨åŠ¹ãä»•äº‹ã‚’è¦‹ã¤ã‘ã‚‹", bad:"æ‹…å½“å¤–ã®ã‚¢ãƒ©ãƒ¼ãƒˆã‚„ä¸è¶³ã‚’ç„¡è¦–ã™ã‚‹", action:"èª°ã‚‚ã‚„ã£ã¦ã„ãªã„ãŒå¿…è¦ãªã“ã¨ï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ã€ç’°å¢ƒæ•´å‚™ç­‰ï¼‰ã«æ°—ã¥ã„ãŸã‚‰ã€å°ã•ãæ‹¾ã£ã¦å‰é€²ã•ã›ã‚‹ã€‚" }
        ]
      },
      senior: {
        title: "ã€ã„ã¾ã®ç«‹å ´ã€‘çµŒé¨“è€…ï¼ˆ6ã€œ9å¹´ç›®ï¼‰",
        subtitle: "å“è³ªã¨ã‚¹ãƒ”ãƒ¼ãƒ‰ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚Šã€å‘¨å›²ãŒå‹•ãã‚„ã™ã„å½¢ã«ã™ã‚‹ãƒã‚¤ãƒ³ãƒˆ",
        icon: "ğŸ¦",
        theme: { border: "#4f46e5", bg: "linear-gradient(90deg, #eef2ff, #fff)" },
        content: [
          { head:"ä½œã‚‰ãªã„é¸æŠè‚¢ã‚’æŒã¤", bad:"è¨€ã‚ã‚ŒãŸæ©Ÿèƒ½ã‚’å…¨éƒ¨ä½œã£ã¦ä¿å®ˆã‚³ã‚¹ãƒˆã‚’å¢—ã‚„ã™", action:"ã€Œæœ¬å½“ã«ä½¿ã‚ã‚Œã‚‹ã‹ï¼Ÿã€ã‚’ç¢ºèªã—ã€æ—¢å­˜æ©Ÿèƒ½æµç”¨ãƒ»æ®µéšãƒªãƒªãƒ¼ã‚¹ãªã©ã®ä»£æ¡ˆã‚’å‡ºã™ã€‚" },
          { head:"ä»•çµ„ã¿ã§ãƒŸã‚¹ã‚’æ¸›ã‚‰ã™", bad:"ã€Œæ°—ã‚’ã¤ã‘ã‚‹ã€ã§è§£æ±ºã—ã‚ˆã†ã¨ã™ã‚‹", action:"CI/CDã€Lintã€è‡ªå‹•ãƒ†ã‚¹ãƒˆãªã©ã€æ„è­˜ã—ãªãã¦ã‚‚å“è³ªãŒä¿ã¦ã‚‹ä»•çµ„ã¿ã‚’æ•´ãˆã‚‹ã€‚" },
          { head:"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æ¬¡ã®æˆé•·ã‚’æ”¯ãˆã‚‹", bad:"ç´°ã‹ã„æŒ‡æ‘˜ã ã‘ã—ã¦èƒŒæ™¯ãŒä¼ã‚ã‚‰ãªã„", action:"ã€Œãªãœã“ã®å¤‰æ›´ãŒå¿…è¦ã‹ã€ã‚’è¨€èªåŒ–ã—ã€æ¬¡å›ã‹ã‚‰æœ¬äººãŒæ°—ã¥ã‘ã‚‹è¦–ç‚¹ã‚’æ¸¡ã™ã€‚" }
        ]
      },
      veteran: {
        title: "ã€ã„ã¾ã®ç«‹å ´ã€‘ç†Ÿç·´ï¼ˆ10å¹´ç›®ã€œï¼‰",
        subtitle: "éƒ¨åˆ†æœ€é©ã§ã¯ãªãã€å…¨ä½“ã®ä¾¡å€¤ã¨æŒç¶šæ€§ã‚’å„ªå…ˆã™ã‚‹ãƒã‚¤ãƒ³ãƒˆ",
        icon: "ğŸ‘‘",
        theme: { border: "#7c3aed", bg: "linear-gradient(90deg, #f5f3ff, #fff)" },
        content: [
          { head:"éƒ¨åˆ†æœ€é©ã‚’ç–‘ã†", bad:"è‡ªåˆ†ã®ç¯„å›²ã ã‘æ­£è§£ã«ã—ã¦å…¨ä½“ãŒè‹¦ã—ããªã‚‹", action:"æŠ€è¡“çš„ã«æ­£ã—ãã¦ã‚‚ã€ã‚³ã‚¹ãƒˆãƒ»ç´æœŸãƒ»é‹ç”¨ã‚’å«ã‚ãŸå…¨ä½“ã§æˆç«‹ã™ã‚‹ã‹ã‚’ç¢ºèªã—ã¦åˆ¤æ–­ã™ã‚‹ã€‚" },
          { head:"ä¾¡å€¤ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã™ã‚‹", bad:"ä½œã£ãŸé‡ï¼ˆã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆï¼‰ã ã‘ã§è‰¯ã—æ‚ªã—ã‚’æ±ºã‚ã‚‹", action:"ã€Œèª°ã®ä½•ãŒæ¥½ã«ãªã‚‹ã‹ï¼ˆã‚¢ã‚¦ãƒˆã‚«ãƒ ï¼‰ã€ã‚’åŸºæº–ã«å„ªå…ˆé †ä½ã‚’æ•´ãˆã€ãƒãƒ¼ãƒ ãŒè¿·ã‚ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚" },
          { head:"æ–‡åŒ–ã¨ä»•çµ„ã¿ã‚’ä½œã‚‹", bad:"ãƒ«ãƒ¼ãƒ«ã‚„ç½°ã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã‚ˆã†ã¨ã™ã‚‹", action:"å¿ƒç†çš„å®‰å…¨æ€§ãƒ»äº‹å®Ÿãƒ™ãƒ¼ã‚¹ã®è­°è«–ãƒ»å­¦ã³ã®å…±æœ‰ãŒå›ã‚‹ä»•çµ„ã¿ã‚’ä½œã‚Šã€ç¶™ç¶šçš„ã«è‚²ã¦ã‚‹ã€‚" }
        ]
      }
    };

    function getRoleHints(expVal, roleVal) {
      const standard = {
        none:   { title:"ä»»ã•ã‚Œæ–¹ã®å¤‰åŒ–ï¼šã“ã‚Œã‹ã‚‰ã®æº–å‚™", msg:["ã¾ãšã¯ã€Œè‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ã®å‘¨è¾ºã€ã«é–¢å¿ƒã‚’æŒã¤ã¨ã“ã‚ã‹ã‚‰ã€‚ä¼šè­°ã§ã®è³ªå•ã‚„çŠ¶æ³å…±æœ‰ã‚‚ç«‹æ´¾ãªè²¢çŒ®ã§ã™ã€‚"] },
        novice: { title:"ä»»ã•ã‚Œæ–¹ã®å¤‰åŒ–ï¼šã¡ã‚‡ã£ã¨ä»»ã•ã‚Œå§‹ã‚ãŸæ™‚æœŸ", msg:["å°ã•ãªç´„æŸã‚’å®ˆã‚‹ï¼è©±ã‚’æœ€å¾Œã¾ã§èãï¼çŠ¶æ³ã‚’çŸ­ãå…±æœ‰ã™ã‚‹ã€‚ä¿¡é ¼ã‚’ç©ã¿ä¸Šã’ã‚‹æ™‚æœŸã§ã™ã€‚"] },
        lead:   { title:"ä»»ã•ã‚Œæ–¹ã®å¤‰åŒ–ï¼šãƒªãƒ¼ãƒ‰ãƒ»æ”¯ãˆã‚‹ãŒå¢—ãˆãŸæ™‚æœŸ", msg:["è‡ªåˆ†ãŒã‚„ã£ãŸæ–¹ãŒæ—©ãã¦ã‚‚ã€ä»»ã›ã‚‹å‹‡æ°—ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚60ç‚¹ã§é€²ã‚ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æ•´ãˆã‚‹ã€ãŒæœ‰åŠ¹ã§ã™ã€‚"] },
        manager:{ title:"ä»»ã•ã‚Œæ–¹ã®å¤‰åŒ–ï¼šç®¡ç†ãƒ»é‹å–¶ãŒå¤šã„æ™‚æœŸ", msg:["è‡ªåˆ†ãŒã„ãªãã¦ã‚‚å›ã‚‹ä»•çµ„ã¿ã¨ã€æ¬¡ã®äººãŒè‚²ã¤å ´ã‚’ä½œã‚‹ã“ã¨ãŒä¸­å¿ƒã«ãªã‚Šã¾ã™ã€‚"] }
      };

      const expLevel = { junior:1, middle:2, senior:3, veteran:4 };
      const roleLevel = { none:0, novice:1, lead:2, manager:3 };
      const e = expLevel[expVal];
      const r = roleLevel[roleVal];

      // Special cases
      if (e >= 3 && r <= 1) {
        return {
          title: "çµŒé¨“ã®æ·±ã¿ã‚’ã€å½±éŸ¿åŠ›ã«ã¤ãªã’ã‚‹",
          msg: [
            "çµŒé¨“å¹´æ•°ã«å¯¾ã—ã¦ã€Œä»»ã•ã‚Œæ–¹ã€ãŒå°‘ãªã„å ´åˆã§ã‚‚ã€ç„¦ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å¥‘ç´„å½¢æ…‹ã‚„ç¾å ´ã®æ§‹é€ ä¸Šã€ãã†ãªã‚‹ã“ã¨ã¯çã—ãã‚ã‚Šã¾ã›ã‚“ã€‚",
            "ã“ã‚Œã‹ã‚‰ã¯ã€Œç®¡ç†ã€ã§ã¯ãªãã€ç›¸è«‡ã«ä¹—ã‚‹ï¼èƒŒæ™¯ã‚’è¨€èªåŒ–ã™ã‚‹ï¼åˆ¤æ–­ææ–™ã‚’å‡ºã™ã€ã¨ã„ã£ãŸå½¢ã§å½±éŸ¿åŠ›ã‚’ç™ºæ®ã—ã¦ãã ã•ã„ã€‚"
          ],
          tips: [
            { icon:"âœ¨", text:"ã€Œå½¹è·ã€ã ã‘ãŒå‰é€²ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æŠ€è¡“ãƒ¡ãƒ³ã‚¿ãƒ¼ï¼ç›¸è«‡å½¹ã¨ã—ã¦ä¿¡é ¼ã‚’ä½œã‚‹é“ã‚‚ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚" },
            { icon:"ğŸ“š", text:"éå»ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚’ã€Œã©ã†æ°—ã¥ãã€ã©ã†ç›´ã—ãŸã‹ã€ã¨ã„ã†ç‰©èªã§å…±æœ‰ã™ã‚‹ã¨ã€å‘¨å›²ã®å­¦ã³ãŒé€Ÿããªã‚Šã¾ã™ã€‚" },
            { icon:"ğŸ¤", text:"ç„¡ç†ã«å¼•ã£å¼µã‚‰ãªãã¦OKã€‚å›°ã£ã¦ã„ã‚‹äººã®ç›¸è«‡ã«ä¹—ã‚‹ã ã‘ã§ã‚‚ååˆ†ã«å½±éŸ¿åŠ›ã§ã™ã€‚" }
          ]
        };
      }
      if (e <= 1 && r >= 2) {
        return {
          title: "ä»»ã•ã‚Œã‚‹ã®ãŒæ—©ã„æ™‚æœŸã®ã‚³ãƒ„",
          msg: [
            "æ—©ã„æ®µéšã§ä»»ã•ã‚Œã‚‹ã®ã¯è‰¯ã„çµŒé¨“ã§ã™ã€‚ãŸã ã€æ°—åˆã„ã ã‘ã§èµ°ã‚‹ã¨ç–²ã‚Œã‚„ã™ããªã‚Šã¾ã™ã€‚",
            "ã€Œè‡ªåˆ†ãŒä¸€ç•ªã§ãã‚‹å¿…è¦ã¯ãªã„ã€ã®ã§ã€å¹´ä¸Šã®äººã‚„å°‚é–€å®¶ã«é ¼ã‚‹â€œç›¸è«‡ã®è¨­è¨ˆâ€ã‚’å…ˆã«ä½œã£ã¦ãŠãã¨å®‰å®šã—ã¾ã™ã€‚"
          ],
          tips: [
            { icon:"ğŸ›¡ï¸", text:"ã€Œå…¨éƒ¨è‡ªåˆ†ã§èƒŒè² ã†ã€ã‚’æ¨ã¦ã‚‹ã€‚ç›¸è«‡ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®é »åº¦ã‚’å…ˆã«æ±ºã‚ã¦ãŠãã¨å®‰å¿ƒã§ã™ã€‚" },
            { icon:"ğŸ‘‚", text:"å¹´ä¸Šãƒ¡ãƒ³ãƒãƒ¼ã«ã¯ã€Œæ•™ãˆã¦ãã ã•ã„ã€ã®å§¿å‹¢ã§ã€‚æ•¬æ„ãŒã‚ã‚‹ã¨ã€åŠ©ã‘ãŒè¿”ã£ã¦ãã¾ã™ã€‚" },
            { icon:"â¤ï¸", text:"è‡ªåˆ†ã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’å®ˆã‚‹ã®ã‚‚ä»•äº‹ã€‚ä¼‘ã‚ã‚‹è¨­è¨ˆï¼ˆä»£æ›¿ãƒ»å¼•ãç¶™ãï¼‰ã‚’æŒã¡ã¾ã—ã‚‡ã†ã€‚" }
          ]
        };
      }

      const base = standard[roleVal];
      const tips = {
        none: [
          { icon:"ğŸ‘€", text:"é€²æ—ãƒœãƒ¼ãƒ‰ã‚„ãƒã‚±ãƒƒãƒˆã‚’æ¯æ—¥1å›çœºã‚ã¦ã€Œå…¨ä½“ã®æ¸©åº¦æ„Ÿã€ã‚’æ´ã‚€ã€‚" },
          { icon:"ğŸ™‹â€â™‚ï¸", text:"åˆ†ã‹ã£ãŸãµã‚Šã‚’ã›ãšã€Œãã‚Œã¯ã©ã†ã„ã†æ„å‘³ã§ã™ã‹ï¼Ÿã€ã‚’è¨€ãˆã‚‹ã“ã¨ãŒã€é•·æœŸçš„ã«å¼·ã„ã§ã™ã€‚" },
          { icon:"ğŸ§¹", text:"è­°äº‹éŒ²ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ãªã©ã€èª°ã‚‚ã‚„ã‚ŠãŸãŒã‚‰ãªã„ä»•äº‹ã¯ä¿¡é ¼ã‚’ä½œã‚Šã‚„ã™ã„ã§ã™ã€‚" }
        ],
        novice: [
          { icon:"ğŸ¤™", text:"ã€Œæ˜æ—¥ã‚„ã‚Šã¾ã™ã€ã‚’å®ˆã‚‹ã€‚å°ã•ãªç´„æŸã®ç©ã¿ä¸Šã’ãŒä¸€ç•ªåŠ¹ãã¾ã™ã€‚" },
          { icon:"ğŸ‘‚", text:"ç›¸æ‰‹ã®è©±ã‚’é€”ä¸­ã§é®ã‚‰ãªã„ã€‚æœ€å¾Œã¾ã§èãã“ã¨ã§æƒ…å ±ã®æŠœã‘ãŒæ¸›ã‚Šã¾ã™ã€‚" },
          { icon:"ğŸ†˜", text:"ãƒˆãƒ©ãƒ–ãƒ«æ™‚ã¯è¬ç½ªã‚ˆã‚Šå…ˆã«äº‹å®Ÿï¼ˆã„ã¾ä½•ãŒèµ·ãã¦ã„ã‚‹ã‹ï¼‰ã‚’çŸ­ãå…±æœ‰ã™ã‚‹ã€‚" }
        ],
        lead: [
          { icon:"ğŸš€", text:"è‡ªåˆ†ãŒæ›¸ã‘ã°æ—©ã„å ´é¢ã»ã©ã€ä»»ã›ã‚‹ã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æ–¹å‘ã ã‘æ•´ãˆã‚‹ã¨ãƒãƒ¼ãƒ ãŒè‚²ã¡ã¾ã™ã€‚" },
          { icon:"ğŸ†", text:"æ‰‹æŸ„ã¯ãƒ¡ãƒ³ãƒãƒ¼ã¸ã€å›°ã‚Šã”ã¨ã¯è‡ªåˆ†ãŒæ‹¾ã†ã€‚å®‰å¿ƒã—ã¦æŒ‘æˆ¦ã§ãã‚‹ç©ºæ°—ã‚’ä½œã‚Œã¾ã™ã€‚" },
          { icon:"ğŸ”„", text:"æŒ‡ç¤ºã‚’ãã®ã¾ã¾æµã™ã‚ˆã‚Šã€èƒŒæ™¯ã‚’å™›ã¿ç •ã„ã¦å…±æœ‰ã™ã‚‹ã¨èª¤è§£ãŒæ¸›ã‚Šã¾ã™ã€‚" }
        ],
        manager: [
          { icon:"âš™ï¸", text:"å±äººåŒ–ã‚’æ¸›ã‚‰ã™ã€‚èª°ãŒæŠœã‘ã¦ã‚‚å›ã‚‹ä»•çµ„ã¿ï¼ˆæ‰‹é †ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»è‡ªå‹•åŒ–ï¼‰ã‚’å„ªå…ˆã™ã‚‹ã€‚" },
          { icon:"ğŸŒ±", text:"ç’°å¢ƒã‚’æ•´ãˆã‚‹ã®ãŒä»•äº‹ã€‚äººãŒåŠ›ã‚’å‡ºã›ã‚‹ã€Œé‚ªé­”ã®ãªã„çŠ¶æ…‹ã€ã‚’ä½œã‚‹ã€‚" },
          { icon:"ğŸ›ï¸", text:"ãªãœã“ã®ä»•äº‹ã‚’ã™ã‚‹ã®ã‹ï¼ˆç›®çš„ãƒ»ä¾¡å€¤ï¼‰ã‚’ç¹°ã‚Šè¿”ã—è¨€èªåŒ–ã™ã‚‹ã€‚" }
        ]
      };

      return { title: base.title, msg: base.msg, tips: tips[roleVal] };
    }

    function getCommunicationHints(expVal, coworkerKeys) {
      const db = {
        internal_boss: {
          junior: { icon:"ğŸ‘¨â€ğŸ’¼", title:"å¯¾ ä¸Šå¸ï¼ˆå…±æœ‰ãƒ»å­¦ç¿’ï¼‰", advice:"ã‚µãƒ—ãƒ©ã‚¤ã‚ºã‚’ãªãã™", bad:"è‡ªå·±åˆ¤æ–­ã§æŠ±ãˆè¾¼ã¿ã€æ‰‹é…ã‚Œã«ãªã£ã¦ã‹ã‚‰å…±æœ‰ã™ã‚‹ã€‚", good:"ã€ŒçŠ¶æ³ã¯æ‚ªã„ã§ã™ãŒã€æ¡ˆã¯ã‚ã‚Šã¾ã™ã€ã¨æœ€çŸ­ã§å…±æœ‰ã™ã‚‹ã€‚", mindset:"ä¸Šå¸ã¯ã€Œè©•ä¾¡è€…ã€ã ã‘ã§ãªãã€Œãƒªã‚½ãƒ¼ã‚¹ã€ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚é æ…®ã›ãšã€å­¦ã³ã®ãŸã‚ã«ä½¿ã„ã¾ã—ã‚‡ã†ã€‚" },
          middle: { icon:"ğŸ‘¨â€ğŸ’¼", title:"å¯¾ ä¸Šå¸ï¼ˆææ¡ˆï¼‰", advice:"é¸æŠè‚¢ã‚’æŒã£ã¦ã„ã", bad:"ã€Œã©ã†ã™ã‚Œã°ã„ã„ã§ã™ã‹ã€ã¨ä¸¸æŠ•ã’ã™ã‚‹ã€‚", good:"ã€ŒAæ¡ˆã¨Bæ¡ˆãŒã‚ã‚Šã€ç§ã¯Aæ¡ˆæ¨å¥¨ã§ã™ã€ã¨è‡ªåˆ†ã®æ„è¦‹ã‚’æ·»ãˆã‚‹ã€‚", mindset:"ä¸Šå¸ã®æ™‚é–“ã‚’å¥ªã‚ãªã„ã€Œåˆ¤æ–­ã—ã‚„ã™ã„å½¢ã€ã§æ¸¡ã™ã¨ã€ä¿¡é ¼ã‚³ã‚¹ãƒˆãŒä¸‹ãŒã‚Šã¾ã™ã€‚" },
          senior: { icon:"ğŸ‘¨â€ğŸ’¼", title:"å¯¾ ä¸Šå¸ï¼ˆåˆ¤æ–­æ”¯æ´ï¼‰", advice:"è¦–åº§ã‚’åˆã‚ã›ã‚‹", bad:"æŠ€è¡“çš„ãªæ­£ã—ã•ã ã‘ã§èª¬å¾—ã—ã‚ˆã†ã¨ã™ã‚‹ã€‚", good:"ã€Œã“ã®æŠ€è¡“çš„è² å‚µã‚’è¿”ã™ã¨ã€æ¥æœŸã®é–‹ç™ºé€Ÿåº¦ãŒ2å€ã«ãªã‚Šã¾ã™ã€ã¨ãƒ¡ãƒªãƒƒãƒˆã§èªã‚‹ã€‚", mindset:"ä¸Šå¸ãŒè¦‹ã¦ã„ã‚‹æ™¯è‰²ï¼ˆç´æœŸãƒ»ã‚³ã‚¹ãƒˆãƒ»ãƒªã‚¹ã‚¯ï¼‰ã‚’æƒ³åƒã—ã€åŒã˜åœ°å›³ã§è©±ã™ã¨é€šã‚Šã‚„ã™ã„ã§ã™ã€‚" },
          veteran:{ icon:"ğŸ‘¨â€ğŸ’¼", title:"å¯¾ ä¸Šå¸ï¼ˆãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼‰", advice:"èª²é¡Œã‚’å®šç¾©ã™ã‚‹", bad:"è¨€ã‚ã‚ŒãŸã“ã¨ã ã‘ã‚’ã‚„ã‚‹ã€‚", good:"ã€Œä»Šã®äº‹æ¥­ãƒ•ã‚§ãƒ¼ã‚ºãªã‚‰ã€æ©Ÿèƒ½è¿½åŠ ã‚ˆã‚Šå®‰å®šæ€§ã‚’å„ªå…ˆã™ã¹ãã§ã¯ï¼Ÿã€ã¨å‰æã‹ã‚‰å•ã†ã€‚", mindset:"ä¸Šå¸ã®ã€Œå³è…•ã€ã¨ã—ã¦ã€çµ„ç¹”å…¨ä½“ã®æœ€é©è§£ã‚’ä¸€ç·’ã«æ¢ã™ã‚¹ã‚¿ãƒ³ã‚¹ãŒä¾¡å€¤ã«ãªã‚Šã¾ã™ã€‚" }
        },
        internal_junior: {
          junior: { icon:"ğŸ£", title:"å¯¾ å¾Œè¼©ï¼ˆå…±æ„Ÿï¼‰", advice:"ä¸€ç·’ã«æ‚©ã‚€", bad:"å…ˆè¼©é¢¨ã‚’å¹ã‹ã›ã¦ã€çŸ¥ã£ãŸã‹ã¶ã‚Šã‚’ã™ã‚‹ã€‚", good:"ã€Œç§ã‚‚åˆ†ã‹ã‚‰ãªã‹ã£ãŸã‹ã‚‰ä¸€ç·’ã«èª¿ã¹ã‚ˆã†ã€ã¨æ¨ªã«ä¸¦ã¶ã€‚", mindset:"æ•™ãˆã‚‹ã“ã¨ã¯å­¦ã¶ã“ã¨ã€‚è³ªå•ã¯è‡ªåˆ†ã®ç†è§£åº¦ã‚’ä¸Šã’ã‚‹ãƒãƒ£ãƒ³ã‚¹ã§ã™ã€‚" },
          middle: { icon:"ğŸ£", title:"å¯¾ å¾Œè¼©ï¼ˆã‚¬ã‚¤ãƒ‰ï¼‰", advice:"ç­”ãˆã‚ˆã‚Šèª¿ã¹æ–¹", bad:"ã™ãã«ç­”ãˆã®ã‚³ãƒ¼ãƒ‰ã‚’æ•™ãˆã‚‹ã€‚", good:"ã€Œã©ã®ãƒ­ã‚°ã‚’è¦‹ãŸï¼Ÿã€ã€Œã©ã†æ¤œç´¢ã—ãŸï¼Ÿã€ã¨è§£æ±ºãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¬ã‚¤ãƒ‰ã™ã‚‹ã€‚", mindset:"ã€Œé­šã‚’ä¸ãˆã‚‹ã®ã§ã¯ãªãã€é­šã®é‡£ã‚Šæ–¹ã‚’æ•™ãˆã‚‹ã€ã®ãŒã€ãŠäº’ã„ã®ãŸã‚ã«ãªã‚Šã¾ã™ã€‚" },
          senior: { icon:"ğŸ£", title:"å¯¾ å¾Œè¼©ï¼ˆè‚²æˆï¼‰", advice:"å¤±æ•—ã•ã›ã‚‹", bad:"å¤±æ•—ã—ãªã„ã‚ˆã†ã«å…ˆå›ã‚Šã—ã¦å…¨éƒ¨ãŠè†³ç«‹ã¦ã™ã‚‹ã€‚", good:"è‡´å‘½å‚·ã«ãªã‚‰ãªã„ç¯„å›²ã§ä»»ã›ã€å¤±æ•—ã‹ã‚‰å­¦ã¶æ©Ÿä¼šã‚’å®ˆã‚‹ã€‚", mindset:"ã‚³ãƒ”ãƒ¼ã‚’ä½œã‚‹ã®ã§ã¯ãªãã€è‡ªèµ°ã§ãã‚‹äººã‚’å¢—ã‚„ã™ã®ãŒã‚´ãƒ¼ãƒ«ã§ã™ã€‚" },
          veteran:{ icon:"ğŸ£", title:"å¯¾ å¾Œè¼©ï¼ˆæ–‡åŒ–ï¼‰", advice:"å¿ƒç†çš„å®‰å…¨", bad:"ã€Œãªã‚“ã§ãã‚“ãªã“ã¨ã—ãŸã®ï¼Ÿã€ã¨è©°ã‚ã‚‹ã€‚", good:"ã€Œå†ç™ºé˜²æ­¢ã®ãŸã‚ã«ã€ä»•çµ„ã¿ã®ã©ã“ã‚’ç›´ãã†ã‹ï¼Ÿã€ã¨æœªæ¥ã‚’å‘ãã€‚", mindset:"å€‹äººã®ãƒŸã‚¹ã‚’è²¬ã‚ãšã€ä»•çµ„ã¿ã‚’ç–‘ã†å§¿å‹¢ã‚’è¦‹ã›ã‚‹ã“ã¨ã§ã€æŒ‘æˆ¦ã§ãã‚‹æ–‡åŒ–ãŒè‚²ã¡ã¾ã™ã€‚" }
        },
        internal_peer: {
          junior: { icon:"ğŸ¤", title:"å¯¾ åŒåƒšï¼ˆå”åŠ›ï¼‰", advice:"GIVEã‹ã‚‰å§‹ã‚ã‚‹", bad:"è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ã«é›†ä¸­ã—ã™ãã¦å‘¨å›²ã‚’è¦‹ãªã„ã€‚", good:"æ‰‹ãŒç©ºã„ãŸã‚‰ã€Œä½•ã‹æ‰‹ä¼ãˆã¾ã™ã‹ï¼Ÿã€ã¨å£°ã‚’ã‹ã‘ã‚‹ã€‚", mindset:"å›°ã£ãŸæ™‚ã«åŠ©ã‘ãŒè¿”ã£ã¦ãã‚‹ã®ã¯ã€æ™®æ®µã‹ã‚‰åŠ©ã‘ã¦ã„ã‚‹äººã§ã™ã€‚" },
          middle: { icon:"ğŸ¤", title:"å¯¾ åŒåƒšï¼ˆé€£æºï¼‰", advice:"ãƒœãƒ¼ãƒ«ã‚’æ‹¾ã†", bad:"ã€Œãã‚Œã¯ç§ã®æ‹…å½“ã˜ã‚ƒãªã„ã€ã¨å¢ƒç•Œç·šã‚’å¼•ãã€‚", good:"ãƒãƒ†ãƒ³ãƒ’ãƒƒãƒˆï¼ˆè½ã¡ãã†ãªãƒœãƒ¼ãƒ«ï¼‰ã‚’è¦‹ã¤ã‘ãŸã‚‰ã€ã¾ãšæ‹¾ã£ã¦ã‹ã‚‰åˆ†æ‹…ã‚’ç›¸è«‡ã™ã‚‹ã€‚", mindset:"è‡ªåˆ†ã®ç¯„å›²ã‚’å°‘ã—ã¯ã¿å‡ºã—ã¦å‹•ãã¨ã€ãƒãƒ¼ãƒ ã®éš™é–“ãŒåŸ‹ã¾ã‚Šã€æ„Ÿè¬ã•ã‚Œã¾ã™ã€‚" },
          senior: { icon:"ğŸ¤", title:"å¯¾ åŒåƒšï¼ˆå°Šé‡ï¼‰", advice:"äººæ ¼ã¨ã‚³ãƒ¼ãƒ‰ã‚’åˆ†ã‘ã‚‹", bad:"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ç›¸æ‰‹ã‚’è©°ã‚ã¦èç¸®ã•ã›ã‚‹ã€‚", good:"å“è³ªã®è©±ã§ã‚ã‚Šã€äººæ ¼ã®è©±ã§ã¯ãªã„ã“ã¨ã‚’æ…‹åº¦ã§ç¤ºã™ã€‚", mindset:"å¿ƒç†çš„å®‰å…¨æ€§ã¯å‹æ‰‹ã«ç”Ÿã¾ã‚Œã¾ã›ã‚“ã€‚çµŒé¨“è€…ãŒå®ˆã£ã¦åˆã‚ã¦å›ã‚Šå§‹ã‚ã¾ã™ã€‚" },
          veteran:{ icon:"ğŸ¤", title:"å¯¾ åŒåƒšï¼ˆè§¦åª’ï¼‰", advice:"å¼·ã¿ã‚’ç¹‹ã", bad:"è‡ªåˆ†ä¸€äººã§è§£æ±ºã—ã‚ˆã†ã¨ã™ã‚‹ã€‚", good:"ã€Œã“ã®ä»¶ãªã‚‰Aã•ã‚“ãŒè©³ã—ã„ã‚ˆã€ã¨äººã¨äººã‚’ç¹‹ãã€ãƒãƒ¼ãƒ ã®ç·åŠ›ã‚’ä¸Šã’ã‚‹ã€‚", mindset:"è‡ªåˆ†ãŒãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã«ãªã‚‰ãšã€æƒ…å ±ã¨äººãŒã‚¹ãƒ ãƒ¼ã‚ºã«æµã‚Œã‚‹ãƒãƒ–ã«ãªã‚Šã¾ã™ã€‚" }
        },
        client_boss: {
          junior: { icon:"ğŸ¢", title:"å¯¾ ãŠå®¢æ§˜å´", advice:"è¨˜éŒ²ã‚’æ®‹ã™", bad:"å£é ­ã§é€²ã‚ã¦ã€Œè¨€ã£ãŸè¨€ã‚ãªã„ã€ã«ãªã‚‹ã€‚", good:"æ±ºå®šäº‹é …ã¯è­°äº‹éŒ²ã‚„ãƒã‚±ãƒƒãƒˆã«æ®‹ã—ã€ãƒªãƒ³ã‚¯ã‚’é€ã‚‹ã€‚", mindset:"ä¿¡é ¼ã¯æ­£ç¢ºãªè¨˜éŒ²ã‹ã‚‰ç”Ÿã¾ã‚Œã¾ã™ã€‚è‡ªåˆ†ã¨ãƒãƒ¼ãƒ ã‚’å®ˆã‚‹ç›¾ã«ãªã‚Šã¾ã™ã€‚" },
          middle: { icon:"ğŸ¢", title:"å¯¾ ãŠå®¢æ§˜å´", advice:"æœŸå¾…å€¤ã‚’èª¿æ•´", bad:"ãã®å ´ã§ã€Œã§ãã¾ã™ã€ã¨å®‰è«‹ã‘åˆã„ã™ã‚‹ã€‚", good:"ã€ŒæŒã¡å¸°ã£ã¦ç¢ºèªã—ã¾ã™ã€ã¨ä¸€æ—¦ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã‚’ç½®ãã€‚", mindset:"å³ç­”ã§ããªã„ã“ã¨ã¯ä¿ç•™ã™ã‚‹å‹‡æ°—ãŒã€çµæœçš„ã«ãƒˆãƒ©ãƒ–ãƒ«ã‚’é˜²ãã¾ã™ã€‚" },
          senior: { icon:"ğŸ¢", title:"å¯¾ ãŠå®¢æ§˜å´", advice:"Noã‚’è¨€ã†", bad:"ç„¡ç†ãªè¦æœ›ã‚’å…¨éƒ¨èã„ã¦ç¾å ´ã‚’ç–²å¼Šã•ã›ã‚‹ã€‚", good:"ã€Œãã‚Œã‚’ã‚„ã‚‹ã¨ç´æœŸãŒé…ã‚Œã¾ã™ãŒã€ã©ã¡ã‚‰ã‚’å„ªå…ˆã—ã¾ã™ã‹ï¼Ÿã€ã¨ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’ç¤ºã™ã€‚", mindset:"å¾¡ç”¨èãã§ã¯ãªãã€æŠ€è¡“ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã—ã¦ä¾¡å€¤ã‚’æœ€å¤§åŒ–ã™ã‚‹è¦–ç‚¹ãŒåŠ¹ãã¾ã™ã€‚" },
          veteran:{ icon:"ğŸ¢", title:"å¯¾ ãŠå®¢æ§˜å´", advice:"ä¿¡é ¼è²¯é‡‘", bad:"å¥‘ç´„ç¯„å›²å†…ã®ã“ã¨ã—ã‹ã—ãªã„ã€‚", good:"ç›¸æ‰‹ã®ãƒ“ã‚¸ãƒã‚¹èª²é¡Œã«èˆˆå‘³ã‚’æŒã¡ã€ã€ŒæŠ€è¡“ã§ã©ã†è§£æ±ºã§ãã‚‹ã‹ã€ã‚’ææ¡ˆã™ã‚‹ã€‚", mindset:"ç™ºæ³¨è€…ã¨å—æ³¨è€…ã‚’è¶…ãˆãŸã€ŒåŒã˜ã‚´ãƒ¼ãƒ«ã‚’ç›®æŒ‡ã™ä»²é–“ã€ã¨ã—ã¦ã®ä¿¡é ¼ã‚’ç¯‰ãã¾ã™ã€‚" }
        },
        partner_junior: {
          junior: { icon:"ğŸ—ï¸", title:"å¯¾ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼", advice:"æ•¬æ„ã‚’å¿˜ã‚Œãªã„", bad:"ä¸‹è«‹ã‘ã®ã‚ˆã†ã«æ‰±ã†ã€‚", good:"åŒã˜ã‚´ãƒ¼ãƒ«ã‚’ç›®æŒ‡ã™ä»²é–“ã¨ã—ã¦ã€æ„Ÿè¬ã¨æ•¬æ„ã‚’ç¤ºã™ã€‚", mindset:"æ‰€å±ãŒé•ã£ã¦ã‚‚ã€åŒã˜ãƒãƒ¼ãƒ ã§ã™ã€‚ä¸å¯§ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ‘©æ“¦ã‚’æ¸›ã‚‰ã—ã¾ã™ã€‚" },
          middle: { icon:"ğŸ—ï¸", title:"å¯¾ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼", advice:"æ–‡è„ˆã‚’å…±æœ‰", bad:"ä½œæ¥­ã ã‘ä¾é ¼ã—ã¦ã€èƒŒæ™¯ã‚’ä¼ãˆãªã„ã€‚", good:"ã€Œãªãœã“ã®æ©Ÿèƒ½ãŒå¿…è¦ã‹ã€ã‚’ä¼ãˆã€ã‚ˆã‚Šè‰¯ã„å®Ÿè£…æ–¹æ³•ãŒã‚ã‚Œã°ææ¡ˆã—ã¦ã‚‚ã‚‰ã†ã€‚", mindset:"å˜ãªã‚‹ä½œæ¥­è€…ã§ã¯ãªãã€å°‚é–€å®¶ã¨ã—ã¦é ¼ã‚‹ã“ã¨ã§ã€è³ªã®é«˜ã„ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆãŒè¿”ã£ã¦ãã¾ã™ã€‚" },
          senior: { icon:"ğŸ—ï¸", title:"å¯¾ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼", advice:"ã‚´ãƒ¼ãƒ«ã‚’æ¡ã‚‹", bad:"ã€Œã„ã„æ„Ÿã˜ã«ã€ã§ä¸¸æŠ•ã’ã™ã‚‹ã€‚", good:"ã€Œä½•ãŒã§ããŸã‚‰å®Œäº†ã‹ï¼ˆDoDï¼‰ã€ã‚’æ˜ç¢ºã«æ¡ã‚Šã€æ‰‹æˆ»ã‚Šã‚’é˜²ãã€‚", mindset:"æƒ…å ±ã®éå¯¾ç§°æ€§ã‚’æ¸›ã‚‰ã™ã»ã©ã€ç›¸æ‰‹ãŒè‡ªå¾‹çš„ã«å‹•ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚" },
          veteran:{ icon:"ğŸ—ï¸", title:"å¯¾ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼", advice:"ç’°å¢ƒã‚’æ•´ãˆã‚‹", bad:"ä½¿ã„ã«ãã„ç’°å¢ƒã‚„ãƒ„ãƒ¼ãƒ«ã‚’æ”¾ç½®ã™ã‚‹ã€‚", good:"ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒåƒãã‚„ã™ã„æ¨©é™ã‚„ç’°å¢ƒã‚’æ•´ãˆã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€å¤§åŒ–ã™ã‚‹ã€‚", mindset:"ç›¸æ‰‹ã®ç”Ÿç”£æ€§ã‚’ä¸Šã’ã‚‹ã“ã¨ãŒã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®æˆåŠŸã¸ã®è¿‘é“ã§ã™ã€‚" }
        },
        non_engineer: {
          junior: { icon:"ğŸ¨", title:"å¯¾ éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢", advice:"ç¿»è¨³ã™ã‚‹", bad:"æŠ€è¡“ç”¨èªï¼ˆDBã€APIãªã©ï¼‰ã‚’ãã®ã¾ã¾ä½¿ã£ã¦è©±ã™ã€‚", good:"ã€Œç”»é¢ã‚’è¡¨ç¤ºã™ã‚‹ä»•çµ„ã¿ã€ãªã©ã€ç›¸æ‰‹ã®è¨€è‘‰ã«ç½®ãæ›ãˆã‚‹ã€‚", mindset:"ç›¸æ‰‹ã¯ã€ŒæŠ€è¡“ãŒåˆ†ã‹ã‚‰ãªã„ã€ã®ã§ã¯ãªãã€Œå°‚é–€å¤–ã€ãªã ã‘ã§ã™ã€‚ãƒªã‚¹ãƒšã‚¯ãƒˆã‚’æŒã£ã¦ç¿»è¨³ã—ã¾ã—ã‚‡ã†ã€‚" },
          middle: { icon:"ğŸ¨", title:"å¯¾ éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢", advice:"è¦–è¦šåŒ–ã™ã‚‹", bad:"å£é ­ã‚„ãƒ†ã‚­ã‚¹ãƒˆã ã‘ã§ä»•æ§˜ã‚’è©°ã‚ã‚ˆã†ã¨ã™ã‚‹ã€‚", good:"å›³ã‚„ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æ›¸ã„ã¦ã€Œã“ã†ã„ã†ã“ã¨ã§ã™ã‹ï¼Ÿã€ã¨ç¢ºèªã™ã‚‹ã€‚", mindset:"ç™¾èã¯ä¸€è¦‹ã«ã—ã‹ãšã€‚å‹•ãã‚‚ã®ã‚„çµµã‚’è¦‹ã›ã‚‹ã“ã¨ãŒã€èªè­˜ã‚ºãƒ¬ã‚’é˜²ãæœ€çŸ­ãƒ«ãƒ¼ãƒˆã§ã™ã€‚" },
          senior: { icon:"ğŸ¨", title:"å¯¾ éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢", advice:"ä¾¡å€¤ã§è©±ã™", bad:"ã€ŒæŠ€è¡“çš„ã«ç„¡ç†ã§ã™ã€ã¨ã ã‘ä¼ãˆã¦ã‚·ãƒ£ãƒƒãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹ã€‚", good:"ã€Œãã‚Œã‚’å®Ÿç¾ã™ã‚‹ã¨è¡¨ç¤ºãŒ3ç§’é…ããªã‚Šã¾ã™ãŒã€è¨±å®¹ã§ãã¾ã™ã‹ï¼Ÿã€ã¨ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’ç¤ºã™ã€‚", mindset:"å…±é€šè¨€èªã¯ã€Œã‚³ãƒ¼ãƒ‰ã€ã§ã¯ãªãã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤ã€ã§ã™ã€‚ãã“ã‚’æ¡ã‚‹ã¨è­°è«–ãŒã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚Šã¾ã™ã€‚" },
          veteran:{ icon:"ğŸ¨", title:"å¯¾ éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢", advice:"å®Ÿç¾æ–¹æ³•ã‚’å‰µã‚‹", bad:"ä»•æ§˜ãŒæ±ºã¾ã‚‹ã®ã‚’å¾…ã¤ã€‚", good:"ã€Œã“ã†ã„ã†æŠ€è¡“ã‚’ä½¿ãˆã°ã€ã‚‚ã£ã¨ç°¡å˜ã«å®Ÿç¾ã§ãã¾ã™ã‚ˆã€ã¨æŠ€è¡“å´ã‹ã‚‰ææ¡ˆã™ã‚‹ã€‚", mindset:"æŠ€è¡“ã®å¼•ãå‡ºã—ã‚’ä½¿ã£ã¦ã€ãƒ“ã‚¸ãƒã‚¹ã®å¯èƒ½æ€§ã‚’åºƒã’ã‚‹ææ¡ˆãŒã§ãã¾ã™ã€‚" }
        },
        solo: {
          junior: { icon:"ğŸ’»", title:"ã‚½ãƒ­ãƒ¯ãƒ¼ã‚¯", advice:"è©°ã¾ã‚Šã‚’é˜²ã", bad:"ä¸€äººã§ä½•æ™‚é–“ã‚‚æ‚©ã¿ç¶šã‘ã¦æ™‚é–“ã‚’æ¶ˆè²»ã™ã‚‹ã€‚", good:"æ™‚é–“ã‚’åŒºåˆ‡ã‚Šã€AIã‚„ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ»ä¸Šå¸ã«ç›¸è«‡ã™ã‚‹ã€‚", mindset:"å­¤ç‹¬ã¯è¦–é‡ã‚’ç‹­ã‚ã¾ã™ã€‚æ„è­˜çš„ã«å¤–éƒ¨ã®ç›®ã‚’å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚" },
          middle: { icon:"ğŸ’»", title:"ã‚½ãƒ­ãƒ¯ãƒ¼ã‚¯", advice:"ãƒ­ã‚°ã‚’æ®‹ã™", bad:"æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’æ®‹ã•ãšã€å®Œæˆå“ã ã‘ä½œã‚‹ã€‚", good:"è©°ã¾ã£ãŸçµŒç·¯ã‚„è©¦ã—ãŸã“ã¨ã‚’ãƒ¡ãƒ¢ã«æ®‹ã—ã€æœªæ¥ã®è‡ªåˆ†ã‚„ä»–äººãŒè¿½ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚", mindset:"éç¨‹ã®è¨˜éŒ²ã¯ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®éš›ã®å¼·åŠ›ãªæ­¦å™¨ã«ãªã‚Šã¾ã™ã€‚" },
          senior: { icon:"ğŸ’»", title:"ã‚½ãƒ­ãƒ¯ãƒ¼ã‚¯", advice:"æœªæ¥ã®è‡ªåˆ†ã¸", bad:"è‡ªåˆ†ã—ã‹èª­ã¾ãªã„ã‹ã‚‰ã¨æ±šã„ã‚³ãƒ¼ãƒ‰ã‚’æ”¾ç½®ã™ã‚‹ã€‚", good:"åŠå¹´å¾Œã®è‡ªåˆ†ã®ãŸã‚ã«READMEã‚„ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ®‹ã™ã€‚", mindset:"èª°ã‚‚è¦‹ã¦ã„ãªã„æ™‚ã®è¦å¾‹ã«ã€ãƒ—ãƒ­ã¨ã—ã¦ã®å¼·ã•ãŒå‡ºã¾ã™ã€‚" },
          veteran:{ icon:"ğŸ’»", title:"ã‚½ãƒ­ãƒ¯ãƒ¼ã‚¯", advice:"è‡ªå‹•åŒ–ã™ã‚‹", bad:"æ¯å›åŒã˜æ‰‹ä½œæ¥­ã‚’ç¹°ã‚Šè¿”ã™ã€‚", good:"ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦è‡ªå‹•åŒ–ã—ã€è‡ªåˆ†ä»¥å¤–ã®èª°ã§ã‚‚ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚", mindset:"ã€Œè‡ªåˆ†ãŒã‚„ã‚‰ãªãã¦ã„ã„çŠ¶æ…‹ã€ã‚’ä½œã‚‹ã“ã¨ãŒã€æ¬¡ã®ä¾¡å€¤ã‚’ç”Ÿã‚€æ™‚é–“ã‚’å‰µã‚Šã¾ã™ã€‚" }
        }
      };

      return coworkerKeys
        .map(k => db[k] ? db[k][expVal] : null)
        .filter(Boolean);
    }

    function getFocusBlock(expVal, roleVal, focusVal) {
      const isJunior = (expVal === "junior" || expVal === "middle");
      const isManager = (roleVal === "manager");

      const data = {
        people: {
          name:"é–¢ã‚ã‚Šæ–¹ã«é‡å¿ƒãŒã‚ã‚‹",
          tagline:"ç›¸è«‡ãƒ»èª¿æ•´ãƒ»è‚²æˆã‚’æ”¯ãˆã‚‹å‹•ããŒå¾—æ„ã«ãªã‚Šã‚„ã™ã„",
          strengths:"å®‰å¿ƒã—ã¦ç›¸è«‡ã§ãã‚‹ç©ºæ°—ã‚’ä½œã‚Šã€å‘¨å›²ã®åŠ›ã‚’å¼•ãå‡ºã›ã‚‹ã“ã¨ãŒå¼·ã¿ã«ãªã‚Šã‚„ã™ã„ã§ã™ã€‚",
          juniorChecklist:[
            { title:"å°ã•ãªå¤‰åŒ–ã«æ°—ã¥ã", desc:"ã€Œå…ƒæ°—ãŒãªã„ã€ã€Œè©°ã¾ã£ã¦ã„ãã†ã€ãªã©ã€å°ã•ãªã‚µã‚¤ãƒ³ã‚’è¦‹é€ƒã•ãªã„ã€‚" },
            { title:"æ„Ÿè¬ã‚’è¨€è‘‰ã«ã™ã‚‹", desc:"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„é›‘å‹™ã‚’ã—ã¦ãã‚ŒãŸäººã«ã€Œã‚ã‚ŠãŒã¨ã†ã€ã‚’çŸ­ãä¼ãˆã‚‹ã€‚" },
            { title:"ç´„æŸã‚’å®ˆã‚‹", desc:"ä¿¡é ¼ã®åœŸå°ã¯å°ã•ãªç´„æŸã€‚ç´æœŸãƒ»è¿”ä¿¡ãƒ»å…±æœ‰ã‚’ä¸å¯§ã«å®ˆã‚‹ã€‚" }
          ],
          seniorChecklist:[
            { title:"å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é¿ã‘ãªã„", desc:"é›°å›²æ°—ã‚’å®ˆã‚Šã¤ã¤ã‚‚ã€æˆé•·ã«å¿…è¦ãªæŒ‡æ‘˜ã¯ä¸å¯§ã«ä¼ãˆã‚‹ã€‚" },
            { title:"ç§°è³›ã‚’ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚ˆãè¨€è‘‰ã«ã™ã‚‹", desc:"å°ã•ãªå‰é€²ã‚„åŠ©ã‘åˆã„ã‚’è¦‹ã¤ã‘ãŸã‚‰ã€ãã®å ´ã§çŸ­ãè¨€èªåŒ–ã™ã‚‹ã€‚ï¼ˆä¾‹ï¼šã€ŒåŠ©ã‹ã£ãŸã€ã€Œåˆ¤æ–­ã‚ˆã‹ã£ãŸã€ï¼‰" },
            { title:"äº‹å®Ÿã¨æ„Ÿæƒ…ã‚’åˆ†ã‘ã‚‹", desc:"ãƒˆãƒ©ãƒ–ãƒ«æ™‚ã¯èª°ãŒæ‚ªã„ã‹ã‚ˆã‚Šã€ä½•ãŒèµ·ããŸã‹ãƒ»æ¬¡ã«ä½•ã‚’ã™ã‚‹ã‹ã«ç„¦ç‚¹ã‚’å½“ã¦ã‚‹ã€‚" },
            { title:"æŠ€è¡“ã®å‹˜æ‰€ã¯æŠ¼ã•ãˆã‚‹", desc:"æ›¸ã‹ãªãã¦ã‚‚ã€è¦‹ç©ã‚Šã‚„é›£æ‰€ãŒåˆ†ã‹ã‚‹ç¨‹åº¦ã®ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã‚’ç¶šã‘ã‚‹ã€‚" }
          ],
          managerExtra: isManager ? { title:"å°ã•ãªå¤‰åŒ–ã«æ°—ã¥ãã‚¢ãƒ³ãƒ†ãƒŠã‚’å¼µã‚‹ï¼ˆå…¨ä½“ã‚’è¦‹ã‚‹å´å‘ã‘ï¼‰", desc:"é€²æ—ã ã‘ã§ãªãã€ç™ºè¨€é‡ãƒ»åå¿œé€Ÿåº¦ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æ¸©åº¦æ„Ÿãªã©ã®å¤‰åŒ–ã‚’è¦³å¯Ÿã™ã‚‹ã€‚æ°—ã¥ã„ãŸã‚‰è©°ã‚ãšã«ç¢ºèªã™ã‚‹ã€‚", example:"ä¾‹ï¼šã€Œæœ€è¿‘å¿™ã—ãã†ã ã‘ã©ã€è©°ã¾ã£ã¦ã‚‹ã¨ã“ã‚ã‚ã‚‹ï¼Ÿã€" } : null,
          theme: { accent:"#0d9488", soft:"#ccfbf1" }
        },
        tech: {
          name:"æŠ€è¡“ã«é‡å¿ƒãŒã‚ã‚‹",
          tagline:"å“è³ªã‚„å®Ÿè£…åˆ¤æ–­ã‚’æ”¯ãˆã‚‹å‹•ããŒå¾—æ„ã«ãªã‚Šã‚„ã™ã„",
          strengths:"æŠ€è¡“çš„ãªè«–ç‚¹ã‚’æ•´ç†ã—ã€å“è³ªãƒ»ä¿å®ˆæ€§ã®åˆ¤æ–­ã‚’æ”¯ãˆã‚‰ã‚Œã‚‹ã“ã¨ãŒå¼·ã¿ã«ãªã‚Šã‚„ã™ã„ã§ã™ã€‚",
          juniorChecklist:[
            { title:"åŸºç¤ã‚’å›ºã‚ã‚‹", desc:"è¨€èªä»•æ§˜ã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä»•çµ„ã¿ã‚’ç†è§£ã—ã€ã€Œãªãœå‹•ãã‹ã€ã‚’èª¬æ˜ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚" },
            { title:"å¯èª­æ€§ã‚’æ„è­˜ã™ã‚‹", desc:"å‹•ã‘ã°OKã§ã¯ãªãã€ä»–äººãŒèª­ã‚“ã§è¿·ã‚ãªã„ã‚³ãƒ¼ãƒ‰ã‚’ç›®æŒ‡ã™ã€‚" },
            { title:"å¼•ãå‡ºã—ã‚’å¢—ã‚„ã™", desc:"ä¸€ã¤ã®ã‚„ã‚Šæ–¹ã«å›ºåŸ·ã›ãšã€è¤‡æ•°ã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’çŸ¥ã£ã¦ä½¿ã„åˆ†ã‘ã‚‹ã€‚" }
          ],
          seniorChecklist:[
            { title:"æ–¹é‡ã ã‘æ¡ã£ã¦ä»»ã›ã‚‹", desc:"è‡ªåˆ†ãŒæ›¸ã‘ã°æ—©ã„å ´é¢ã»ã©ã€æ–¹å‘ã ã‘ç¤ºã—å®Ÿè£…ã¯ä»»ã›ã‚‹ã€‚" },
            { title:"åˆ¤æ–­ç†ç”±ã‚’æ®‹ã™", desc:"æŠ€è¡“é¸å®šã®Pros/Consã‚’çŸ­ãæ®‹ã—ã€ãƒãƒ¼ãƒ ã®è³‡ç”£ã«ã™ã‚‹ã€‚" },
            { title:"ãƒ•ã‚§ãƒ¼ã‚ºã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’æ‰±ã†", desc:"ç¾ã—ã•ã¨é€Ÿåº¦ã®ãƒãƒ©ãƒ³ã‚¹ã‚’ã€çŠ¶æ³ã«åˆã‚ã›ã¦åˆ¤æ–­ã™ã‚‹ã€‚" }
          ],
          managerExtra: null,
          theme: { accent:"#0284c7", soft:"#e0f2fe" }
        },
        biz: {
          name:"å…¨ä½“ã«é‡å¿ƒãŒã‚ã‚‹",
          tagline:"å„ªå…ˆé †ä½ã‚„æœŸå¾…å€¤ã‚’æƒãˆã‚‹å‹•ããŒå¾—æ„ã«ãªã‚Šã‚„ã™ã„",
          strengths:"ç›®çš„ãƒ»ä¾¡å€¤ãƒ»æœŸé™ãƒ»ã‚³ã‚¹ãƒˆã®ãƒãƒ©ãƒ³ã‚¹ã‚’è¦‹ã¦ã€å„ªå…ˆé †ä½ã‚„æœŸå¾…å€¤ã‚’æ•´ãˆã‚‹ã“ã¨ãŒå¼·ã¿ã«ãªã‚Šã‚„ã™ã„ã§ã™ã€‚",
          juniorChecklist:[
            { title:"èª°ã®èª²é¡Œã‹ã‚’æ„è­˜ã™ã‚‹", desc:"ä½œã£ã¦ã„ã‚‹æ©Ÿèƒ½ãŒèª°ã®ä½•ã‚’æ¥½ã«ã™ã‚‹ã®ã‹ã‚’è¨€è‘‰ã«ã™ã‚‹ã€‚" },
            { title:"æ•°å­—ã‚„æŒ‡æ¨™ã«è§¦ã‚Œã‚‹", desc:"å¯èƒ½ãªã‚‰KPIã‚„é‹ç”¨æŒ‡æ¨™ã«è§¦ã‚Œã€æ„æ€æ±ºå®šã®ææ–™ã«æ…£ã‚Œã‚‹ã€‚" },
            { title:"æ¥­å‹™ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å­¦ã¶", desc:"æŠ€è¡“ã ã‘ã§ãªãã€æ¥­å‹™çŸ¥è­˜ã‚’å…¥ã‚Œã‚‹ã¨åˆ¤æ–­ãŒé€Ÿããªã‚‹ã€‚" }
          ],
          seniorChecklist:[
            { title:"è¨€ã„æ›ãˆã‚‹åŠ›ã‚’ç£¨ã", desc:"æŠ€è¡“ã®è©±ã‚’ã€ä¾¡å€¤ãƒ»ã‚³ã‚¹ãƒˆãƒ»ãƒªã‚¹ã‚¯ã®è¨€è‘‰ã«ç¿»è¨³ã—ã¦ä¼ãˆã‚‹ã€‚" },
            { title:"å¤‰åŒ–ã‚’å‰æã«ã™ã‚‹", desc:"è¨ˆç”»å¤‰æ›´ã‚’ãƒ–ãƒ¬ã§ã¯ãªãé©å¿œã¨ã—ã¦æ‰±ã„ã€ãƒãƒ¼ãƒ ã®æ··ä¹±ã‚’æ¸›ã‚‰ã™ã€‚" },
            { title:"ç¾å ´ã®é˜²æ³¢å ¤ã«ãªã‚‹", desc:"ç„¡ç†ãªè¦æ±‚ã«ã¯ãƒ‡ãƒ¼ã‚¿ã‚„æ ¹æ‹ ã‚’æ·»ãˆã¦äº¤æ¸‰ã—ã€ç–²å¼Šã‚’é˜²ãã€‚" }
          ],
          managerExtra: null,
          theme: { accent:"#7c3aed", soft:"#f3e8ff" }
        }
      };

      const d = data[focusVal];
      if (!d) return null;

      const checklist = isJunior ? d.juniorChecklist : d.seniorChecklist;
      return { ...d, checklist };
    }

    function getShareHints(expVal, roleVal, shareStyle) {
      const isManagerSide = (roleVal === "lead" || roleVal === "manager");

      const help = { head:"å›°ã£ãŸæ™‚ã®ç›¸è«‡å…ˆï¼ˆè‡ªåˆ†ã‚’å®ˆã‚‹ï¼‰", textParts:[
        {t:"text", v:"ã‚‚ã—å…±æœ‰ãŒå—ã‘æ­¢ã‚ã‚‰ã‚Œãªã„ï¼ˆæ”¾ç½®ï¼‰ï¼é€†ã«ç¢ºèªãŒç´°ã‹ã™ãã¦æ”¯éšœãŒå‡ºã‚‹å ´åˆã¯ã€ä¸€äººã§æŠ±ãˆè¾¼ã¾ãš"},
        {t:"strong", v:"æ‹…å½“å–¶æ¥­ã‚„ç¤¾å†…ã®ç›¸è«‡å…ˆ", className:""},
        {t:"text", v:"ã«è©±ã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã¯ã€Œé€ƒã’ã€ã§ã¯ãªãã€Œç’°å¢ƒèª¿æ•´ã€ã§ã™ã€‚"}
      ]};

      if (!isManagerSide) {
        const tips = [];
        if (shareStyle === "detail") {
          tips.push({ head:"å…±æœ‰ã¯å¼·ã¿ã€‚æ¬¡ã¯ã€Œç›¸æ‰‹ã®ã‚³ã‚¹ãƒˆã€ã‚‚æ„è­˜", textParts:[{t:"text", v:"ã“ã¾ã‚ãªå…±æœ‰ã¯ä¿¡é ¼æ§‹ç¯‰ã®åŸºæœ¬ã§ã™ã€‚ã•ã‚‰ã«ã€Œçµè«–ã‹ã‚‰ã€ã€Œåˆ¤æ–­ã—ã¦ã»ã—ã„ç‚¹ã ã‘ã€ãªã©ã€ç›¸æ‰‹ã®æ™‚é–“ã‚’å¥ªã‚ãªã„å½¢ã«æ•´ãˆã‚‹ã¨ã€ã‚ˆã‚Šå¼·ããªã‚Šã¾ã™ã€‚"}]});
          tips.push({ head:"è‡ªå¾‹ã¸ï¼šæ„è¦‹ã‚’ã‚»ãƒƒãƒˆã«ã™ã‚‹", textParts:[{t:"text", v:"ã€Œã©ã†ã™ã‚Œã°ã„ã„ã§ã™ã‹ï¼Ÿã€ã ã‘ã§ãªãã€ã€Œç§ã¯ã“ã†æ€ã„ã¾ã™ãŒã©ã†ã§ã™ã‹ï¼Ÿã€ã¨è‡ªåˆ†ã®æ¡ˆã‚’æ·»ãˆã‚‹ã¨ã€ç›¸è«‡ã®è³ªãŒä¸ŠãŒã‚Šã¾ã™ã€‚"}]});
        } else if (shareStyle === "outcome") {
          tips.push({ head:"æ‰‹æˆ»ã‚Šã‚’é¿ã‘ã‚‹ï¼š20%ã®æ®µéšã§ä¸€åº¦åˆã‚ã›ã‚‹", textParts:[{t:"text", v:"ã¾ã¨ã‚ã¦å…±æœ‰ã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã¯é›†ä¸­ã—ã‚„ã™ã„åé¢ã€æ–¹å‘ãŒã‚ºãƒ¬ãŸæ™‚ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ãŒå¤§ãã„ã§ã™ã€‚å®Œæˆåº¦20%ã§ä¸€åº¦ã€Œæ–¹å‘åˆã£ã¦ã¾ã™ã‹ï¼Ÿã€ã‚’æŒŸã‚€ã¨å®‰å…¨ã§ã™ã€‚"}]});
          tips.push({ head:"æ²ˆé»™ã‚’æ¸›ã‚‰ã™ï¼šçŸ­ã„é€²æ—å…±æœ‰", textParts:[{t:"text", v:"å…±æœ‰ãŒãªã„é–“ã€å‘¨å›²ã¯ä¸å®‰ã«ãªã‚Šã¾ã™ã€‚ã€Œä½œæ¥­ä¸­ã§ã™ã€ã€Œã“ã“ã¾ã§OKã§ã™ã€ãªã©çŸ­ã„ä¸€è¨€ã ã‘ã§ã‚‚å®‰å¿ƒæ„ŸãŒå¤‰ã‚ã‚Šã¾ã™ã€‚"}]});
        } else if (shareStyle === "adaptive") {
          tips.push({ head:"ç›¸æ‰‹ã«åˆã‚ã›ã‚‰ã‚Œã‚‹ã®ã¯é«˜åº¦ãªå¼·ã¿", textParts:[{t:"text", v:"ç›¸æ‰‹ã®ä¸å®‰ï¼ˆå“è³ªï¼Ÿç´æœŸï¼Ÿï¼‰ã‚’è¦³å¯Ÿã—ã€å…ˆå›ã‚Šã—ã¦æƒ…å ±ã‚’å‡ºã›ã‚‹ã®ã¯å¼·ã„ã§ã™ã€‚å°†æ¥ã€å½¹å‰²ãŒåºƒãŒã£ãŸæ™‚ã«ã‚‚ãã®ã¾ã¾åŠ¹ãã¾ã™ã€‚"}]});
          tips.push({ head:"åˆã‚ã›ã™ãæ³¨æ„ï¼šäº‹å®Ÿã¯æœ€çŸ­ã§", textParts:[{t:"text", v:"é¡”è‰²ã‚’ä¼ºã„ã™ãã¦æ‚ªã„å ±å‘ŠãŒé…ã‚Œã‚‹ã¨é€†åŠ¹æœã§ã™ã€‚äº‹å®Ÿï¼ˆFactï¼‰ã¯æ·¡ã€…ã¨æœ€çŸ­ã§å…±æœ‰ã™ã‚‹ã®ãŒå®‰å…¨ã§ã™ã€‚"}]});
        }
        tips.push(help);

        return { title:"å…±æœ‰ã®ã‚¯ã‚»ã‹ã‚‰è¦‹ãˆã‚‹ã€å›°ã‚Šã”ã¨ã®äºˆé˜²", subtitle:"ã€œè‡ªåˆ†ãŒå‹•ãã‚„ã™ããªã‚‹å·¥å¤«ã€œ", tips };
      }

      const tips = [];
      if (shareStyle === "detail") {
        tips.push({ head:"ç¢ºèªãŒç´°ã‹ããªã‚Šã™ãã¦ç–²ã‚Œã‚„ã™ã„", textParts:[{t:"text", v:"è‡ªåˆ†ãŒç´°ã‹ãå…±æœ‰ã™ã‚‹ã®ãŒå¾—æ„ã ã¨ã€å‘¨å›²ã«ã‚‚åŒã˜ç²’åº¦ã‚’æ±‚ã‚ã‚„ã™ããªã‚Šã¾ã™ã€‚ã‚´ãƒ¼ãƒ«ã ã‘æ¡ã£ã¦ã€ãƒ—ãƒ­ã‚»ã‚¹ã¯ä»»ã›ã‚‹ã€Œæˆ‘æ…¢ã€ã‚’æ··ãœã‚‹ã¨å›ã‚Šã‚„ã™ã„ã§ã™ã€‚"}]});
      } else if (shareStyle === "outcome") {
        tips.push({ head:"ä»»ã›ã‚‹å‰²åˆãŒå¤šããªã‚Šã™ãã¦å­¤ç«‹ã—ã‚„ã™ã„", textParts:[{t:"text", v:"ä»»ã›ã‚‹ã®ãŒå¾—æ„ãªåˆ†ã€å‘¨å›²ãŒæ”¾ç½®ã¨æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚å®šæœŸçš„ãªçŸ­ã„ç¢ºèªã‚„ã€ã“ã¡ã‚‰ã‹ã‚‰ã€Œå›°ã£ã¦ãªã„ï¼Ÿã€ã¨å£°ã‚’ã‹ã‘ã‚‹è¨­è¨ˆãŒåŠ¹ãã¾ã™ã€‚"}]});
      } else if (shareStyle === "adaptive") {
        tips.push({ head:"æš—é»™å‰æã«ãªã‚Šã‚„ã™ã„ï¼ˆãƒ«ãƒ¼ãƒ«åŒ–ãŒåŠ¹ãï¼‰", textParts:[{t:"text", v:"ç©ºæ°—ã‚’èª­ã‚€ã®ãŒå¾—æ„ã§ã‚‚ã€å‘¨å›²ã«åŒã˜ãƒ¬ãƒ™ãƒ«ã‚’æ±‚ã‚ã‚‹ã¨ã™ã‚Œé•ã„ãŒèµ·ãã¾ã™ã€‚ã€Œã„ã¤ãƒ»ä½•ã‚’ãƒ»ã©ã†å…±æœ‰ã—ã¦ã»ã—ã„ã‹ã€ã‚’çŸ­ãè¨€èªåŒ–ã—ã¦ãŠãã¨å®‰å¿ƒã§ã™ã€‚"}]});
      }

      tips.push({ head:"å®‰å¿ƒã—ã¦å…±æœ‰ã§ãã‚‹ç©ºæ°—ã‚’å…ˆã«ä½œã‚‹", textParts:[{t:"text", v:"ã©ã‚“ãªå…±æœ‰ã§ã‚‚ã€ã¾ãšã¯ã€Œå…±æœ‰ã—ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€ã¨å—ã‘æ­¢ã‚ã‚‹ã€‚å…±æœ‰ã®ãƒãƒ¼ãƒ‰ãƒ«ã‚’ä¸‹ã’ã‚‹ã“ã¨ãŒã€æœ€åˆã®ãƒªã‚¹ã‚¯å¯¾ç­–ã§ã™ã€‚"}]});
      tips.push({ head:"ã‚¹ã‚¿ã‚¤ãƒ«ã®é•ã„ã‚’å‰æã«ã™ã‚‹", textParts:[{t:"text", v:"è‡ªåˆ†ã¨é•ã†å…±æœ‰ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã€Œãƒ€ãƒ¡ã€ã¨æ±ºã‚ã¤ã‘ãªã„ã€‚é »åº¦ã‚„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å€‹åˆ¥ã«èª¿æ•´ã™ã‚‹ã®ãŒã€å…¨ä½“ã‚’è¦‹ã‚‹å´ã®ä»•äº‹ã§ã™ã€‚"}]});

      return { title:"é€²ã‚æ–¹ã®ã‚¯ã‚»ã¨ã€èµ·ã“ã‚Šã‚„ã™ã„å›°ã‚Šã”ã¨", subtitle:"ã€œè‡ªåˆ†ã®å‚¾å‘ã‚’çŸ¥ã‚Šã€å‘¨å›²ãŒå‹•ãã‚„ã™ã„å½¢ã«ã™ã‚‹ã€œ", tips };
    }

    // =========================
    // Rendering
    // =========================
    function renderStageBlock(stageKey) {
      const data = STAGES[stageKey];
      const root = el("div", { className:"block" });

      const head = el("div", { className:"block-head" }, [
        el("div", { className:"kicker", text:"PART 1ï¼šã„ã¾ã®ç«‹å ´ã§èµ·ã“ã‚Šã‚„ã™ã„ã“ã¨" }),
        el("h3", { className:"block-title" }, [
          el("span", { text: data.icon, attrs:{ "aria-hidden":"true" }, className:"" }),
          el("span", { text: data.title })
        ]),
        el("p", { className:"block-sub", text: data.subtitle })
      ]);
      head.style.borderLeft = `8px solid ${data.theme.border}`;
      head.style.background = data.theme.bg;

      const body = el("div", { className:"block-body" }, [
        el("p", { text:"ã—ã°ã‚‰ãæ„è­˜ã—ã¦ãŠãã¨æ¥½ã«ãªã‚‹ãƒã‚¤ãƒ³ãƒˆ", className:"kicker" })
      ]);

      const list = el("div", { className:"list" });
      data.content.forEach((item, idx) => {
        const card = el("div", { className:"item" }, [
          el("h4", { text: item.head }),
          el("div", { className:"row" }, [
            el("div", { className:"panel" }, [
              el("span", { className:"label", text:"ã™ã‚Œé•ã„ãŒèµ·ãã‚„ã™ã„ä¾‹" }),
              el("div", { className:"text", text: item.bad })
            ]),
            el("div", { className:"panel good" }, [
              el("span", { className:"label", text:"è©¦ã›ã‚‹å‹•ã" }),
              el("div", { className:"text", text: item.action })
            ])
          ])
        ]);
        list.appendChild(card);
      });

      body.appendChild(list);
      root.appendChild(head);
      root.appendChild(body);
      return root;
    }

    function renderRoleBlock(roleHints) {
      const root = el("div", { className:"card pad-lg" });
      root.style.background = "#fffbeb"; /* amber-50 */
      root.style.borderColor = "#fcd34d"; /* amber-300 */

      root.appendChild(el("div", { className:"kicker", text:"PART 2ï¼šä»»ã•ã‚Œæ–¹ã®å¤‰åŒ–ã«åˆã‚ã›ãŸã‚³ãƒ„" }));
      root.appendChild(el("h3", { className:"block-title", text: roleHints.title }));
      roleHints.msg.forEach(line => root.appendChild(el("p", { text: line, className:"block-sub" })));

      const box = el("div", { className:"card pad", }, []);
      box.style.marginTop = "14px";
      box.style.borderColor = "rgba(217,119,6,.2)";
      box.style.boxShadow = "none";
      box.style.background = "rgba(255,255,255,0.6)";

      box.appendChild(el("div", { className:"kicker", text:"ğŸ”‘ å°ã•ãåŠ¹ããƒã‚¤ãƒ³ãƒˆ" }));
      const ul = el("ul", { attrs:{}, className:"" });
      ul.style.margin = "10px 0 0";
      ul.style.paddingLeft = "18px";
      roleHints.tips.forEach(t => {
        const li = el("li", { }, [
          el("span", { text:`${t.icon} ` }),
          el("span", { text: t.text })
        ]);
        li.style.margin = "8px 0";
        li.style.fontWeight = "700";
        li.style.color = "#334155";
        ul.appendChild(li);
      });
      box.appendChild(ul);
      root.appendChild(box);

      return root;
    }

    function renderCommBlock(commList) {
      const wrap = el("div", { className:"card pad-lg" });
      wrap.style.background = "#f0fdf4"; /* green-50 */
      wrap.style.borderColor = "#86efac"; /* green-300 */

      wrap.appendChild(el("div", { className:"kicker", text:"PART 3ï¼šç›¸æ‰‹åˆ¥ãƒ»ä¼ãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ" }));
      wrap.appendChild(el("h3", { className:"block-title", text:"ğŸ’¬ ç›¸æ‰‹åˆ¥ï¼šã™ã‚Œé•ã„ã‚’æ¸›ã‚‰ã™ã‚³ãƒ„" }));

      const grid = el("div", { className:"grid two" });
      commList.forEach(tip => {
        const card = el("div", { className:"card pad" });
        card.style.borderColor = "#bbf7d0"; /* green-200 */
        card.style.boxShadow = "none";

        const top = el("div", {}, [
          el("div", { text: tip.icon, attrs:{ "aria-hidden":"true" } }),
          el("div", {}, [
            el("div", { text: tip.title, className:"opt-title" }),
            el("div", { text:`ğŸ”‘ ${tip.advice}`, className:"opt-desc" })
          ])
        ]);
        top.style.display = "flex";
        top.style.alignItems = "center";
        top.style.gap = "10px";
        top.firstChild.style.fontSize = "22px";

        card.appendChild(top);
        card.appendChild(el("div", { className:"divider" }));

        const bad = el("div", { className:"panel" }, [
          el("span", { className:"label", text:"ã™ã‚Œé•ã„ãŒèµ·ãã‚„ã™ã„ä¾‹" }),
          el("div", { className:"text", text: tip.bad })
        ]);

        const good = el("div", { className:"panel" }, [
          el("span", { className:"label", text:"ã™ã‚Œé•ã„ã‚’æ¸›ã‚‰ã™ä¾‹" }),
          el("div", { className:"text", text: tip.good })
        ]);
        good.style.borderLeftColor = "#22c55e"; /* green-500 */

        const note = el("div", { className:"panel" }, [
          el("span", { className:"label", text:"ğŸ’¡ è£œè¶³" }),
          el("div", { className:"text", text: tip.mindset })
        ]);
        note.style.background = "#f0fdfa";
        note.style.borderLeftColor = "#0d9488"; /* teal-600 */

        card.appendChild(bad);
        card.appendChild(el("div", { attrs:{}, className:"" }, []));
        card.appendChild(good);
        card.appendChild(el("div", { attrs:{}, className:"" }, []));
        card.appendChild(note);

        grid.appendChild(card);
      });

      wrap.appendChild(el("div", { attrs:{}, className:"" }, [grid]));
      return wrap;
    }

    function renderFocusBlock(focus) {
      const root = el("div", { className:"block" });

      const head = el("div", { className:"block-head" }, [
        el("div", { className:"kicker", text:"PART 4ï¼šè‡ªåˆ†ã®â€œé‡å¿ƒâ€ã®å‚¾å‘ï¼ˆã„ã¾æ„è­˜ã—ã‚„ã™ã„è¦–ç‚¹ï¼‰" }),
        el("h3", { className:"block-title", text: focus.name }),
        el("p", { className:"block-sub", text: focus.tagline }),
        el("p", { className:"hint", text:"â€»ã€Œå‘ããƒ»ä¸å‘ãã€ã‚’æ±ºã‚ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä»Šã®è‡ªåˆ†ãŒæ„è­˜ã—ã‚„ã™ã„è¦–ç‚¹ã®ç›®å®‰ã§ã™ã€‚" })
      ]);
      head.style.background = focus.theme.soft;
      head.style.borderLeft = `8px solid ${focus.theme.accent}`;

      const body = el("div", { className:"block-body" }, []);

      const strengths = el("div", { className:"item" }, [
        el("h4", { text:"ğŸ’ª ã„ã¾ã®å¼·ã¿ã«ãªã‚Šã‚„ã™ã„ã¨ã“ã‚" }),
        el("div", { className:"panel" }, [
          el("div", { className:"text", text: focus.strengths })
        ])
      ]);
      strengths.querySelector(".panel").style.borderLeftColor = focus.theme.accent;

      const listWrap = el("div", { className:"item" }, [
        el("h4", { text:"âœ… å°ã•ãè©¦ã›ã‚‹ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ" })
      ]);
      const list = el("div", { className:"list" });
      focus.checklist.forEach(ch => {
        const c = el("div", { className:"panel" }, [
          el("div", { className:"text", text: `${ch.title}ï¼š${ch.desc}` })
        ]);
        c.style.borderLeftColor = focus.theme.accent;
        c.style.background = "#fff";
        list.appendChild(c);
      });
      listWrap.appendChild(list);

      body.appendChild(strengths);
      body.appendChild(listWrap);

      if (focus.managerExtra) {
        const extra = el("div", { className:"item" }, [
          el("h4", { text:`ğŸ‘€ ${focus.managerExtra.title}` }),
          el("div", { className:"panel" }, [ el("div", { className:"text", text: focus.managerExtra.desc }) ]),
          el("div", { className:"panel" }, [ el("div", { className:"text", text: focus.managerExtra.example }) ])
        ]);
        extra.style.background = "#fffbeb";
        extra.style.borderColor = "#fcd34d";
        body.appendChild(extra);
      }

      root.appendChild(head);
      root.appendChild(body);
      return root;
    }

    function renderGrowthBlock() {
      const root = el("div", { className:"card pad-lg" });
      root.style.background = "#f8fafc";
      root.appendChild(el("div", { className:"kicker", text:"PART 4.5ï¼šæ„è­˜ã®ç½®ãæ–¹ã‹ã‚‰åºƒãŒã‚Šã‚„ã™ã„çµŒé¨“" }));
      root.appendChild(el("h3", { className:"block-title", text:"ğŸ§© è¦–é‡ã‚’åºƒã’ã‚‹ãŸã‚ã®å‚è€ƒ" }));

      const p = el("p", { className:"block-sub" });
      p.appendChild(document.createTextNode("ã“ã“ã«æ›¸ã„ã¦ã‚ã‚‹å†…å®¹ã¯ã€ã‚­ãƒ£ãƒªã‚¢ã‚’æ±ºã‚ã‚‹ãŸã‚ã®ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"));
      p.appendChild(el("br"));
      p.appendChild(document.createTextNode("ä»Šã®æ„è­˜ã®ç½®ãæ–¹ãŒã€ç¾å ´ã§ã©ã‚“ãªçµŒé¨“ã«ç¹‹ãŒã‚Šã‚„ã™ã„ã‹ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã™ã‚‹ãŸã‚ã®å‚è€ƒæƒ…å ±ã§ã™ã€‚"));
      p.appendChild(el("br"));
      p.appendChild(el("small", { text:"â€»ã©ã‚Œã‹ä¸€ã¤ã‚’é¸ã¶å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ•ã‚§ãƒ¼ã‚ºã‚„ç¾å ´ã«ã‚ˆã£ã¦ã€åŒæ™‚ã«è¤‡æ•°çµŒé¨“ã™ã‚‹ã“ã¨ã‚‚æ™®é€šã§ã™ã€‚"}));
      p.querySelector("small").style.color = "#64748b";
      p.querySelector("small").style.fontWeight = "700";
      root.appendChild(p);

      const grid = el("div", { className:"grid three" });
      grid.style.gridTemplateColumns = "1fr";
      grid.style.gap = "12px";
      if (window.matchMedia("(min-width: 768px)").matches) grid.style.gridTemplateColumns = "repeat(3, minmax(0,1fr))";

      const items = [
        { icon:"ğŸ› ï¸", title:"æŠ€è¡“ã«æ„è­˜ãŒå‘ã„ã¦ã„ã‚‹å ´åˆ", list:["è¨­è¨ˆã‚„å®Ÿè£…ã®åˆ¤æ–­ã‚’ä»»ã•ã‚Œã‚‹å ´é¢ãŒå¢—ãˆã‚„ã™ã„","æŠ€è¡“é¸å®šã‚„ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«é–¢ã‚ã‚‹æ©Ÿä¼šãŒå¢—ãˆã‚‹","å›°ã£ãŸã¨ãã«ç›¸è«‡ã•ã‚Œã‚„ã™ããªã‚‹"] },
        { icon:"ğŸŒ±", title:"å‘¨å›²ã¨ã®é–¢ã‚ã‚Šã«æ„è­˜ãŒå‘ã„ã¦ã„ã‚‹å ´åˆ", list:["æ–°äººãƒ•ã‚©ãƒ­ãƒ¼ã‚„èª¿æ•´å½¹ã‚’é ¼ã¾ã‚Œã‚‹ã“ã¨ãŒå¢—ãˆã‚„ã™ã„","ãƒãƒ¼ãƒ ã®ç©ºæ°—ã‚„é€²ã‚æ–¹ã‚’æ•´ãˆã‚‹å½¹å‰²ãŒå¢—ãˆã‚‹","ç›¸è«‡ã®ä¸€æ¬¡å—ã‘ã«ãªã‚‹å ´é¢ãŒå‡ºã¦ãã‚‹"] },
        { icon:"ğŸ§­", title:"å…¨ä½“ã®æµã‚Œã«æ„è­˜ãŒå‘ã„ã¦ã„ã‚‹å ´åˆ", list:["å„ªå…ˆé †ä½ã‚„é€²ã‚æ–¹ã®ç›¸è«‡ã‚’å—ã‘ã‚„ã™ããªã‚‹","è¨ˆç”»ã‚„è¦‹ç©ã‚‚ã‚Šã®è©±ã«å‘¼ã°ã‚Œã‚‹ã“ã¨ãŒå¢—ãˆã‚‹","ç¾å ´ã¨å‘¨å›²ã®é–“ã‚’ã¤ãªãå½¹å‰²ãŒå¢—ãˆã‚‹"] }
      ];

      items.forEach(it => {
        const c = el("div", { className:"card pad" });
        c.style.boxShadow = "none";
        const top = el("div", {}, [
          el("div", { text: it.icon, attrs:{ "aria-hidden":"true" } }),
          el("div", { text: it.title, className:"opt-title" })
        ]);
        top.style.display = "flex";
        top.style.alignItems = "center";
        top.style.gap = "10px";
        top.firstChild.style.fontSize = "20px";
        c.appendChild(top);

        const ul = el("ul");
        ul.style.margin = "10px 0 0";
        ul.style.paddingLeft = "18px";
        it.list.forEach(t => {
          const li = el("li", { text: t });
          li.style.margin = "6px 0";
          li.style.fontSize = "13px";
          li.style.fontWeight = "600";
          li.style.color = "#334155";
          ul.appendChild(li);
        });
        c.appendChild(ul);
        grid.appendChild(c);
      });

      root.appendChild(grid);
      return root;
    }

    function renderShareBlock(share) {
      const root = el("div", { className:"card pad-lg" });
      root.style.background = "#ecfdf5"; /* emerald-50 */
      root.style.borderColor = "#6ee7b7"; /* emerald-300 */

      root.appendChild(el("div", { className:"kicker", text:"PART 5ï¼šé€²ã‚æ–¹ã®ã‚¯ã‚»ã¨ã€èµ·ã“ã‚Šã‚„ã™ã„å›°ã‚Šã”ã¨" }));
      root.appendChild(el("h3", { className:"block-title", text:`âš–ï¸ ${share.title}` }));
      root.appendChild(el("p", { className:"block-sub", text: share.subtitle }));

      const list = el("div", { className:"list" });
      share.tips.forEach(t => {
        const item = el("div", { className:"card pad" });
        item.style.boxShadow = "none";
        item.style.borderColor = "#a7f3d0"; /* emerald-200 */
        const h4 = el("div", { className:"opt-title", text: `! ${t.head}` });
        h4.style.fontSize = "14px";
        const p = el("p", { className:"opt-desc" });
        p.style.fontSize = "13px";
        p.style.color = "#334155";
        p.style.fontWeight = "700";
        p.style.margin = "8px 0 0";
        appendRich(p, t.textParts || [{t:"text", v: t.text || ""}]);

        item.appendChild(h4);
        item.appendChild(p);
        list.appendChild(item);
      });

      root.appendChild(el("div", { attrs:{}, className:"" }, [list]));
      return root;
    }

    let currentResult = null;

    function collectSelections() {
      const exp = document.querySelector('input[name="exp_eng"]:checked')?.value || null;
      const role = document.querySelector('input[name="role_scope"]:checked')?.value || null;
      const focus = document.querySelector('input[name="focus_axis"]:checked')?.value || null;
      const share = document.querySelector('input[name="share_style"]:checked')?.value || null;
      const coworkers = Array.from(document.querySelectorAll('input[name="coworker"]:checked')).map(x => x.value);

      return { exp, role, focus, share, coworkers };
    }

    function isComplete(sel) {
      return Boolean(sel.exp && sel.role && sel.focus && sel.share && sel.coworkers.length > 0);
    }

    function updateButtonState() {
      const btn = document.getElementById("build-sheet");
      const err = document.getElementById("error-msg");
      const sel = collectSelections();

      if (isComplete(sel)) {
        btn.disabled = false;
        btn.classList.add("primary");
        err.classList.add("hidden");
      } else {
        btn.disabled = true;
        btn.classList.remove("primary");
      }
    }

    function showSheet() {
      const sel = collectSelections();
      const err = document.getElementById("error-msg");
      if (!isComplete(sel)) {
        err.classList.remove("hidden");
        return;
      }

      const stageBlock = renderStageBlock(sel.exp);
      const roleHints = getRoleHints(sel.exp, sel.role);
      const commList = getCommunicationHints(sel.exp, sel.coworkers);
      const focusBlock = getFocusBlock(sel.exp, sel.role, sel.focus);
      const growthBlock = renderGrowthBlock();
      const shareBlock = renderShareBlock(getShareHints(sel.exp, sel.role, sel.share));

      currentResult = {
        createdAt: new Date(),
        sel,
        roleHints,
        commList,
        focusBlock,
        shareBlockData: getShareHints(sel.exp, sel.role, sel.share)
      };

      const mount = (id, node) => {
        const target = document.getElementById(id);
        clear(target);
        target.appendChild(node);
      };

      mount("block-stage", stageBlock);
      mount("block-role", renderRoleBlock(roleHints));
      mount("block-comm", renderCommBlock(commList));
      if (focusBlock) mount("block-focus", renderFocusBlock(focusBlock));
      mount("block-growth", growthBlock);
      mount("block-share", shareBlock);

      setText("sum-exp", LABELS.exp[sel.exp] || "-");
      setText("sum-role", LABELS.role[sel.role] || "-");
      setText("sum-focus", LABELS.focus[sel.focus] || "-");
      setText("sum-who", sel.coworkers.map(k => LABELS.coworker[k] || k).join(", "));

      document.getElementById("intro-area").classList.add("hidden"); // Hide intro
      document.getElementById("reflection-form").classList.add("hidden");
      document.getElementById("result-area").classList.remove("hidden");

      const reduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      window.scrollTo({ top: 0, behavior: reduced ? "auto" : "smooth" });
    }

    function resetAll() {
      document.getElementById("reflection-form").reset();
      document.getElementById("result-area").classList.add("hidden");
      document.getElementById("intro-area").classList.remove("hidden"); // Show intro
      document.getElementById("reflection-form").classList.remove("hidden");
      document.getElementById("error-msg").classList.add("hidden");
      currentResult = null;

      updateButtonState();
      window.scrollTo({ top: 0, behavior: "auto" });
    }

    function buildPrint() {
      const root = document.getElementById("print-root");
      clear(root);

      const now = currentResult?.createdAt ? currentResult.createdAt : new Date();

      const printHeader = el("div", { className:"print-header-row" });
      printHeader.appendChild(el("img", {
        attrs: { src: "logo@2x.png", alt: "SKYLEAF", onerror:"this.style.display='none'" },
        className: "logo-print"
      }));
      printHeader.appendChild(el("h1", { text:"ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æˆé•·ã‚«ãƒ«ãƒ†ï¼ˆä¿å­˜ç”¨ï¼‰" }));
      root.appendChild(printHeader);

      const guard = el("div", { className:"box avoid-break" });
      guard.appendChild(el("div", { text:"â„¹ï¸ ã“ã®ã‚«ãƒ«ãƒ†ã®ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦", className:"" }));
      guard.firstChild.style.fontWeight = "900";
      guard.firstChild.style.marginBottom = "4px";
      const ul = el("ul");
      ul.style.margin = "6px 0 0";
      ul.style.paddingLeft = "18px";
      ["è©•ä¾¡ãƒ»æŸ»å®šãƒ»é…ç½®åˆ¤æ–­ã®ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã¯ã‚ã‚Šã¾ã›ã‚“","å…±æœ‰ã¯ã€æœ¬äººã®åŒæ„ãŒã‚ã‚‹å ´åˆã®ã¿è¡Œã£ã¦ãã ã•ã„","ã‚ãã¾ã§è‡ªå·±æ•´ç†ã¨ã€å¯¾è©±ã®ãã£ã‹ã‘ä½œã‚Šã®ãŸã‚ã«ã”åˆ©ç”¨ãã ã•ã„"].forEach(t => {
        const li = el("li", { text: t });
        li.style.margin = "4px 0";
        li.style.fontWeight = "900";
        ul.appendChild(li);
      });
      guard.appendChild(ul);
      const note = el("div", { text:"â€»è·ç¨®ãƒ»å½¹å‰²ãƒ»ç¾å ´ã®æ¡ä»¶ã«ã‚ˆã£ã¦ã€Œå½“ã¦ã¯ã¾ã‚‰ãªã„ã€ã®ã¯è‡ªç„¶ã§ã™ã€‚", className:"" });
      note.style.marginTop = "6px";
      note.style.fontSize = "9.5pt";
      note.style.color = "#444";
      guard.appendChild(note);
      root.appendChild(guard);

      const meta = el("div", { className:"meta" });
      const sel = currentResult?.sel || collectSelections();
      const metaText = [
        `ä½œæˆæ—¥: ${now.toLocaleDateString("ja-JP")}`,
        `çµŒé¨“: ${LABELS.exp[sel.exp] || "-"}`,
        `ä»»ã•ã‚Œæ–¹: ${LABELS.role[sel.role] || "-"}`,
        `é–¢ã‚ã‚‹ç›¸æ‰‹: ${(sel.coworkers || []).map(k => LABELS.coworker[k] || k).join(", ") || "-"}`,
        `é‡å¿ƒã®å‚¾å‘: ${LABELS.focus[sel.focus] || "-"}`
      ].join(" / ");
      meta.textContent = metaText;
      root.appendChild(meta);

      const sections = [];

      const stage = STAGES[sel.exp];
      if (stage) {
        const text = [
          `${stage.title}`,
          `${stage.subtitle}`,
          "",
          ...stage.content.flatMap((c, i) => [
            `${i+1}. ${c.head}`,
            `  ã™ã‚Œé•ã„ä¾‹: ${c.bad}`,
            `  è©¦ã›ã‚‹å‹•ã: ${c.action}`,
            ""
          ])
        ].join("\n").trim();
        sections.push({ title:"PART1ï¼ˆã„ã¾ã®ç«‹å ´ï¼‰", text });
      }

      const roleHints = currentResult?.roleHints || getRoleHints(sel.exp, sel.role);
      if (roleHints) {
        const text = [
          `${roleHints.title}`,
          "",
          ...(roleHints.msg || []),
          "",
          "å°ã•ãåŠ¹ããƒã‚¤ãƒ³ãƒˆ:",
          ...(roleHints.tips || []).map(t => `- ${t.icon} ${t.text}`)
        ].join("\n").trim();
        sections.push({ title:"PART2ï¼ˆä»»ã•ã‚Œæ–¹ã®ãƒ’ãƒ³ãƒˆï¼‰", text });
      }

      const commList = currentResult?.commList || getCommunicationHints(sel.exp, sel.coworkers || []);
      if (commList && commList.length) {
        const text = commList.map(t => [
          `${t.title}ï¼ˆğŸ”‘ ${t.advice}ï¼‰`,
          `ã™ã‚Œé•ã„ä¾‹: ${t.bad}`,
          `ã™ã‚Œé•ã„ã‚’æ¸›ã‚‰ã™ä¾‹: ${t.good}`,
          `è£œè¶³: ${t.mindset}`,
          ""
        ].join("\n")).join("\n").trim();
        sections.push({ title:"PART3ï¼ˆç›¸æ‰‹åˆ¥ãƒ»ä¼ãˆæ–¹ï¼‰", text });
      }

      const focusBlock = currentResult?.focusBlock || getFocusBlock(sel.exp, sel.role, sel.focus);
      if (focusBlock) {
        const text = [
          `${focusBlock.name}`,
          `${focusBlock.tagline}`,
          "",
          `å¼·ã¿: ${focusBlock.strengths}`,
          "",
          "ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ:",
          ...(focusBlock.checklist || []).map(c => `- ${c.title}: ${c.desc}`),
        ].join("\n").trim();
        sections.push({ title:"PART4ï¼ˆé‡å¿ƒã®å‚¾å‘ï¼‰", text });
      }

      sections.push({
        title:"PART4.5ï¼ˆè¦–é‡ã‚’åºƒã’ã‚‹å‚è€ƒï¼‰",
        text: [
          "â€»ã©ã‚Œã‹ä¸€ã¤ã‚’é¸ã¶å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ•ã‚§ãƒ¼ã‚ºã‚„ç¾å ´ã«ã‚ˆã£ã¦ã€åŒæ™‚ã«è¤‡æ•°çµŒé¨“ã™ã‚‹ã“ã¨ã‚‚æ™®é€šã§ã™ã€‚",
          "",
          "æŠ€è¡“ã«æ„è­˜ãŒå‘ã„ã¦ã„ã‚‹å ´åˆ: è¨­è¨ˆ/å®Ÿè£…åˆ¤æ–­ã€æŠ€è¡“é¸å®šãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ç›¸è«‡ã•ã‚Œã‚„ã™ã„",
          "å‘¨å›²ã¨ã®é–¢ã‚ã‚Šã«æ„è­˜ãŒå‘ã„ã¦ã„ã‚‹å ´åˆ: æ–°äººãƒ•ã‚©ãƒ­ãƒ¼ã€é€²ã‚æ–¹/ç©ºæ°—ã®èª¿æ•´ã€ç›¸è«‡ã®ä¸€æ¬¡å—ã‘",
          "å…¨ä½“ã®æµã‚Œã«æ„è­˜ãŒå‘ã„ã¦ã„ã‚‹å ´åˆ: å„ªå…ˆé †ä½/é€²ã‚æ–¹ã®ç›¸è«‡ã€è¨ˆç”»ãƒ»è¦‹ç©ã‚‚ã‚Šã€æ©‹æ¸¡ã—"
        ].join("\n")
      });

      const shareData = currentResult?.shareBlockData || getShareHints(sel.exp, sel.role, sel.share);
      if (shareData) {
        const tipText = (shareData.tips || []).map(t => {
          const parts = t.textParts ? t.textParts.map(p => p.v || "").join("") : (t.text || "");
          return `- ${t.head}\n  ${parts}`;
        }).join("\n\n");
        sections.push({ title:"PART5ï¼ˆå…±æœ‰ã®ã‚¯ã‚»ã®å·¥å¤«ï¼‰", text: `${shareData.title}\n${shareData.subtitle}\n\n${tipText}`.trim() });
      }

      for (const s of sections) {
        root.appendChild(el("h2", { text: s.title }));
        const box = el("div", { className:"box avoid-break" });
        box.style.whiteSpace = "pre-wrap";
        box.textContent = s.text;
        root.appendChild(box);
      }

      const handwriting = el("div", { className:"handwriting-area avoid-break" });
      handwriting.appendChild(el("div", { className:"handwriting-label", text:"æ¬¡ã«è©¦ã™1ã¤ï¼š" }));
      root.appendChild(handwriting);
    }

    function preparePrint() {
      if (!currentResult) return;

      const root = document.getElementById("print-root");
      // Don't remove 'hidden' class here to keep it hidden on screen via CSS
      // Instead, we rely on @media print to show it
      root.classList.remove("hidden"); 
      root.removeAttribute("aria-hidden");

      buildPrint();
      
      // Delay print slightly to ensure DOM update
      setTimeout(() => {
        window.print();
        // Force cleanup after print dialog closes (for most browsers)
        root.classList.add("hidden");
      }, 100);
    }

    // Backup cleanup event
    window.addEventListener("afterprint", () => {
      try{
        const root = document.getElementById("print-root");
        if(root) root.classList.add("hidden");
      } catch(_e){}
    });

    // =========================
    // Boot
    // =========================
    document.addEventListener("DOMContentLoaded", () => {
      setText("app-version", APP_VERSION);

      // Bind input changes (no inline handlers)
      document.getElementById("reflection-form").addEventListener("change", updateButtonState);

      // Buttons
      document.getElementById("build-sheet").addEventListener("click", showSheet);
      document.getElementById("reset-btn").addEventListener("click", resetAll);
      document.getElementById("print-btn").addEventListener("click", preparePrint);

      // initial
      updateButtonState();
    });
  </script>
</body>
</html>