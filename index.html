<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æˆé•·ã‚«ãƒ«ãƒ†ï¼ˆv10: ã‚¹ãƒãƒ›æœ€é©åŒ–ç‰ˆï¼‰</title>
  <meta name="description" content="è‡ªåˆ†ã¨å‘¨ã‚ŠãŒåƒãã‚„ã™ã„ç’°å¢ƒã‚’ã¤ãã‚‹ãŸã‚ã«ã€èªè­˜ã‚’ã™ã‚Šåˆã‚ã›ã‚‹ãŸã‚ã®ã‚«ãƒ«ãƒ†ã§ã™ã€‚">

  <!--
    Security posture (single-file / offline-first)
    - å¤–éƒ¨CDN/å¤–éƒ¨ãƒ•ã‚©ãƒ³ãƒˆ: ä¾å­˜ãªã—ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§å‹•ä½œï¼‰
    - DOMçµ„ã¿ç«‹ã¦: innerHTML ã‚’åŸå‰‡ä½¿ã‚ãšã€createElement + textContent ã«çµ±ä¸€
    - CSP: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¦æ­¢ï¼ˆconnect-src 'none'ï¼‰ã—ã€å¤–éƒ¨èª­ã¿è¾¼ã¿ã‚’æŠ‘æ­¢
      â€»å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã®ãŸã‚ style/script ã¯ 'unsafe-inline' ã‚’è¨±å¯ï¼ˆå¿…è¦æœ€å°é™ï¼‰
  -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'none'; base-uri 'none'; form-action 'none'; frame-ancestors 'none';
                 img-src 'self' data:; font-src 'self' data:;
                 style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline';
                 connect-src 'none'; media-src 'none'; object-src 'none'">

  <style>
    :root{
      --bg:#f0f9ff;          /* sky-50 */
      --card:#ffffff;
      --text:#0f172a;        /* slate-900 */
      --muted:#64748b;       /* slate-500 */
      --border:#cbd5e1;      /* slate-300 */
      --shadow: 0 1px 3px rgba(15,23,42,.08);
      --shadow-lg: 0 10px 25px rgba(15,23,42,.1);

      /* Main Brand Colors: Blue & Teal/Emerald */
      --primary:#0284c7;     /* sky-600 */
      --primary-dark:#0369a1;/* sky-700 */
      --primary-light:#e0f2fe; /* sky-100 */

      --accent:#0d9488;      /* teal-600 */
      --accent-light:#ccfbf1; /* teal-100 */

      --rose:#e11d48;        /* Error only */
      --amber:#d97706;       /* Warning */
      
      --orange-light: #fff7ed;
      --orange-border: #fdba74;
      --orange-text: #c2410c;
    }

    /* Base */
    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, Arial, sans-serif;
      line-height:1.6;
      padding-bottom: 80px;
    }
    a{ color:inherit; }
    .sr-only{
      position:absolute !important;
      width:1px;height:1px;
      padding:0;margin:-1px;
      overflow:hidden;clip:rect(0,0,0,0);
      white-space:nowrap;border:0;
    }
    .container{
      max-width: 1024px;
      margin: 0 auto;
      padding: 0 16px;
    }
    .container-narrow{
      max-width: 768px;
      margin: 0 auto;
      padding: 0 16px;
    }

    /* Header */
    header{
      position: sticky;
      top: 0;
      z-index: 10;
      background: #eff6ff;
      border-bottom: 1px solid #bfdbfe;
      box-shadow: var(--shadow);
      width: 100%;
    }
    .header-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:12px 24px;
    }
    .header-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .logo-img {
      height: 40px;
      width: auto;
      display: block;
    }
    .title-area {
      cursor: pointer;
      user-select: none;
    }
    .title{
      display:flex;
      align-items:center;
      gap:10px;
      margin:0;
      font-size: 20px;
      font-weight: 800;
      letter-spacing:.2px;
      color: #1e3a8a;
    }
    .title:hover {
      opacity: 0.8;
    }
    .subtitle{
      margin:2px 0 0;
      font-size: 12px;
      color: #475569;
      font-weight: 700;
    }
    .version{
      font-size:12px;
      color:#94a3b8;
      font-family: monospace;
      white-space:nowrap;
    }

    /* Mobile Header Adjustment */
    @media (max-width: 640px) {
      .header-left {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }
      .logo-img {
        height: 32px;
      }
      .title {
        font-size: 18px;
      }
      .header-row {
        padding: 10px 16px;
      }
    }

    /* Layout sections */
    main{ padding: 28px 0 48px; }
    .stack-xxl{ display:flex; flex-direction:column; gap:48px; }

    /* Cards */
    .card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      box-shadow: var(--shadow);
    }
    .card.pad{ padding: 20px; }
    .card.pad-lg{ padding: 24px; }
    .card-title{
      font-size: 18px;
      font-weight: 800;
      margin:0;
      display:flex;
      align-items:center;
      gap:10px;
      color: var(--text);
    }
    .card-sub{
      margin:6px 0 0;
      color: var(--muted);
      font-size: 14px;
      font-weight: 600;
    }
    .divider{ height:1px; background: #e2e8f0; margin: 16px 0; }

    /* Intro & Guidelines */
    .intro-block {
      background: linear-gradient(to bottom right, #ffffff, #f0f9ff);
      border-color: #bae6fd;
    }
    .intro-block h2 {
      font-size: 18px;
      font-weight: 800;
      margin: 0 0 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      color: #0369a1;
    }
    .intro-block p {
      margin: 0 0 16px;
      color: #334155;
      font-weight: 700;
      line-height: 1.7;
    }
    .positive-msg {
      background: rgba(255,255,255,0.6);
      border-left: 4px solid var(--accent);
      padding: 12px 16px;
      margin: 12px 0;
      border-radius: 4px;
      color: #0f766e;
      font-weight: 700;
    }
    .safety-note {
      margin-top: 16px;
      padding-top: 12px;
      border-top: 1px dashed #cbd5e1;
      font-size: 12px;
      color: #64748b;
      font-weight: 600;
    }

    /* Fieldsets */
    fieldset{ border:0; margin:0; padding:0; }
    legend{
      font-weight: 900;
      color:#334155;
      margin-bottom: 12px;
      font-size: 15px;
    }
    .req{ color: var(--primary); font-size: 12px; font-weight: 800; margin-left: 4px; }
    .grid{ display:grid; gap: 12px; }
    .grid.two{ grid-template-columns: 1fr; }
    .grid.three{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    @media (min-width: 768px){
      .grid.two{ grid-template-columns: repeat(2, minmax(0,1fr)); }
      .grid.three{ grid-template-columns: repeat(3, minmax(0,1fr)); }
    }
    .option{ display:block; cursor:pointer; }
    .option-card{
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 14px;
      background: #fff;
      transition: all .2s ease;
      height: 100%;
      position: relative;
    }
    .option-card:hover{
      transform: translateY(-2px);
      border-color: var(--primary);
      box-shadow: 0 4px 12px rgba(2, 132, 199, 0.15);
    }
    input.opt:focus-visible + .option-card{ outline: 2px solid var(--primary); outline-offset: 2px; }
    input.opt:checked + .option-card{
      border-color: var(--primary); background: var(--primary-light); box-shadow: 0 0 0 2px var(--primary);
    }
    input.opt[type="checkbox"]:checked + .option-card{
      border-color: var(--accent); background: var(--accent-light); box-shadow: 0 0 0 2px var(--accent);
    }
    .opt-title{ font-weight: 800; font-size: 14px; color: #1e293b; }
    .opt-desc{ margin-top: 4px; color: #475569; font-size: 12px; font-weight: 600; line-height: 1.4; }

    /* Conditional Sub-Question Animation */
    .sub-q-area {
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      background: var(--orange-light);
      border-radius: 12px;
      margin-top: 0;
    }
    .sub-q-area.open {
      max-height: 800px; /* è¤‡æ•°é¸æŠã§ä¼¸ã³ã‚‹ã®ã§å°‘ã—ä½™è£•ã‚’ */
      opacity: 1;
      margin-top: 16px;
      padding: 16px;
      border: 1px solid var(--orange-border);
    }

    /* Buttons */
    .actions{ text-align:center; padding: 10px 0; }
    .btn{
      border:0;
      border-radius: 999px;
      padding: 16px 32px;
      font-weight: 800;
      font-size: 18px;
      box-shadow: var(--shadow);
      cursor:pointer;
      transition: all .2s ease;
      letter-spacing: .02em;
    }
    .btn[disabled]{ background:#cbd5e1; color:#64748b; cursor:not-allowed; }
    .btn.primary{ background: var(--primary); color:#fff; }
    .btn.primary:hover{
      background: var(--primary-dark);
      box-shadow: 0 4px 12px rgba(2, 132, 199, 0.3);
      transform: translateY(-1px);
    }
    .error{ margin-top: 10px; color: var(--rose); font-weight: 800; font-size: 13px; }
    .hidden{ display:none !important; }

    /* Result UI */
    .pill{
      display:inline-block; padding: 4px 12px; border-radius: 999px;
      background: var(--primary-light); color: var(--primary-dark);
      font-weight: 800; font-size: 12px; margin-bottom: 12px;
    }
    .result-head{ text-align:center; border-bottom: 1px solid var(--border); padding-bottom: 22px; }
    .result-head h2{ margin: 0 0 6px; font-size: 26px; font-weight: 900; color:#0f172a; }
    .result-head p{ margin:0; color: var(--muted); font-weight: 600; }

    .block{ border-radius: 18px; overflow:hidden; border:1px solid var(--border); box-shadow: var(--shadow); background:#fff; }
    .block-head{ padding: 18px 24px; border-bottom: 1px solid #e2e8f0; }
    .kicker{ font-size: 12px; font-weight: 800; color:#64748b; text-transform: uppercase; letter-spacing: .05em; }
    .block-title{ margin: 6px 0 0; font-size: 20px; font-weight: 900; display:flex; align-items:center; gap:10px; color:#0f172a; }
    .block-sub{ margin: 4px 0 0; color: var(--muted); font-size: 14px; font-weight: 600; }
    .block-body{ padding: 20px 24px 24px; }
    
    .item{ border: 1px solid #e2e8f0; background: #f8fafc; border-radius: 14px; padding: 16px; margin-bottom: 12px; }
    .item h4{ margin:0 0 10px; font-size: 16px; font-weight: 800; color:#334155; }
    
    .row{ display:grid; grid-template-columns: 1fr; gap: 12px; }
    @media (min-width: 768px){ .row{ grid-template-columns: 1fr 1fr; } }
    
    .panel{
      background: #fff; border-radius: 10px; padding: 12px 14px;
      border-left: 4px solid #cbd5e1; border-top: 1px solid #f1f5f9; border-right: 1px solid #f1f5f9; border-bottom: 1px solid #f1f5f9;
    }
    .panel.good{ border-left-color: var(--primary); }
    .panel .label{ display:block; font-size: 11px; font-weight: 800; color:#64748b; margin-bottom: 4px; }
    .panel .text{ font-size: 13.5px; font-weight: 600; color:#334155; line-height: 1.5; }

    .summary{ background:#1e293b; color:#f1f5f9; border-radius: 18px; padding: 24px; box-shadow: var(--shadow-lg); }
    .summary h3{ margin:0 0 16px; font-size: 20px; font-weight: 900; color:#fff; display:flex; align-items:center; gap:10px; }
    .summary-grid{ display:grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 768px){ .summary-grid{ grid-template-columns: 1fr 1fr; gap: 24px; } }
    .summary small{ display:block; color:#94a3b8; font-weight: 700; font-size: 11px; margin-bottom: 4px; }
    .summary .big{ font-size: 18px; font-weight: 800; color:#fff; }
    .summary .amber{ color:#fbbf24; }
    .summary .teal{ color:#2dd4bf; }

    details{ margin-top: 24px; border-radius: 12px; background: rgba(255,255,255,0.1); padding: 16px; border: 1px solid rgba(255,255,255,0.1); }
    summary{ cursor:pointer; font-weight: 800; color:#e2e8f0; }
    .summary-actions{ display:flex; justify-content:center; gap: 12px; flex-wrap:wrap; margin-top: 24px; }
    .btn-ghost{ border-radius: 12px; padding: 10px 16px; font-weight: 800; cursor:pointer; border: 1px solid rgba(255,255,255,0.2); background: transparent; color:#e2e8f0; transition: all .15s ease; }
    .btn-ghost:hover{ background: rgba(255,255,255,0.1); }
    .btn-light{ border-radius: 12px; padding: 10px 16px; font-weight: 800; cursor:pointer; border: 1px solid transparent; background: #fff; color:#0f172a; transition: all .15s ease; display:flex; align-items:center; gap:8px; }
    .btn-light:hover{ background:#f1f5f9; transform: translateY(-1px); }

    /* Print */
    #print-root { position: fixed; top: 0; left: 0; width: 1px; height: 1px; overflow: hidden; opacity: 0; z-index: -100; pointer-events: none; }
    @media print{
      @page{ size: A4; margin: 12mm; }
      body{ background:#fff !important; padding-bottom:0; color:#000; }
      header, main, footer, .container, .container-narrow { display:none !important; }
      #print-root { display:block !important; position: static !important; width: auto !important; height: auto !important; overflow: visible !important; opacity: 1 !important; z-index: auto !important; }
      #print-root{ font-size: 10.5pt; line-height: 1.5; font-family: "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif; }
      #print-root h1{ font-size: 16pt; margin: 0 0 5mm; border-bottom: 2px solid #000; padding-bottom: 2mm; }
      #print-root h2{ font-size: 12pt; margin: 6mm 0 3mm; background: #eee; padding: 2mm 4mm; border-left: 4px solid #666; }
      .avoid-break{ break-inside: avoid; }
      .logo-print { height: 24px; width: auto; margin-right: 10px; vertical-align: middle; }
    }
  </style>
</head>

<body>
  <div id="print-root" class="hidden" aria-hidden="true"></div>

  <header>
    <div class="header-row">
      <div class="header-left">
        <img src="logo@2x.png" alt="SKYLEAF" class="logo-img" onerror="this.style.display='none'">
        <div class="title-area" onclick="window.location.reload()" role="button" tabindex="0">
          <h1 class="title">ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æˆé•·ã‚«ãƒ«ãƒ†</h1>
          <p class="subtitle">è‡ªåˆ†ã¨å‘¨ã‚ŠãŒåƒãã‚„ã™ã„ç’°å¢ƒã‚’ã¤ãã‚‹ãŸã‚ã«ã€èªè­˜ã‚’ã™ã‚Šåˆã‚ã›ã‚‹ãŸã‚ã®ã‚«ãƒ«ãƒ†ã§ã™ã€‚</p>
        </div>
      </div>
      <!-- <div id="app-version" class="version"></div> -->
    </div>
  </header>

  <main>
    <div class="container-narrow stack-xxl">

      <section id="intro-area" class="card pad-lg intro-block">
        <h2><span aria-hidden="true">â„¹ï¸</span> ã“ã®ã‚«ãƒ«ãƒ†ã«ã¤ã„ã¦</h2>
        <p>
          ã„ã¾ã®è‡ªåˆ†ã®ç«‹ã¡ä½ç½®ã‚„ã€ä»•äº‹ã®é€²ã‚æ–¹ã®å‚¾å‘ã‹ã‚‰ã€<br>
          <span style="color:var(--primary); font-weight:800;">ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ„è­˜ã™ã¹ãè¦³ç‚¹ã€</span>ã¨
          <span style="color:var(--primary); font-weight:800;">ã€Œã™ã‚Œé•ã„ã‚’æ¸›ã‚‰ã™å·¥å¤«ã€</span>
          ã‚’æ•´ç†ã—ã¾ã™ã€‚
        </p>
        <div class="positive-msg">
          <span aria-hidden="true">âœ¨</span>
          ãƒãƒ¼ãƒ ã®èªè­˜ã‚’åˆã‚ã›ã‚‹ã“ã¨ã§ã€<strong>ã‚ãªãŸãŒå®ŸåŠ›ã‚’ç™ºæ®ã—ã‚„ã™ã„ç’°å¢ƒ</strong>ã‚’ã€ãƒãƒ¼ãƒ ã®ã¿ã‚“ãªã§ä½œã£ã¦ã„ããŸã‚ã®ç¬¬ä¸€æ­©ã§ã™ã€‚
        </div>
        <div class="safety-note">
          <strong>å®‰å¿ƒã—ã¦ä½¿ã†ãŸã‚ã®ãƒ«ãƒ¼ãƒ«ï¼š</strong><br>
          æœ¬éŸ³ã§ã™ã‚Šåˆã‚ã›ã‚‹ãŸã‚ã«ã€è©•ä¾¡ãƒ»æŸ»å®šã«ã¯ä½¿ã„ã¾ã›ã‚“ã€‚çµæœã®å…±æœ‰ã‚‚ä»»æ„ã§ã™ã€‚
        </div>
      </section>

      <!-- Form -->
      <form id="reflection-form" class="card pad-lg" novalidate>
        <div style="display:flex; align-items:center; gap:12px; margin-bottom:16px;">
          <div style="width:36px;height:36px;border-radius:50%;background:var(--primary-light);display:flex;align-items:center;justify-content:center;color:var(--primary-dark);font-weight:900;font-size:14px;">1</div>
          <div>
            <p class="card-title" style="margin:0;">ã„ã¾ã®çŠ¶æ³ã‚’æ•´ç†ã™ã‚‹</p>
            <p class="card-sub" style="margin:2px 0 0;">å¿…é ˆé …ç›®ã‚’é¸ã¶ã¨ã€Œã‚«ãƒ«ãƒ†ã‚’è¦‹ã‚‹ã€ãŒæŠ¼ã›ã¾ã™</p>
          </div>
        </div>
        <div class="divider"></div>

        <!-- Q1: Experience -->
        <fieldset>
          <legend>Q1. ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã®çµŒé¨“ã¯ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ <span class="req">*å¿…é ˆ</span></legend>
          <div class="grid two">
            <label class="option"><input class="opt sr-only" type="radio" name="exp_eng" value="junior"><div class="option-card"><div class="opt-title">1ã€œ2å¹´</div><div class="opt-desc">åˆæœŸï¼šç¾å ´ã«æ…£ã‚Œã¦ã„ãæ™‚æœŸ</div></div></label>
            <label class="option"><input class="opt sr-only" type="radio" name="exp_eng" value="middle"><div class="option-card"><div class="opt-title">3ã€œ5å¹´</div><div class="opt-desc">ä¸­ç›¤ï¼šä»»ã•ã‚Œã‚‹ç¯„å›²ãŒåºƒãŒã‚‹æ™‚æœŸ</div></div></label>
            <label class="option"><input class="opt sr-only" type="radio" name="exp_eng" value="senior"><div class="option-card"><div class="opt-title">6ã€œ9å¹´</div><div class="opt-desc">çµŒé¨“è€…ï¼šå‘¨å›²ã‚’æ”¯ãˆã‚‹å ´é¢ãŒå¢—ãˆã‚‹æ™‚æœŸ</div></div></label>
            <label class="option"><input class="opt sr-only" type="radio" name="exp_eng" value="veteran"><div class="option-card"><div class="opt-title">10å¹´ä»¥ä¸Š</div><div class="opt-desc">ç†Ÿç·´ï¼šå…¨ä½“ã‚’è¦‹ã¦åˆ¤æ–­ã™ã‚‹å ´é¢ãŒå¢—ãˆã‚‹æ™‚æœŸ</div></div></label>
          </div>
        </fieldset>

        <div class="divider"></div>

        <!-- Q2: Role Scope -->
        <fieldset>
          <legend>Q2. å¾Œè¼©ã®ã‚µãƒãƒ¼ãƒˆã‚„ã€ãƒãƒ¼ãƒ ã‚’ã¾ã¨ã‚ã‚‹çµŒé¨“ã¯ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ <span class="req">*å¿…é ˆ</span></legend>
          <div class="grid two">
            <label class="option"><input class="opt sr-only" type="radio" name="role_scope" value="none"><div class="option-card"><div class="opt-title">æœªçµŒé¨“</div><div class="opt-desc">ã¾ã è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ãŒä¸­å¿ƒï¼ˆã“ã‚Œã‹ã‚‰æŒ‘æˆ¦ï¼‰</div></div></label>
            <label class="option"><input class="opt sr-only" type="radio" name="role_scope" value="novice"><div class="option-card"><div class="opt-title">ã€œ1å¹´</div><div class="opt-desc">å¾Œè¼©ã‚’è¦‹ã‚‹ã“ã¨ãŒå¢—ãˆå§‹ã‚ãŸï¼ˆã¡ã‚‡ã£ã¨ä»»ã•ã‚Œå§‹ã‚ãŸï¼‰</div></div></label>
            <label class="option"><input class="opt sr-only" type="radio" name="role_scope" value="lead"><div class="option-card"><div class="opt-title">1ã€œ3å¹´</div><div class="opt-desc">å‘¨ã‚Šã‚’æ”¯ãˆã‚‹å ´é¢ãŒå¢—ãˆãŸï¼ˆæ”¯ãˆã‚‹/ä»»ã›ã‚‹ï¼‰</div></div></label>
            <label class="option"><input class="opt sr-only" type="radio" name="role_scope" value="manager"><div class="option-card"><div class="opt-title">4å¹´ä»¥ä¸Š</div><div class="opt-desc">å…¨ä½“ã‚’è¦‹ã‚‹ãƒ»ç®¡ç†ãŒä¸­å¿ƒ</div></div></label>
          </div>
        </fieldset>

        <!-- Q2.5: Interactive Question for Leaders -->
        <div id="sub-q-leader" class="sub-q-area hidden"> <!-- Added hidden -->
          <fieldset>
            <legend style="color:var(--orange-text); font-size:14px; margin-bottom:8px;">Q2.5 ãƒªãƒ¼ãƒ€ãƒ¼æ¥­å‹™ã§ã€ç‰¹ã«ã€Œä¸å®‰ã€ã‚„ã€Œè² æ‹…ã€ã‚’æ„Ÿã˜ã‚‹å ´é¢ã¯ï¼Ÿ <span style="font-weight:400; font-size:12px;">â€»å‡¦æ–¹ç®‹ã‚’å‡ºã—ã¾ã™ï¼ˆè¤‡æ•°é¸æŠå¯ãƒ»ä»»æ„ï¼‰</span></legend>
            <div class="grid">
              <label class="option">
                <input class="opt sr-only" type="checkbox" name="leader_anxiety" value="quality">
                <div class="option-card">
                  <div class="opt-title">ä»»ã›ã‚‹ã®ãŒæ€–ã„ï¼ˆå“è³ªãƒ»æ‰‹æˆ»ã‚Šï¼‰</div>
                  <div class="opt-desc">ã€Œè‡ªåˆ†ã§ã‚„ã£ãŸæ–¹ãŒæ—©ã„ã€ã€Œä»»ã›ã‚‹ã¨å“è³ªãŒä¸‹ãŒã‚‹ã€ã¨æ„Ÿã˜ã¦æŠ±ãˆè¾¼ã¿ãŒã¡ã€‚</div>
                </div>
              </label>
              <label class="option">
                <input class="opt sr-only" type="checkbox" name="leader_anxiety" value="visibility">
                <div class="option-card">
                  <div class="opt-title">é€²æ—ãŒè¦‹ãˆãªã„ï¼ˆç®¡ç†ãƒ»æ”¾ç½®ï¼‰</div>
                  <div class="opt-desc">å ±å‘ŠãŒæ¥ãªãã¦ã‚½ãƒ¯ã‚½ãƒ¯ã™ã‚‹ã€‚ã‚ã‚‹ã„ã¯ç´°ã‹ãèãã™ãã¦ãƒã‚¤ã‚¯ãƒ­ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã«ãªã‚Šãã†ã€‚</div>
                </div>
              </label>
              <label class="option">
                <input class="opt sr-only" type="checkbox" name="leader_anxiety" value="shield">
                <div class="option-card">
                  <div class="opt-title">æ¿æŒŸã¿ãŒã¤ã‚‰ã„ï¼ˆèª¿æ•´ãƒ»çŸ¢é¢ï¼‰</div>
                  <div class="opt-desc">é¡§å®¢ãƒ»ä¸Šå¸ã®è¦æœ›ã¨ã€ç¾å ´ãƒ¡ãƒ³ãƒãƒ¼ã®è² æ‹…ã®é–“ã§ã€è‡ªåˆ†ãŒãƒãƒƒãƒ•ã‚¡ã«ãªã‚ã†ã¨ã—ã¦ç–²ã‚Œã‚‹ã€‚</div>
                </div>
              </label>
              <label class="option">
                <input class="opt sr-only" type="checkbox" name="leader_anxiety" value="human">
                <div class="option-card">
                  <div class="opt-title">äººã«è¨€ã†ã®ãŒè‹¦æ‰‹ï¼ˆæŒ‡æ‘˜ãƒ»äººé–“é–¢ä¿‚ï¼‰</div>
                  <div class="opt-desc">å¹´ä¸Šãƒ¡ãƒ³ãƒãƒ¼ã¸ã®æŒ‡æ‘˜ã‚„ã€å³ã—ã„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã™ã‚‹æ™‚ã«å¼·ã„ã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ„Ÿã˜ã‚‹ã€‚</div>
                </div>
              </label>
            </div>
          </fieldset>
        </div>

        <div class="divider"></div>

        <!-- Q3: Coworkers -->
        <fieldset>
          <legend>Q3. ãµã ã‚“ã€ç¾å ´ã§é–¢ã‚ã‚‹ã“ã¨ãŒå¤šã„ç›¸æ‰‹ã¯ï¼Ÿ <span class="req">*å¿…é ˆï¼ˆè¤‡æ•°é¸æŠï¼‰</span></legend>
          <div class="grid three">
            <label class="option"><input class="opt sr-only" type="checkbox" name="coworker" value="internal_boss"><div class="option-card" style="text-align:center;"><div style="font-size:24px; margin-bottom:6px;">ğŸ‘¨â€ğŸ’¼</div><div class="opt-title" style="font-size:12px;">è‡ªç¤¾ã®å…ˆè¼©/ä¸Šå¸</div></div></label>
            <label class="option"><input class="opt sr-only" type="checkbox" name="coworker" value="internal_junior"><div class="option-card" style="text-align:center;"><div style="font-size:24px; margin-bottom:6px;">ğŸ£</div><div class="opt-title" style="font-size:12px;">è‡ªç¤¾ã®å¾Œè¼©/éƒ¨ä¸‹</div></div></label>
            <label class="option"><input class="opt sr-only" type="checkbox" name="coworker" value="internal_peer"><div class="option-card" style="text-align:center;"><div style="font-size:24px; margin-bottom:6px;">ğŸ¤</div><div class="opt-title" style="font-size:12px;">è‡ªç¤¾ã®åŒåƒš</div></div></label>
            <label class="option"><input class="opt sr-only" type="checkbox" name="coworker" value="client_boss"><div class="option-card" style="text-align:center;"><div style="font-size:24px; margin-bottom:6px;">ğŸ¢</div><div class="opt-title" style="font-size:12px;">ãŠå®¢æ§˜å´ã®æ‹…å½“è€…</div></div></label>
            <label class="option"><input class="opt sr-only" type="checkbox" name="coworker" value="partner_junior"><div class="option-card" style="text-align:center;"><div style="font-size:24px; margin-bottom:6px;">ğŸ—ï¸</div><div class="opt-title" style="font-size:12px;">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼/å”åŠ›ä¼šç¤¾</div></div></label>
            <label class="option"><input class="opt sr-only" type="checkbox" name="coworker" value="non_engineer"><div class="option-card" style="text-align:center;"><div style="font-size:24px; margin-bottom:6px;">ğŸ¨</div><div class="opt-title" style="font-size:12px;">PM/QA/ãƒ‡ã‚¶ã‚¤ãƒ³</div></div></label>
            <label class="option" style="grid-column:1/-1;"><input class="opt sr-only" type="checkbox" name="coworker" value="solo"><div class="option-card" style="display:flex;align-items:center;justify-content:center;gap:10px;text-align:center;"><div style="font-size:24px;">ğŸ’»</div><div class="opt-title" style="font-size:12px;">åŸºæœ¬ã²ã¨ã‚Š</div></div></label>
          </div>
        </fieldset>

        <div class="divider"></div>

        <!-- Phase 2 Header -->
        <div style="display:flex; align-items:center; gap:12px; margin-top: 8px;">
          <div style="width:36px;height:36px;border-radius:50%;background:var(--primary-light);display:flex;align-items:center;justify-content:center;color:var(--primary-dark);font-weight:900;font-size:14px;">2</div>
          <div>
            <p class="card-title" style="margin:0;">ä»•äº‹ã®é€²ã‚æ–¹ã®å‚¾å‘ã‚’çŸ¥ã‚‹</p>
            <p class="card-sub" style="margin:2px 0 0;">â€œæ­£è§£æ¢ã—â€ã§ã¯ãªãã€ã™ã‚Œé•ã„ã‚’æ¸›ã‚‰ã™ãŸã‚ã®è¦³ç‚¹ã§ã™</p>
          </div>
        </div>
        <div class="divider"></div>

        <!-- Q4: Focus -->
        <fieldset>
          <legend>Q4. ä»Šã®è‡ªåˆ†ãŒæ„è­˜ã—ãŸã„è¦–ç‚¹ã¯ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ <span class="req">*å¿…é ˆ</span></legend>
          <div class="grid" style="gap:14px;">
            <label class="option">
              <input class="opt sr-only" type="radio" name="focus_axis" value="tech">
              <div class="option-card" style="display:flex;gap:14px;align-items:flex-start;">
                <div style="background:var(--primary-light); color:var(--primary); padding:10px; border-radius:12px; font-size:22px;">ğŸ› ï¸</div>
                <div><div class="opt-title" style="font-size:16px;">æŠ€è¡“é¢</div><div class="opt-desc" style="font-size:13px;">å“è³ªã€è¨­è¨ˆã€å®Ÿè£…ã®é€²ã‚æ–¹ã€å­¦ç¿’ãªã©ã€‚</div></div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="radio" name="focus_axis" value="people">
              <div class="option-card" style="display:flex;gap:14px;align-items:flex-start;">
                <div style="background:var(--accent-light); color:var(--accent); padding:10px; border-radius:12px; font-size:22px;">ğŸŒ±</div>
                <div><div class="opt-title" style="font-size:16px;">å‘¨å›²ã¨ã®é–¢ã‚ã‚Šæ–¹</div><div class="opt-desc" style="font-size:13px;">ç›¸è«‡ã€å”åŠ›ã€ä¼ãˆæ–¹ã€å®‰å¿ƒã—ã¦åƒããŸã‚ã®å·¥å¤«ãªã©ã€‚</div></div>
              </div>
            </label>
            <label class="option">
              <input class="opt sr-only" type="radio" name="focus_axis" value="biz">
              <div class="option-card" style="display:flex;gap:14px;align-items:flex-start;">
                <div style="background:#f3e8ff; color:#7e22ce; padding:10px; border-radius:12px; font-size:22px;">ğŸ§­</div>
                <div><div class="opt-title" style="font-size:16px;">å…¨ä½“ã®è¦‹ãˆæ–¹</div><div class="opt-desc" style="font-size:13px;">å„ªå…ˆé †ä½ã€æœŸå¾…å€¤èª¿æ•´ã€ä¾¡å€¤ãƒ»ã‚³ã‚¹ãƒˆãƒ»æœŸé™ã®ãƒãƒ©ãƒ³ã‚¹ãªã©ã€‚</div></div>
              </div>
            </label>
          </div>
        </fieldset>

        <div class="divider"></div>

        <!-- Q5: Share Style -->
        <fieldset>
          <legend>Q5. ãµã ã‚“ã®å…±æœ‰ã®ã—ã‹ãŸã¯ã€ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ <span class="req">*å¿…é ˆ</span></legend>
          <div class="grid three" style="gap:12px;">
            <label class="option">
              <input class="opt emerald sr-only" type="radio" name="share_style" value="detail">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:8px;">ğŸ”</div>
                <div class="opt-title" style="font-size:13px;">ã“ã¾ã‚ã«å…±æœ‰</div>
                <div class="opt-desc">é€”ä¸­ã§ã‚‚è¦‹ã›ã‚‹</div>
              </div>
            </label>
            <label class="option">
              <input class="opt emerald sr-only" type="radio" name="share_style" value="outcome">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:8px;">ğŸ¯</div>
                <div class="opt-title" style="font-size:13px;">ã¾ã¨ã¾ã£ã¦å…±æœ‰</div>
                <div class="opt-desc">ã‚ã‚‹ç¨‹åº¦å½¢ã«ã™ã‚‹</div>
              </div>
            </label>
            <label class="option">
              <input class="opt emerald sr-only" type="radio" name="share_style" value="adaptive">
              <div class="option-card" style="text-align:center;">
                <div style="font-size:24px; margin-bottom:8px;">ğŸ”„</div>
                <div class="opt-title" style="font-size:13px;">ç›¸æ‰‹ã«åˆã‚ã›ã‚‹</div>
                <div class="opt-desc">çŠ¶æ³ã§ä½¿ã„åˆ†ã‘ã‚‹</div>
              </div>
            </label>
          </div>
        </fieldset>

        <div class="actions" style="margin-top: 24px;">
          <button id="build-sheet" type="button" class="btn" disabled>ã‚«ãƒ«ãƒ†ã‚’è¦‹ã‚‹</button>
          <div id="error-msg" class="error hidden" role="alert">ã¾ã é¸ã¹ã¦ã„ãªã„é …ç›®ãŒã‚ã‚Šã¾ã™ã€‚å¿…é ˆï¼ˆ*ï¼‰ã‚’ã™ã¹ã¦é¸ã‚“ã§ãã ã•ã„ã€‚</div>
        </div>
      </form>

      <!-- Result Area -->
      <section id="result-area" class="hidden stack-xxl" aria-live="polite">
        <div class="result-head">
          <span class="pill">ã‚«ãƒ«ãƒ†ãŒã§ãã¾ã—ãŸ</span>
          <h2>ã„ã¾ã®ç«‹å ´ã®ã€Œæ„è­˜ãƒã‚¤ãƒ³ãƒˆã€</h2>
          <p>é¸æŠå†…å®¹ã‹ã‚‰ã€å¯¾è©±ã®ãŸã‚ã®è¦³ç‚¹ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚</p>
          <div class="hint">â€»ã“ã‚Œã¯ã€Œä»®èª¬ã€ã§ã™ã€‚åˆã†ï¼åˆã‚ãªã„ã‚’ææ–™ã«ã—ã¦ãã ã•ã„ã€‚</div>
        </div>

        <div id="block-stage"></div>
        <div id="block-role"></div>
        <div id="block-anxiety"></div> <!-- Dynamic Prescription -->
        <div id="block-comm"></div>
        <div id="block-focus"></div>
        <div id="block-growth"></div>
        <div id="block-share"></div>

        <div class="summary" id="summary-card">
          <h3><span aria-hidden="true">ğŸ“‹</span> ã‚«ãƒ«ãƒ†ã®è¦ç´„</h3>
          <div class="summary-grid">
            <div><small>çµŒé¨“ã®ç›®å®‰</small><div class="big" id="sum-exp">-</div></div>
            <div><small>ä»»ã•ã‚Œæ–¹ã®ç›®å®‰</small><div class="big amber" id="sum-role">-</div></div>
            <div><small>é–¢ã‚ã‚‹ç›¸æ‰‹</small><div class="big teal" id="sum-who">-</div></div>
            <div><small>é‡å¿ƒã®å‚¾å‘</small><div class="big" id="sum-focus">-</div></div>
          </div>
          <div class="summary-actions">
            <button id="print-btn" type="button" class="btn-light" aria-label="ä¿å­˜ãƒ»å°åˆ·">ä¿å­˜ãƒ»å°åˆ·</button>
            <button id="reset-btn" type="button" class="btn-ghost">ã‚‚ã†ä¸€åº¦ã¤ãã‚‹</button>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    "use strict";

    const APP_VERSION = "v10.0 (Mobile Opt + Leader+)";

    const LABELS = {
      exp: { junior:"1ã€œ2å¹´", middle:"3ã€œ5å¹´", senior:"6ã€œ9å¹´", veteran:"10å¹´ä»¥ä¸Š" },
      role: { none:"ä»»ã•ã‚Œã‚‹å´ãŒä¸­å¿ƒ", novice:"ã¡ã‚‡ã£ã¨ä»»ã•ã‚Œå§‹ã‚ãŸ", lead:"ãƒªãƒ¼ãƒ‰/æ”¯ãˆã‚‹ãŒå¢—ãˆãŸ", manager:"ç®¡ç†ãƒ»é‹å–¶ãŒå¤šã„" },
      focus: { tech:"æŠ€è¡“é‡è¦–", people:"é–¢ã‚ã‚Šæ–¹é‡è¦–", biz:"å…¨ä½“é‡è¦–" },
      coworker: {
        internal_boss:"è‡ªç¤¾ä¸Šå¸",
        internal_junior:"è‡ªç¤¾å¾Œè¼©",
        internal_peer:"è‡ªç¤¾åŒåƒš",
        client_boss:"ãŠå®¢æ§˜",
        partner_junior:"ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼",
        non_engineer:"PM/QA",
        solo:"ã²ã¨ã‚Š"
      }
    };

    function el(tag, opts = {}, children = []) {
      const node = document.createElement(tag);
      if (opts.className) node.className = opts.className;
      if (opts.text != null) node.textContent = opts.text;
      if (opts.style) node.style.cssText = opts.style; // Added style support
      if (opts.attrs) for (const [k, v] of Object.entries(opts.attrs)) node.setAttribute(k, v);
      for (const c of children) if (c) node.appendChild(c);
      return node;
    }

    function clear(node) { while (node.firstChild) node.removeChild(node.firstChild); }
    function setText(id, text) { const t = document.getElementById(id); if (t) t.textContent = text; }
    function appendRich(container, parts) {
      for (const p of parts) {
        if (!p) continue;
        if (p.t === "text") container.appendChild(document.createTextNode(p.v));
        else if (p.t === "br") container.appendChild(document.createElement("br"));
        else if (p.t === "strong") container.appendChild(el("strong", { text: p.v, className: p.className || "" }));
      }
    }

    // ==========================================================
    // DATA SECTION (Expanded Format)
    // ==========================================================
    
    // PART 1: STAGE
    const STAGES = {
      junior: {
        title: "ã€ã„ã¾ã®ç«‹å ´ã€‘åˆæœŸï¼ˆ1ã€œ2å¹´ç›®ï¼‰",
        subtitle: "ã¾ãšã¯ã€Œå®‰å¿ƒã—ã¦ä»»ã›ã¦ã‚‚ã‚‰ãˆã‚‹äººã€ã«ãªã‚‹ãŸã‚ã®åœŸå°ä½œã‚Š",
        icon: "ğŸŒ±",
        theme: { border: "#0d9488", bg: "linear-gradient(90deg, #ccfbf1, #fff)" },
        content: [
          {
            head:"å…±æœ‰ã§ä¿¡é ¼ã‚’è²¯ã‚ã‚‹",
            bad:"èã‹ã‚Œã‚‹ã¾ã§è¨€ã‚ãªã„ / å•é¡ŒãŒèµ·ãã¦ã‹ã‚‰è¨€ã†",
            action:"ã€Œé †èª¿ã§ã™ã€ã ã‘ã§ãªãã€Œã“ã“ãŒä¸å®‰ã§ã™ã€ã‚‚ã‚»ãƒƒãƒˆã§å…±æœ‰ã™ã‚‹ã€‚ä¸å®‰ã®å…±æœ‰ã¯æ¥ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"
          },
          {
            head:"å®Œäº†æ¡ä»¶ã‚’æ¡ã‚‹",
            bad:"è¨€ã‚ã‚ŒãŸé€šã‚Šã«ä½œã£ãŸã¤ã‚‚ã‚Šã§ã€æ‰‹æˆ»ã‚ŠãŒç™ºç”Ÿã™ã‚‹",
            action:"ã€Œä½•ãŒã§ããŸã‚‰å®Œäº†ã§ã™ã‹ï¼Ÿã€ã‚’ç€æ‰‹å‰ã«ç¢ºèªã—ã€ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆï¼ˆDoDï¼‰ã‚’ã™ã‚Šåˆã‚ã›ã‚‹ã€‚"
          },
          {
            head:"è©°ã¾ã£ãŸã‚‰æ—©ã‚ã«ã‚¢ãƒ©ãƒ¼ãƒˆ",
            bad:"ä¸€äººã§æŠ±ãˆè¾¼ã‚“ã§æ™‚é–“ãŒéãã‚‹",
            action:"ã€Œ15åˆ†è©°ã¾ã£ãŸã‚‰ç›¸è«‡ã™ã‚‹ã€ãªã©ã®ãƒ«ãƒ¼ãƒ«ã‚’è‡ªåˆ†ã«èª²ã—ã€æ—©ã‚ã«åŠ©ã‘ã‚’æ±‚ã‚ã‚‹ã€‚"
          }
        ]
      },
      middle: {
        title: "ã€ã„ã¾ã®ç«‹å ´ã€‘ä¸­ç›¤ï¼ˆ3ã€œ5å¹´ç›®ï¼‰",
        subtitle: "è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ã‹ã‚‰ã€Œãƒãƒ¼ãƒ ã®æˆæœã€ã¸è¦–é‡ã‚’åºƒã’ã‚‹",
        icon: "ğŸ£",
        theme: { border: "#0284c7", bg: "linear-gradient(90deg, #e0f2fe, #fff)" },
        content: [
          {
            head:"å‰å¾Œå·¥ç¨‹ã¸ã®é…æ…®",
            bad:"è‡ªåˆ†ã®æ‹…å½“ç¯„å›²ã ã‘çµ‚ã‚ã‚‰ã›ã¦å®Œäº†ã¨ã™ã‚‹",
            action:"ã€Œã“ã®å®Ÿè£…ã§ãƒ†ã‚¹ãƒˆã‚„é‹ç”¨ã¯å›°ã‚‰ãªã„ã‹ï¼Ÿã€ã‚’æƒ³åƒã—ã€å‰å¾Œã®æ‹…å½“è€…ã¨ä¼šè©±ã™ã‚‹ã€‚"
          },
          {
            head:"ä»£æ¡ˆã‚’æŒã£ã¦ç›¸è«‡ã™ã‚‹",
            bad:"ã€Œç„¡ç†ã§ã™ã€ã€Œã‚ã‹ã‚Šã¾ã›ã‚“ã€ã ã‘ã§æ­¢ã‚ã‚‹",
            action:"ã€ŒAæ¡ˆã¯ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ãŒæ—©ã„ã§ã™ã€‚Bæ¡ˆã¯ç¢ºå®Ÿã§ã™ãŒæ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€ã¨é¸æŠè‚¢ã‚’æç¤ºã™ã‚‹ã€‚"
          },
          {
            head:"éš™é–“ã‚’æ‹¾ã†",
            bad:"æ‹…å½“å¤–ã®ãƒœãƒ¼ãƒ«ã‚’ã‚¹ãƒ«ãƒ¼ã™ã‚‹",
            action:"ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™ã‚„ç’°å¢ƒè¨­å®šãªã©ã€èª°ã‚‚ã‚„ã£ã¦ã„ãªã„ãŒå¿…è¦ãªã‚¿ã‚¹ã‚¯ã‚’å°ã•ãæ‹¾ã†ã€‚"
          }
        ]
      },
      senior: {
        title: "ã€ã„ã¾ã®ç«‹å ´ã€‘çµŒé¨“è€…ï¼ˆ6ã€œ9å¹´ç›®ï¼‰",
        subtitle: "å“è³ªã¨ã‚¹ãƒ”ãƒ¼ãƒ‰ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚Šã€ãƒãƒ¼ãƒ ã®åŸºæº–ã«ãªã‚‹",
        icon: "ğŸ¦",
        theme: { border: "#4f46e5", bg: "linear-gradient(90deg, #eef2ff, #fff)" },
        content: [
          {
            head:"ä½œã‚‰ãªã„å‹‡æ°—",
            bad:"è¨€ã‚ã‚ŒãŸæ©Ÿèƒ½ã‚’ã™ã¹ã¦å®Ÿè£…ã—ã€ä¿å®ˆã‚³ã‚¹ãƒˆã‚’å¢—ã‚„ã™",
            action:"ã€Œæœ¬å½“ã«ãã®æ©Ÿèƒ½ã¯å¿…è¦ã‹ï¼Ÿã€ã€Œæ—¢å­˜æ©Ÿèƒ½ã§ä»£ç”¨ã§ããªã„ã‹ï¼Ÿã€ã‚’å•ã„ã€ç„¡é§„ãªé–‹ç™ºã‚’æ¸›ã‚‰ã™ã€‚"
          },
          {
            head:"ä»•çµ„ã¿ã§è§£æ±ºã™ã‚‹",
            bad:"ã€Œæ°—ã‚’ã¤ã‘ã‚‹ã€ã¨ã„ã†ç²¾ç¥è«–ã§ãƒŸã‚¹ã‚’é˜²ã”ã†ã¨ã™ã‚‹",
            action:"CI/CDã€Lintã€ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆãªã©ã€èª°ãŒã‚„ã£ã¦ã‚‚å“è³ªãŒä¿ã¦ã‚‹ä»•çµ„ã¿ã‚’å°å…¥ã™ã‚‹ã€‚"
          },
          {
            head:"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯æ•™è‚²ã®å ´",
            bad:"ç´°ã‹ã„æŒ‡æ‘˜ã ã‘ã—ã¦ã€æ„å›³ã‚’ä¼ãˆãªã„",
            action:"ã€Œãªãœã“ã®æ›¸ãæ–¹ãŒè‰¯ã„ã®ã‹ã€ã¨ã„ã†èƒŒæ™¯ã‚’ä¼ãˆã€ãƒ¡ãƒ³ãƒãƒ¼ã®è¦–åº§ã‚’å¼•ãä¸Šã’ã‚‹ã€‚"
          }
        ]
      },
      veteran: {
        title: "ã€ã„ã¾ã®ç«‹å ´ã€‘ç†Ÿç·´ï¼ˆ10å¹´ç›®ã€œï¼‰",
        subtitle: "å…¨ä½“æœ€é©ã¨æŒç¶šå¯èƒ½æ€§ã‚’è¨­è¨ˆã™ã‚‹",
        icon: "ğŸ‘‘",
        theme: { border: "#7c3aed", bg: "linear-gradient(90deg, #f5f3ff, #fff)" },
        content: [
          {
            head:"éƒ¨åˆ†æœ€é©ã‚’ç–‘ã†",
            bad:"æŠ€è¡“çš„ãªæ­£ã—ã•ã ã‘ã«å›ºåŸ·ã—ã€ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã‚’æãªã†",
            action:"ã‚³ã‚¹ãƒˆã€ç´æœŸã€é‹ç”¨ä½“åˆ¶ã‚’å«ã‚ãŸå…¨ä½“è¦–ç‚¹ã§ã€æœ€é©ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚„æŠ€è¡“ã‚’é¸å®šã™ã‚‹ã€‚"
          },
          {
            head:"ä¾¡å€¤ã«å‘ãåˆã†",
            bad:"ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆï¼ˆä½œã£ãŸé‡ï¼‰ã ã‘ã§è©•ä¾¡ã™ã‚‹",
            action:"ã‚¢ã‚¦ãƒˆã‚«ãƒ ï¼ˆèª°ãŒã©ã†æ¥½ã«ãªã£ãŸã‹ï¼‰ã‚’å•ã„ç¶šã‘ã€ãƒãƒ¼ãƒ ã®æ–¹å‘ä¿®æ­£ã‚’è¡Œã†ã€‚"
          },
          {
            head:"æ–‡åŒ–ã‚’è€•ã™",
            bad:"ãƒ«ãƒ¼ãƒ«ã‚„ç½°å‰‡ã§äººã‚’ç®¡ç†ã—ã‚ˆã†ã¨ã™ã‚‹",
            action:"å¿ƒç†çš„å®‰å…¨æ€§ã€å¤±æ•—ã‹ã‚‰å­¦ã¶å§¿å‹¢ã€ç§°è³›ã—ã‚ã†æ–‡åŒ–ã‚’ã€è‡ªã‚‰ã®æŒ¯ã‚‹èˆã„ã§æµ¸é€ã•ã›ã‚‹ã€‚"
          }
        ]
      }
    };

    // PART 2: ROLE & LEADER SUPPORT
    function getRoleHints(expVal, roleVal) {
      const standard = {
        none: {
          title:"ä»»ã•ã‚Œæ–¹ã®å¤‰åŒ–ï¼šã“ã‚Œã‹ã‚‰ã®æº–å‚™",
          msg:["ã¾ãšã¯ã€Œè‡ªåˆ†ã®å‘¨è¾ºã€ã«é–¢å¿ƒã‚’æŒã¤ã¨ã“ã‚ã‹ã‚‰ã€‚è³ªå•ã™ã‚‹ã“ã¨ã€çŠ¶æ³ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã‚‚ç«‹æ´¾ãªãƒãƒ¼ãƒ è²¢çŒ®ã§ã™ã€‚"],
          tips:[
            { icon:"ğŸ‘€", text:"é€²æ—ãƒœãƒ¼ãƒ‰ã‚„ãƒã‚±ãƒƒãƒˆã‚’æ¯æ—¥1å›çœºã‚ã¦ã€Œå…¨ä½“ã®æ¸©åº¦æ„Ÿã€ã‚’æ´ã‚€ã€‚" },
            { icon:"ğŸ™‹â€â™‚ï¸", text:"åˆ†ã‹ã£ãŸãµã‚Šã‚’ã›ãšã€Œãã‚Œã¯ã©ã†ã„ã†æ„å‘³ã§ã™ã‹ï¼Ÿã€ã¨èãã€‚" },
            { icon:"ğŸ§¹", text:"è­°äº‹éŒ²ãƒ»ç’°å¢ƒæ•´å‚™ãªã©ã€èª°ã‚‚ã‚„ã‚ŠãŸãŒã‚‰ãªã„ä»•äº‹ã¯ä¿¡é ¼ã‚’ä½œã‚‹ã€‚" }
          ]
        },
        novice: {
          title:"ä»»ã•ã‚Œæ–¹ã®å¤‰åŒ–ï¼šã¡ã‚‡ã£ã¨ä»»ã•ã‚Œå§‹ã‚ãŸæ™‚æœŸ",
          msg:["å¾Œè¼©ã®ã‚±ã‚¢ã‚„å°ã•ãªé€²è¡Œç®¡ç†ã€‚è‡ªåˆ†ã®ä½œæ¥­æ™‚é–“ã‚’ç¢ºä¿ã—ã¤ã¤ã€ä»–äººã®ãŸã‚ã«æ™‚é–“ã‚’ä½¿ã†ç·´ç¿’æœŸé–“ã§ã™ã€‚"],
          tips:[
            { icon:"ğŸ¤™", text:"ã€Œæ˜æ—¥ã‚„ã‚Šã¾ã™ã€ã‚’å®ˆã‚‹ã€‚å°ã•ãªç´„æŸã®ç©ã¿ä¸Šã’ãŒä¸€ç•ªåŠ¹ãã¾ã™ã€‚" },
            { icon:"ğŸ‘‚", text:"ç›¸æ‰‹ã®è©±ã‚’é€”ä¸­ã§é®ã‚‰ãªã„ã€‚æœ€å¾Œã¾ã§èãã“ã¨ã§æƒ…å ±ã®æŠœã‘ãŒæ¸›ã‚Šã¾ã™ã€‚" },
            { icon:"ğŸ†˜", text:"ãƒˆãƒ©ãƒ–ãƒ«æ™‚ã¯è¬ç½ªã‚ˆã‚Šå…ˆã«äº‹å®Ÿï¼ˆã„ã¾ä½•ãŒèµ·ãã¦ã„ã‚‹ã‹ï¼‰ã‚’çŸ­ãå…±æœ‰ã™ã‚‹ã€‚" }
          ]
        },
        lead: {
          title:"ä»»ã•ã‚Œæ–¹ã®å¤‰åŒ–ï¼šãƒªãƒ¼ãƒ‰ãƒ»æ”¯ãˆã‚‹ãŒå¢—ãˆãŸæ™‚æœŸ",
          msg:["è‡ªåˆ†ãŒã‚„ã£ãŸæ–¹ãŒæ—©ãã¦ã‚‚ã€ä»»ã›ã‚‹å‹‡æ°—ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ã€Œ60ç‚¹ã§é€²ã‚ã¦ã‚‚ã‚‰ã„ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æ•´ãˆã‚‹ã€ã‚¹ã‚¿ãƒ³ã‚¹ãŒæœ‰åŠ¹ã§ã™ã€‚"],
          tips:[
            { icon:"ğŸš€", text:"è‡ªåˆ†ãŒæ›¸ã‘ã°æ—©ã„å ´é¢ã»ã©ã€ä»»ã›ã‚‹ã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æ–¹å‘ã ã‘æ•´ãˆã‚‹ã¨ãƒãƒ¼ãƒ ãŒè‚²ã¡ã¾ã™ã€‚" },
            { icon:"ğŸ›¡ï¸", text:"ãƒ¡ãƒ³ãƒãƒ¼ã®ä»•äº‹ã‚’å®ˆã‚‹ã€Œé˜²æ³¢å ¤ã€ã¨ã—ã¦ã®æ„è­˜ã‚’æŒã¡å§‹ã‚ã¾ã—ã‚‡ã†ã€‚" }
          ]
        },
        manager: {
          title:"ä»»ã•ã‚Œæ–¹ã®å¤‰åŒ–ï¼šç®¡ç†ãƒ»é‹å–¶ãŒå¤šã„æ™‚æœŸ",
          msg:["ã‚¿ã‚¹ã‚¯ç®¡ç†ã§ã¯ãªãã€Œãƒ”ãƒ¼ãƒ—ãƒ«ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã€ãŒä¸­å¿ƒã€‚äººã®æ„Ÿæƒ…ã€ã‚­ãƒ£ãƒªã‚¢ã€ãƒãƒ¼ãƒ ã®äººé–“é–¢ä¿‚ã«ç›®ã‚’å‘ã‘ã¾ã™ã€‚"],
          tips:[
            { icon:"âš™ï¸", text:"å±äººåŒ–ã‚’æ¸›ã‚‰ã™ã€‚èª°ãŒæŠœã‘ã¦ã‚‚å›ã‚‹ä»•çµ„ã¿ï¼ˆæ‰‹é †ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»è‡ªå‹•åŒ–ï¼‰ã‚’å„ªå…ˆã™ã‚‹ã€‚" },
            { icon:"ğŸŒ±", text:"ç’°å¢ƒã‚’æ•´ãˆã‚‹ã®ãŒä»•äº‹ã€‚äººãŒåŠ›ã‚’å‡ºã›ã‚‹ã€Œé‚ªé­”ã®ãªã„çŠ¶æ…‹ã€ã‚’ä½œã‚‹ã€‚" }
          ]
        }
      };

      const expLevel = { junior:1, middle:2, senior:3, veteran:4 };
      const roleLevel = { none:0, novice:1, lead:2, manager:3 };
      const e = expLevel[expVal];
      const r = roleLevel[roleVal];

      // Gap logic
      if (e >= 3 && r <= 1) return {
        title: "çµŒé¨“ã®æ·±ã¿ã‚’ã€å½±éŸ¿åŠ›ã«ã¤ãªã’ã‚‹",
        msg: ["çµŒé¨“å¹´æ•°ã«å¯¾ã—ã¦ã€Œä»»ã•ã‚Œæ–¹ã€ãŒå°‘ãªã„å ´åˆã§ã‚‚ã€ç„¦ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å¥‘ç´„å½¢æ…‹ã‚„ç¾å ´ã®æ§‹é€ ä¸Šã€ãã†ãªã‚‹ã“ã¨ã¯çã—ãã‚ã‚Šã¾ã›ã‚“ã€‚","ã“ã‚Œã‹ã‚‰ã¯ã€Œç®¡ç†ã€ã§ã¯ãªãã€ç›¸è«‡ã«ä¹—ã‚‹ï¼èƒŒæ™¯ã‚’è¨€èªåŒ–ã™ã‚‹ï¼åˆ¤æ–­ææ–™ã‚’å‡ºã™ã€ã¨ã„ã£ãŸå½¢ã§å½±éŸ¿åŠ›ã‚’ç™ºæ®ã—ã¦ãã ã•ã„ã€‚"],
        tips: [{ icon:"âœ¨", text:"ã€Œå½¹è·ã€ã ã‘ãŒå‰é€²ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æŠ€è¡“ãƒ¡ãƒ³ã‚¿ãƒ¼ï¼ç›¸è«‡å½¹ã¨ã—ã¦ä¿¡é ¼ã‚’ä½œã‚‹é“ã‚‚ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚" }, { icon:"ğŸ“š", text:"éå»ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚’ã€Œã©ã†æ°—ã¥ãã€ã©ã†ç›´ã—ãŸã‹ã€ã¨ã„ã†ç‰©èªã§å…±æœ‰ã™ã‚‹ã¨ã€å‘¨å›²ã®å­¦ã³ãŒé€Ÿããªã‚Šã¾ã™ã€‚" }]
      };
      
      if (e <= 1 && r >= 2) return {
        title: "ä»»ã•ã‚Œã‚‹ã®ãŒæ—©ã„æ™‚æœŸã®ã‚³ãƒ„",
        msg: ["æ—©ã„æ®µéšã§ä»»ã•ã‚Œã‚‹ã®ã¯è‰¯ã„çµŒé¨“ã§ã™ã€‚ãŸã ã€æ°—åˆã„ã ã‘ã§èµ°ã‚‹ã¨ç–²ã‚Œã‚„ã™ããªã‚Šã¾ã™ã€‚","ã€Œè‡ªåˆ†ãŒä¸€ç•ªã§ãã‚‹å¿…è¦ã¯ãªã„ã€ã®ã§ã€å¹´ä¸Šã®äººã‚„å°‚é–€å®¶ã«é ¼ã‚‹â€œç›¸è«‡ã®è¨­è¨ˆâ€ã‚’å…ˆã«ä½œã£ã¦ãŠãã¨å®‰å®šã—ã¾ã™ã€‚"],
        tips: [{ icon:"ğŸ›¡ï¸", text:"ã€Œå…¨éƒ¨è‡ªåˆ†ã§èƒŒè² ã†ã€ã‚’æ¨ã¦ã‚‹ã€‚ç›¸è«‡ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®é »åº¦ã‚’å…ˆã«æ±ºã‚ã¦ãŠãã¨å®‰å¿ƒã§ã™ã€‚" }, { icon:"ğŸ‘‚", text:"å¹´ä¸Šãƒ¡ãƒ³ãƒãƒ¼ã«ã¯ã€Œæ•™ãˆã¦ãã ã•ã„ã€ã®å§¿å‹¢ã§ã€‚æ•¬æ„ãŒã‚ã‚‹ã¨ã€åŠ©ã‘ãŒè¿”ã£ã¦ãã¾ã™ã€‚" }]
      };

      return standard[roleVal];
    }

    // PART 2.5: ANXIETY PRESCRIPTION
    function getAnxietyPrescription(anxietyKey) {
      if (!anxietyKey) return null;
      const db = {
        quality: {
          title: "å‡¦æ–¹ç®‹ï¼šSLç†è«–ï¼ˆçŠ¶æ³å¯¾å¿œå‹ï¼‰ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ",
          msg: "ã€Œä»»ã›ã‚‹ã€ã¯ã€Œä¸¸æŠ•ã’ã€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ç›¸æ‰‹ã®ç¿’ç†Ÿåº¦ï¼ˆWill/Skillï¼‰ã«åˆã‚ã›ã¦ã€é–¢ã‚ã‚Šæ–¹ã®ã‚®ã‚¢ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã®ãŒã‚³ãƒ„ã§ã™ã€‚",
          steps: [
            { t:"S1ï¼ˆæ•™ç¤ºå‹ï¼‰", d:"æ–°äººã‚„æœªçµŒé¨“ã‚¿ã‚¹ã‚¯ã®å ´åˆï¼šå…·ä½“çš„ãªæ‰‹é †ã¾ã§æŒ‡ç¤ºã—ã€é »ç¹ã«ç¢ºèªã™ã‚‹ã€‚ã€Œç´°ã‹ã™ãã‚‹ã€ãã‚‰ã„ã§OKã€‚" },
            { t:"S2ï¼ˆèª¬å¾—å‹ï¼‰", d:"æ…£ã‚Œã¦ããŸã‚‰ï¼šæ‰‹é †ã®ã€Œç†ç”±ã€ã‚’èª¬æ˜ã—ã€è³ªå•ã‚’å—ã‘ä»˜ã‘ã‚‹ã€‚å¯¾è©±ã‚’å¢—ã‚„ã™ã€‚" },
            { t:"S3ï¼ˆå‚åŠ å‹ï¼‰", d:"ã§ãã‚‹ã‘ã©è‡ªä¿¡ãŒãªã„æ™‚ï¼šæŒ‡ç¤ºã¯æ¸›ã‚‰ã—ã€åŠ±ã¾ã—ã‚„ç›¸è«‡ã«ä¹—ã‚‹ã“ã¨ã«å¾¹ã™ã‚‹ã€‚" },
            { t:"S4ï¼ˆå§”ä»»å‹ï¼‰", d:"ç†Ÿç·´è€…ï¼šã‚´ãƒ¼ãƒ«ã¨æœŸé™ã ã‘æ¡ã‚Šã€ã‚ã¨ã¯ä»»ã›ã‚‹ã€‚å ±å‘Šã ã‘ã‚‚ã‚‰ã†ã€‚" }
          ],
          memo: "ä¸å®‰ãªã®ã¯ã€Œç›¸æ‰‹ã®ãƒ¢ãƒ¼ãƒ‰ï¼ˆS1ã€œS4ï¼‰ã€ã¨ã€Œè‡ªåˆ†ã®ãƒ¢ãƒ¼ãƒ‰ã€ãŒåˆã£ã¦ã„ãªã„ã‹ã‚‰ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã¾ãšã¯S1ï¼ˆç´°ã‹ã„æŒ‡ç¤ºï¼‰ã‹ã‚‰å§‹ã‚ã¦ã€å¾ã€…ã«æ‰‹ã‚’é›¢ã™ã®ãŒå®‰å…¨ã§ã™ã€‚"
        },
        visibility: {
          title: "å‡¦æ–¹ç®‹ï¼šç›£è¦–ã§ã¯ãªãã€Œä»•çµ„ã¿ã€ã§è§£æ±ºã™ã‚‹",
          msg: "é€²æ—ãŒè¦‹ãˆãªã„ä¸å®‰ã¯ã€ãƒªãƒ¼ãƒ€ãƒ¼ã®ç²¾ç¥ã‚’å‰Šã‚Šã€ãƒ¡ãƒ³ãƒãƒ¼ã¸ã®ãƒã‚¤ã‚¯ãƒ­ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆï¼ˆéå¹²æ¸‰ï¼‰ã‚’æ‹›ãã¾ã™ã€‚ã“ã‚Œã‚’é˜²ãã®ã¯ã€Œæ„æ€ã€ã§ã¯ãªãã€Œä»•çµ„ã¿ã€ã§ã™ã€‚",
          steps: [
            { t:"å®šæ™‚é€£çµ¡ã®ãƒ«ãƒ¼ãƒ«åŒ–", d:"ã€Œæ¯æ—¥11æ™‚ã«é€²æ—ã‚’1è¡Œãƒãƒ£ãƒƒãƒˆã™ã‚‹ã€ãªã©ã€è² æ‹…ã®å°‘ãªã„å®šæ™‚å ±å‘Šã‚’ãƒ«ãƒ¼ãƒ«ã«ã™ã‚‹ã€‚" },
            { t:"ãƒˆãƒªã‚¬ãƒ¼ã®è¨­å®š", d:"ã€Œ1æ—¥é…ã‚ŒãŸã‚‰ã‚¢ãƒ©ãƒ¼ãƒˆã€ã€Œ30åˆ†è©°ã¾ã£ãŸã‚‰ç›¸è«‡ã€ã¨ã„ã†å…±é€šèªè­˜ï¼ˆDoDï¼‰ã‚’ä½œã‚‹ã€‚" },
            { t:"æƒ…å ±ã®ãƒ—ãƒ«å‹åŒ–", d:"ãƒªãƒ¼ãƒ€ãƒ¼ãŒã„ã¡ã„ã¡èãã«è¡Œãã®ã§ã¯ãªãã€ãƒœãƒ¼ãƒ‰ã‚’è¦‹ã‚Œã°åˆ†ã‹ã‚‹çŠ¶æ…‹ï¼ˆã‚«ãƒ³ãƒãƒ³ç­‰ï¼‰ã‚’ç›®æŒ‡ã™ã€‚" }
          ],
          memo: "ã€Œãªã‚“ã§å ±å‘Šã—ã¦ãã‚Œãªã„ã®ï¼Ÿã€ã¨æ‚©ã‚€ã‚ˆã‚Šã€è‡ªå‹•çš„ã«æƒ…å ±ãŒå…¥ã£ã¦ãã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’è¨­è¨ˆã™ã‚‹ã®ãŒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚‰ã—ã„è§£æ±ºç­–ã§ã™ã€‚"
        },
        shield: {
          title: "å‡¦æ–¹ç®‹ï¼šã€Œç›¾ã«ãªã‚‹ã€ã¨ã„ã†å½¹å‰²å®šç¾©",
          msg: "æ¿æŒŸã¿ã¯ãƒªãƒ¼ãƒ€ãƒ¼æœ€å¤§ã®ã‚¹ãƒˆãƒ¬ã‚¹ã§ã™ãŒã€åŒæ™‚ã«æœ€å¤§ã®ä¾¡å€¤ç™ºæ®ãƒã‚¤ãƒ³ãƒˆã§ã‚‚ã‚ã‚Šã¾ã™ã€‚ã€Œãƒãƒ¼ãƒ ã‚’å®ˆã‚‹é˜²æ³¢å ¤ã€ã¨ã—ã¦ã®å‹•ãã‚’æ„è­˜ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚",
          steps: [
            { t:"é­”æ³•ã®è¨€è‘‰ã€ŒæŒã¡å¸°ã‚Šã¾ã™ã€", d:"ãã®å ´ã§ç„¡ç†ãªè¦æ±‚ã«å³ç­”ã›ãšã€ä¸€æ—¦ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã‚’ç½®ãã€‚ã“ã‚Œã ã‘ã§å³æ­»ã‚’é˜²ã’ã¾ã™ã€‚" },
            { t:"å†…éƒ¨æœŸé™ã®ãƒãƒƒãƒ•ã‚¡", d:"ãŠå®¢æ§˜ã¨ã®æœŸé™ã‚ˆã‚Šã€ãƒãƒ¼ãƒ å†…æœŸé™ã‚’20%å‰å€’ã—ã«ã™ã‚‹ã€‚ãƒˆãƒ©ãƒ–ãƒ«å¯¾å¿œã®ä½™ç™½ã‚’è¨­è¨ˆã™ã‚‹ã€‚" },
            { t:"ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã®æç¤º", d:"ã€Œãã‚Œã‚’ã‚„ã‚‹ã¨ç´æœŸãŒä¼¸ã³ã¾ã™ãŒã€å“è³ªã¨ã©ã¡ã‚‰ã‚’å„ªå…ˆã—ã¾ã™ã‹ï¼Ÿã€ã¨åˆ¤æ–­ã‚’ç›¸æ‰‹ã«è¿”ã™ã€‚" }
          ],
          memo: "ã‚ãªãŸãŒç›¾ã«ãªã‚‹ã“ã¨ã§ã€ãƒ¡ãƒ³ãƒãƒ¼ã¯å®‰å¿ƒã—ã¦é–‹ç™ºã§ãã¾ã™ã€‚ãã®ã€Œå®‰å¿ƒæ„Ÿã€ãŒã€çµæœã¨ã—ã¦ãƒãƒ¼ãƒ ã®ç”Ÿç”£æ€§ã‚’æœ€å¤§åŒ–ã—ã¾ã™ã€‚"
        },
        human: {
          title: "å‡¦æ–¹ç®‹ï¼šäººæ ¼ã¨æ©Ÿèƒ½ã‚’åˆ†ã‘ã‚‹ï¼ˆã‚³ãƒˆã«å‘ã‹ã†ï¼‰",
          msg: "ã€Œå«Œã‚ã‚ŒãŸããªã„ã€ã¨ã„ã†æ„Ÿæƒ…ã¯äººé–“ã¨ã—ã¦æ­£å¸¸ã§ã™ã€‚ã—ã‹ã—ã€ãƒªãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦ã¯ã€Œäººã€ã§ã¯ãªãã€Œã‚³ãƒˆï¼ˆèª²é¡Œãƒ»ã‚³ãƒ¼ãƒ‰ãƒ»æˆæœï¼‰ã€ã«å‘ãåˆã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚",
          steps: [
            { t:"SBIæƒ…å ±ã®æ´»ç”¨", d:"Situationï¼ˆçŠ¶æ³ï¼‰ã€Behaviorï¼ˆè¡Œå‹•ï¼‰ã€Impactï¼ˆå½±éŸ¿ï¼‰ã®äº‹å®Ÿã ã‘ã‚’æ·¡ã€…ã¨ä¼ãˆã‚‹ã€‚" },
            { t:"ä¸»èªã‚’å¤‰ãˆã‚‹", d:"ã€Œã‚ãªãŸãŒãƒ€ãƒ¡ã€ã§ã¯ãªãã€ã€Œã“ã®é€²ã‚æ–¹ã ã¨ã€ã“ã†ã„ã†ãƒªã‚¹ã‚¯ãŒã‚ã‚‹ã€ã¨ä»•çµ„ã¿ã®è©±ã«ã™ã‚‹ã€‚" },
            { t:"å½¹å‰²ã‚’æ¼”ã˜ã‚‹", d:"ã“ã‚Œã¯ã€Œè‡ªåˆ†ã€ãŒè¨€ã£ã¦ã„ã‚‹ã®ã§ã¯ãªãã€ã€Œé€²è¡Œå½¹ã€ã¨ã„ã†å¸½å­ã‚’è¢«ã£ã¦è¨€ã£ã¦ã„ã‚‹ã€ã¨å‰²ã‚Šåˆ‡ã‚‹ã€‚" }
          ],
          memo: "å³ã—ã„ã“ã¨ã‚’è¨€ã†ã®ã‚‚ã€ãƒãƒ¼ãƒ ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®ˆã‚‹ãŸã‚ã®ã€Œè¦ªåˆ‡ã€ã§ã™ã€‚äº‹å®Ÿãƒ™ãƒ¼ã‚¹ã§è©±ã›ã°ã€ãƒ—ãƒ­åŒå£«ã®ä¿¡é ¼ã¯å£Šã‚Œã¾ã›ã‚“ã€‚"
        }
      };
      return db[anxietyKey];
    }

    // PART 3: COMMUNICATION
    function getCommunicationHints(expVal, coworkerKeys) {
      const db = {
        internal_boss: {
          junior: {
            icon:"ğŸ‘¨â€ğŸ’¼", title:"å¯¾ ä¸Šå¸ï¼ˆå…±æœ‰ãƒ»å­¦ç¿’ï¼‰",
            advice:"ã‚µãƒ—ãƒ©ã‚¤ã‚ºã‚’ãªãã™",
            bad:"è‡ªå·±åˆ¤æ–­ã§æŠ±ãˆè¾¼ã¿ã€æ‰‹é…ã‚Œã«ãªã£ã¦ã‹ã‚‰å…±æœ‰ã™ã‚‹ã€‚",
            good:"ã€ŒçŠ¶æ³ã¯æ‚ªã„ã§ã™ãŒã€æ¡ˆã¯ã‚ã‚Šã¾ã™ã€ã¨æœ€çŸ­ã§å…±æœ‰ã™ã‚‹ã€‚",
            mindset:"ä¸Šå¸ã¯ã€Œè©•ä¾¡è€…ã€ã ã‘ã§ãªãã€Œãƒªã‚½ãƒ¼ã‚¹ã€ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚é æ…®ã›ãšã€å­¦ã³ã®ãŸã‚ã«ä½¿ã„ã¾ã—ã‚‡ã†ã€‚"
          },
          middle: {
            icon:"ğŸ‘¨â€ğŸ’¼", title:"å¯¾ ä¸Šå¸ï¼ˆææ¡ˆï¼‰",
            advice:"é¸æŠè‚¢ã‚’æŒã£ã¦ã„ã",
            bad:"ã€Œã©ã†ã™ã‚Œã°ã„ã„ã§ã™ã‹ã€ã¨ä¸¸æŠ•ã’ã™ã‚‹ã€‚",
            good:"ã€ŒAæ¡ˆã¨Bæ¡ˆãŒã‚ã‚Šã€ç§ã¯Aæ¡ˆæ¨å¥¨ã§ã™ã€ã¨è‡ªåˆ†ã®æ„è¦‹ã‚’æ·»ãˆã‚‹ã€‚",
            mindset:"ä¸Šå¸ã®æ™‚é–“ã‚’å¥ªã‚ãªã„ã€Œåˆ¤æ–­ã—ã‚„ã™ã„å½¢ã€ã§æ¸¡ã™ã¨ã€ä¿¡é ¼ã‚³ã‚¹ãƒˆãŒä¸‹ãŒã‚Šã¾ã™ã€‚"
          },
          senior: {
            icon:"ğŸ‘¨â€ğŸ’¼", title:"å¯¾ ä¸Šå¸ï¼ˆåˆ¤æ–­æ”¯æ´ï¼‰",
            advice:"è¦–åº§ã‚’åˆã‚ã›ã‚‹",
            bad:"æŠ€è¡“çš„ãªæ­£ã—ã•ã ã‘ã§èª¬å¾—ã—ã‚ˆã†ã¨ã™ã‚‹ã€‚",
            good:"ã€Œã“ã®è² å‚µã‚’è¿”ã™ã¨ã€æ¥æœŸã®é–‹ç™ºé€Ÿåº¦ãŒ2å€ã«ãªã‚Šã¾ã™ã€ã¨ãƒ¡ãƒªãƒƒãƒˆã§èªã‚‹ã€‚",
            mindset:"ä¸Šå¸ãŒè¦‹ã¦ã„ã‚‹æ™¯è‰²ï¼ˆç´æœŸãƒ»ã‚³ã‚¹ãƒˆãƒ»ãƒªã‚¹ã‚¯ï¼‰ã‚’æƒ³åƒã—ã€åŒã˜åœ°å›³ã§è©±ã™ã¨é€šã‚Šã‚„ã™ã„ã§ã™ã€‚"
          },
          veteran:{
            icon:"ğŸ‘¨â€ğŸ’¼", title:"å¯¾ ä¸Šå¸ï¼ˆãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼‰",
            advice:"èª²é¡Œã‚’å®šç¾©ã™ã‚‹",
            bad:"è¨€ã‚ã‚ŒãŸã“ã¨ã ã‘ã‚’ã‚„ã‚‹ã€‚",
            good:"ã€Œä»Šã®äº‹æ¥­ãƒ•ã‚§ãƒ¼ã‚ºãªã‚‰ã€æ©Ÿèƒ½è¿½åŠ ã‚ˆã‚Šå®‰å®šæ€§ã‚’å„ªå…ˆã™ã¹ãã§ã¯ï¼Ÿã€ã¨å‰æã‹ã‚‰å•ã†ã€‚",
            mindset:"ä¸Šå¸ã®ã€Œå³è…•ã€ã¨ã—ã¦ã€çµ„ç¹”å…¨ä½“ã®æœ€é©è§£ã‚’ä¸€ç·’ã«æ¢ã™ã‚¹ã‚¿ãƒ³ã‚¹ãŒä¾¡å€¤ã«ãªã‚Šã¾ã™ã€‚"
          }
        },
        internal_junior: {
          junior: {
            icon:"ğŸ£", title:"å¯¾ å¾Œè¼©ï¼ˆå…±æ„Ÿï¼‰",
            advice:"ä¸€ç·’ã«æ‚©ã‚€",
            bad:"å…ˆè¼©é¢¨ã‚’å¹ã‹ã›ã¦ã€çŸ¥ã£ãŸã‹ã¶ã‚Šã‚’ã™ã‚‹ã€‚",
            good:"ã€Œç§ã‚‚åˆ†ã‹ã‚‰ãªã‹ã£ãŸã‹ã‚‰ä¸€ç·’ã«èª¿ã¹ã‚ˆã†ã€ã¨æ¨ªã«ä¸¦ã¶ã€‚",
            mindset:"æ•™ãˆã‚‹ã“ã¨ã¯å­¦ã¶ã“ã¨ã€‚è³ªå•ã¯è‡ªåˆ†ã®ç†è§£åº¦ã‚’ä¸Šã’ã‚‹ãƒãƒ£ãƒ³ã‚¹ã§ã™ã€‚"
          },
          middle: {
            icon:"ğŸ£", title:"å¯¾ å¾Œè¼©ï¼ˆã‚¬ã‚¤ãƒ‰ï¼‰",
            advice:"ç­”ãˆã‚ˆã‚Šèª¿ã¹æ–¹",
            bad:"ã™ãã«æ­£è§£ã®ã‚³ãƒ¼ãƒ‰ã‚’æ•™ãˆã‚‹ã€‚",
            good:"ã€Œã©ã®ãƒ­ã‚°ã‚’è¦‹ãŸï¼Ÿã€ã€Œã©ã†æ¤œç´¢ã—ãŸï¼Ÿã€ã¨è§£æ±ºãƒ—ãƒ­ã‚»ã‚¹ã‚’ã‚¬ã‚¤ãƒ‰ã™ã‚‹ã€‚",
            mindset:"ã€Œé­šã‚’ä¸ãˆã‚‹ã®ã§ã¯ãªãã€é­šã®é‡£ã‚Šæ–¹ã‚’æ•™ãˆã‚‹ã€ã®ãŒã€ãŠäº’ã„ã®ãŸã‚ã«ãªã‚Šã¾ã™ã€‚"
          },
          senior: {
            icon:"ğŸ£", title:"å¯¾ å¾Œè¼©ï¼ˆè‚²æˆï¼‰",
            advice:"å¤±æ•—ã®æŒ¯ã‚Šè¿”ã‚Š",
            bad:"å¤±æ•—ã—ãªã„ã‚ˆã†ã«å…ˆå›ã‚Šã—ã¦å…¨éƒ¨ãŠè†³ç«‹ã¦ã™ã‚‹ã€‚",
            good:"å¤±æ•—ã—ãŸæ™‚ã¯ã€Œãªãœï¼Ÿã€ã¨è©°ã‚ãšã€ã€Œæ¬¡ã©ã†ã™ã‚Œã°é˜²ã’ã‚‹ã‹ï¼Ÿã€ã¨æœªæ¥æ€è€ƒã§ä¸€ç·’ã«è€ƒãˆã‚‹ï¼ˆSBIæƒ…å ±ï¼‰ã€‚",
            mindset:"ã‚³ãƒ”ãƒ¼ã‚’ä½œã‚‹ã®ã§ã¯ãªãã€è‡ªèµ°ã§ãã‚‹äººã‚’å¢—ã‚„ã™ã®ãŒã‚´ãƒ¼ãƒ«ã§ã™ã€‚"
          },
          veteran:{
            icon:"ğŸ£", title:"å¯¾ å¾Œè¼©ï¼ˆæ–‡åŒ–ï¼‰",
            advice:"å¿ƒç†çš„å®‰å…¨",
            bad:"ã€Œãªã‚“ã§ãã‚“ãªã“ã¨ã—ãŸã®ï¼Ÿã€ã¨è©°ã‚ã‚‹ã€‚",
            good:"ã€Œå†ç™ºé˜²æ­¢ã®ãŸã‚ã«ã€ä»•çµ„ã¿ã®ã©ã“ã‚’ç›´ãã†ã‹ï¼Ÿã€ã¨æœªæ¥ã‚’å‘ãã€‚",
            mindset:"å€‹äººã®ãƒŸã‚¹ã‚’è²¬ã‚ãšã€ä»•çµ„ã¿ã‚’ç–‘ã†å§¿å‹¢ã‚’è¦‹ã›ã‚‹ã“ã¨ã§ã€æŒ‘æˆ¦ã§ãã‚‹æ–‡åŒ–ãŒè‚²ã¡ã¾ã™ã€‚"
          }
        },
        internal_peer: {
          junior: {
            icon:"ğŸ¤", title:"å¯¾ åŒåƒšï¼ˆå”åŠ›ï¼‰",
            advice:"GIVEã‹ã‚‰å§‹ã‚ã‚‹",
            bad:"è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ã«é›†ä¸­ã—ã™ãã¦å‘¨å›²ã‚’è¦‹ãªã„ã€‚",
            good:"æ‰‹ãŒç©ºã„ãŸã‚‰ã€Œä½•ã‹æ‰‹ä¼ãˆã¾ã™ã‹ï¼Ÿã€ã¨å£°ã‚’ã‹ã‘ã‚‹ã€‚",
            mindset:"å›°ã£ãŸæ™‚ã«åŠ©ã‘ãŒè¿”ã£ã¦ãã‚‹ã®ã¯ã€æ™®æ®µã‹ã‚‰åŠ©ã‘ã¦ã„ã‚‹äººã§ã™ã€‚"
          },
          middle: {
            icon:"ğŸ¤", title:"å¯¾ åŒåƒšï¼ˆé€£æºï¼‰",
            advice:"ãƒœãƒ¼ãƒ«ã‚’æ‹¾ã†",
            bad:"ã€Œãã‚Œã¯ç§ã®æ‹…å½“ã˜ã‚ƒãªã„ã€ã¨å¢ƒç•Œç·šã‚’å¼•ãã€‚",
            good:"ãƒãƒ†ãƒ³ãƒ’ãƒƒãƒˆï¼ˆè½ã¡ãã†ãªãƒœãƒ¼ãƒ«ï¼‰ã‚’è¦‹ã¤ã‘ãŸã‚‰ã€ã¾ãšæ‹¾ã£ã¦ã‹ã‚‰åˆ†æ‹…ã‚’ç›¸è«‡ã™ã‚‹ã€‚",
            mindset:"è‡ªåˆ†ã®ç¯„å›²ã‚’å°‘ã—ã¯ã¿å‡ºã—ã¦å‹•ãã¨ã€ãƒãƒ¼ãƒ ã®éš™é–“ãŒåŸ‹ã¾ã‚Šã€æ„Ÿè¬ã•ã‚Œã¾ã™ã€‚"
          },
          senior: {
            icon:"ğŸ¤", title:"å¯¾ åŒåƒšï¼ˆå°Šé‡ï¼‰",
            advice:"äººæ ¼ã¨ã‚³ãƒ¼ãƒ‰ã‚’åˆ†ã‘ã‚‹",
            bad:"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ç›¸æ‰‹ã‚’è©°ã‚ã¦èç¸®ã•ã›ã‚‹ã€‚",
            good:"ä¸»èªã‚’ã€Œã‚ãªãŸã€ã§ã¯ãªãã€Œã‚³ãƒ¼ãƒ‰ã€ã«ã—ã¦è­°è«–ã™ã‚‹ã€‚",
            mindset:"å¿ƒç†çš„å®‰å…¨æ€§ã¯å‹æ‰‹ã«ç”Ÿã¾ã‚Œã¾ã›ã‚“ã€‚çµŒé¨“è€…ãŒå®ˆã£ã¦åˆã‚ã¦å›ã‚Šå§‹ã‚ã¾ã™ã€‚"
          },
          veteran:{
            icon:"ğŸ¤", title:"å¯¾ åŒåƒšï¼ˆè§¦åª’ï¼‰",
            advice:"å¼·ã¿ã‚’ç¹‹ã",
            bad:"è‡ªåˆ†ä¸€äººã§è§£æ±ºã—ã‚ˆã†ã¨ã™ã‚‹ã€‚",
            good:"ã€Œã“ã®ä»¶ãªã‚‰Aã•ã‚“ãŒè©³ã—ã„ã‚ˆã€ã¨äººã¨äººã‚’ç¹‹ãã€ãƒãƒ¼ãƒ ã®ç·åŠ›ã‚’ä¸Šã’ã‚‹ã€‚",
            mindset:"è‡ªåˆ†ãŒãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã«ãªã‚‰ãšã€æƒ…å ±ã¨äººãŒã‚¹ãƒ ãƒ¼ã‚ºã«æµã‚Œã‚‹ãƒãƒ–ã«ãªã‚Šã¾ã™ã€‚"
          }
        },
        client_boss: {
          junior: {
            icon:"ğŸ¢", title:"å¯¾ ãŠå®¢æ§˜å´",
            advice:"è¨˜éŒ²ã‚’æ®‹ã™",
            bad:"å£é ­ã§é€²ã‚ã¦ã€Œè¨€ã£ãŸè¨€ã‚ãªã„ã€ã«ãªã‚‹ã€‚",
            good:"æ±ºå®šäº‹é …ã¯è­°äº‹éŒ²ã‚„ãƒã‚±ãƒƒãƒˆã«æ®‹ã—ã€ãƒªãƒ³ã‚¯ã‚’é€ã‚‹ã€‚",
            mindset:"ä¿¡é ¼ã¯æ­£ç¢ºãªè¨˜éŒ²ã‹ã‚‰ç”Ÿã¾ã‚Œã¾ã™ã€‚è‡ªåˆ†ã¨ãƒãƒ¼ãƒ ã‚’å®ˆã‚‹ç›¾ã«ãªã‚Šã¾ã™ã€‚"
          },
          middle: {
            icon:"ğŸ¢", title:"å¯¾ ãŠå®¢æ§˜å´",
            advice:"æœŸå¾…å€¤ã‚’èª¿æ•´",
            bad:"ãã®å ´ã§ã€Œã§ãã¾ã™ã€ã¨å®‰è«‹ã‘åˆã„ã™ã‚‹ã€‚",
            good:"ã€ŒæŒã¡å¸°ã£ã¦ç¢ºèªã—ã¾ã™ã€ã¨ä¸€æ—¦ã‚¯ãƒƒã‚·ãƒ§ãƒ³ã‚’ç½®ãã€‚",
            mindset:"å³ç­”ã§ããªã„ã“ã¨ã¯ä¿ç•™ã™ã‚‹å‹‡æ°—ãŒã€çµæœçš„ã«ãƒˆãƒ©ãƒ–ãƒ«ã‚’é˜²ãã¾ã™ã€‚"
          },
          senior: {
            icon:"ğŸ¢", title:"å¯¾ ãŠå®¢æ§˜å´",
            advice:"ç›¾ã«ãªã‚‹ï¼ˆãƒãƒƒãƒ•ã‚¡ï¼‰",
            bad:"ç„¡ç†ãªè¦æœ›ã‚’å…¨éƒ¨èã„ã¦ç¾å ´ã‚’ç–²å¼Šã•ã›ã‚‹ã€‚",
            good:"ã€Œãã‚Œã‚’ã‚„ã‚‹ã¨ç´æœŸãŒé…ã‚Œã¾ã™ã€ã¨ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’ç¤ºã—ã€å†…éƒ¨æœŸé™ã«ã¯20%ã®ãƒãƒƒãƒ•ã‚¡ã‚’æŒã¤ã€‚",
            mindset:"å¾¡ç”¨èãã§ã¯ãªãã€æŠ€è¡“ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã—ã¦ä¾¡å€¤ã‚’æœ€å¤§åŒ–ã™ã‚‹è¦–ç‚¹ãŒåŠ¹ãã¾ã™ã€‚"
          },
          veteran:{
            icon:"ğŸ¢", title:"å¯¾ ãŠå®¢æ§˜å´",
            advice:"ä¿¡é ¼è²¯é‡‘",
            bad:"å¥‘ç´„ç¯„å›²å†…ã®ã“ã¨ã—ã‹ã—ãªã„ã€‚",
            good:"ç›¸æ‰‹ã®ãƒ“ã‚¸ãƒã‚¹èª²é¡Œã«èˆˆå‘³ã‚’æŒã¡ã€ã€ŒæŠ€è¡“ã§ã©ã†è§£æ±ºã§ãã‚‹ã‹ã€ã‚’ææ¡ˆã™ã‚‹ã€‚",
            mindset:"ç™ºæ³¨è€…ã¨å—æ³¨è€…ã‚’è¶…ãˆãŸã€ŒåŒã˜ã‚´ãƒ¼ãƒ«ã‚’ç›®æŒ‡ã™ä»²é–“ã€ã¨ã—ã¦ã®ä¿¡é ¼ã‚’ç¯‰ãã¾ã™ã€‚"
          }
        },
        partner_junior: {
          junior: {
            icon:"ğŸ—ï¸", title:"å¯¾ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼",
            advice:"æ•¬æ„ã‚’å¿˜ã‚Œãªã„",
            bad:"ä¸‹è«‹ã‘ã®ã‚ˆã†ã«æ‰±ã†ã€‚",
            good:"åŒã˜ã‚´ãƒ¼ãƒ«ã‚’ç›®æŒ‡ã™ä»²é–“ã¨ã—ã¦ã€æ„Ÿè¬ã¨æ•¬æ„ã‚’ç¤ºã™ã€‚",
            mindset:"æ‰€å±ãŒé•ã£ã¦ã‚‚ã€åŒã˜ãƒãƒ¼ãƒ ã§ã™ã€‚ä¸å¯§ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ‘©æ“¦ã‚’æ¸›ã‚‰ã—ã¾ã™ã€‚"
          },
          middle: {
            icon:"ğŸ—ï¸", title:"å¯¾ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼",
            advice:"æ–‡è„ˆã‚’å…±æœ‰",
            bad:"ä½œæ¥­ã ã‘ä¾é ¼ã—ã¦ã€èƒŒæ™¯ã‚„ã‚´ãƒ¼ãƒ«ã‚’ä¼ãˆãªã„ã€‚",
            good:"ã€Œãªãœã“ã®æ©Ÿèƒ½ãŒå¿…è¦ã‹ã€ã‚’ä¼ãˆã€ã‚ˆã‚Šè‰¯ã„å®Ÿè£…æ–¹æ³•ãŒã‚ã‚Œã°ææ¡ˆã—ã¦ã‚‚ã‚‰ã†ã€‚",
            mindset:"å˜ãªã‚‹ä½œæ¥­è€…ã§ã¯ãªãã€å°‚é–€å®¶ã¨ã—ã¦é ¼ã‚‹ã“ã¨ã§ã€è³ªã®é«˜ã„ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆãŒè¿”ã£ã¦ãã¾ã™ã€‚"
          },
          senior: {
            icon:"ğŸ—ï¸", title:"å¯¾ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼",
            advice:"ã‚´ãƒ¼ãƒ«ã‚’æ¡ã‚‹",
            bad:"ã€Œã„ã„æ„Ÿã˜ã«ã€ã§ä¸¸æŠ•ã’ã™ã‚‹ã€‚",
            good:"ã€Œä½•ãŒã§ããŸã‚‰å®Œäº†ã‹ï¼ˆDoDï¼‰ã€ã‚’æ˜ç¢ºã«æ¡ã‚Šã€æ‰‹æˆ»ã‚Šã‚’é˜²ãã€‚",
            mindset:"æƒ…å ±ã®éå¯¾ç§°æ€§ã‚’æ¸›ã‚‰ã™ã»ã©ã€ç›¸æ‰‹ãŒè‡ªå¾‹çš„ã«å‹•ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚"
          },
          veteran:{
            icon:"ğŸ—ï¸", title:"å¯¾ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼",
            advice:"ç’°å¢ƒã‚’æ•´ãˆã‚‹",
            bad:"ä½¿ã„ã«ãã„ç’°å¢ƒã‚„ãƒ„ãƒ¼ãƒ«ã‚’æ”¾ç½®ã™ã‚‹ã€‚",
            good:"ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒåƒãã‚„ã™ã„æ¨©é™ã‚„ç’°å¢ƒã‚’æ•´ãˆã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€å¤§åŒ–ã™ã‚‹ã€‚",
            mindset:"ç›¸æ‰‹ã®ç”Ÿç”£æ€§ã‚’ä¸Šã’ã‚‹ã“ã¨ãŒã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®æˆåŠŸã¸ã®è¿‘é“ã§ã™ã€‚"
          }
        },
        non_engineer: {
          junior: {
            icon:"ğŸ¨", title:"å¯¾ éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢",
            advice:"ç¿»è¨³ã™ã‚‹",
            bad:"æŠ€è¡“ç”¨èªï¼ˆDBã€APIãªã©ï¼‰ã‚’ãã®ã¾ã¾ä½¿ã£ã¦è©±ã™ã€‚",
            good:"ã€Œç”»é¢ã‚’è¡¨ç¤ºã™ã‚‹ä»•çµ„ã¿ã€ãªã©ã€ç›¸æ‰‹ã®è¨€è‘‰ã«ç½®ãæ›ãˆã‚‹ã€‚",
            mindset:"ç›¸æ‰‹ã¯ã€ŒæŠ€è¡“ãŒåˆ†ã‹ã‚‰ãªã„ã€ã®ã§ã¯ãªãã€Œå°‚é–€å¤–ã€ãªã ã‘ã§ã™ã€‚ãƒªã‚¹ãƒšã‚¯ãƒˆã‚’æŒã£ã¦ç¿»è¨³ã—ã¾ã—ã‚‡ã†ã€‚"
          },
          middle: {
            icon:"ğŸ¨", title:"å¯¾ éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢",
            advice:"è¦–è¦šåŒ–ã™ã‚‹",
            bad:"å£é ­ã‚„ãƒ†ã‚­ã‚¹ãƒˆã ã‘ã§ä»•æ§˜ã‚’è©°ã‚ã‚ˆã†ã¨ã™ã‚‹ã€‚",
            good:"å›³ã‚„ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æ›¸ã„ã¦ã€Œã“ã†ã„ã†ã“ã¨ã§ã™ã‹ï¼Ÿã€ã¨ç¢ºèªã™ã‚‹ã€‚",
            mindset:"ç™¾èã¯ä¸€è¦‹ã«ã—ã‹ãšã€‚å‹•ãã‚‚ã®ã‚„çµµã‚’è¦‹ã›ã‚‹ã“ã¨ãŒã€èªè­˜ã‚ºãƒ¬ã‚’é˜²ãæœ€çŸ­ãƒ«ãƒ¼ãƒˆã§ã™ã€‚"
          },
          senior: {
            icon:"ğŸ¨", title:"å¯¾ éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢",
            advice:"ä¾¡å€¤ã§è©±ã™",
            bad:"ã€ŒæŠ€è¡“çš„ã«ç„¡ç†ã§ã™ã€ã¨ã ã‘ä¼ãˆã¦ã‚·ãƒ£ãƒƒãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹ã€‚",
            good:"ã€Œãã‚Œã‚’å®Ÿç¾ã™ã‚‹ã¨è¡¨ç¤ºãŒ3ç§’é…ããªã‚Šã¾ã™ãŒã€è¨±å®¹ã§ãã¾ã™ã‹ï¼Ÿã€ã¨ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã‚’ç¤ºã™ã€‚",
            mindset:"å…±é€šè¨€èªã¯ã€Œã‚³ãƒ¼ãƒ‰ã€ã§ã¯ãªãã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤ã€ã§ã™ã€‚ãã“ã‚’æ¡ã‚‹ã¨è­°è«–ãŒã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚Šã¾ã™ã€‚"
          },
          veteran:{
            icon:"ğŸ¨", title:"å¯¾ éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢",
            advice:"å®Ÿç¾æ–¹æ³•ã‚’å‰µã‚‹",
            bad:"ä»•æ§˜ãŒæ±ºã¾ã‚‹ã®ã‚’å¾…ã¤ã€‚",
            good:"ã€Œã“ã†ã„ã†æŠ€è¡“ã‚’ä½¿ãˆã°ã€ã‚‚ã£ã¨ç°¡å˜ã«å®Ÿç¾ã§ãã¾ã™ã‚ˆã€ã¨æŠ€è¡“å´ã‹ã‚‰ææ¡ˆã™ã‚‹ã€‚",
            mindset:"æŠ€è¡“ã®å¼•ãå‡ºã—ã‚’ä½¿ã£ã¦ã€ãƒ“ã‚¸ãƒã‚¹ã®å¯èƒ½æ€§ã‚’åºƒã’ã‚‹ææ¡ˆãŒã§ãã¾ã™ã€‚"
          }
        },
        solo: {
          junior: {
            icon:"ğŸ’»", title:"ã‚½ãƒ­ãƒ¯ãƒ¼ã‚¯",
            advice:"è©°ã¾ã‚Šã‚’é˜²ã",
            bad:"ä¸€äººã§ä½•æ™‚é–“ã‚‚æ‚©ã¿ç¶šã‘ã¦æ™‚é–“ã‚’æ¶ˆè²»ã™ã‚‹ã€‚",
            good:"æ™‚é–“ã‚’åŒºåˆ‡ã‚Šã€AIã‚„ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ»ä¸Šå¸ã«ç›¸è«‡ã™ã‚‹ã€‚",
            mindset:"å­¤ç‹¬ã¯è¦–é‡ã‚’ç‹­ã‚ã¾ã™ã€‚æ„è­˜çš„ã«å¤–éƒ¨ã®ç›®ã‚’å…¥ã‚Œã¾ã—ã‚‡ã†ã€‚"
          },
          middle: {
            icon:"ğŸ’»", title:"ã‚½ãƒ­ãƒ¯ãƒ¼ã‚¯",
            advice:"ãƒ­ã‚°ã‚’æ®‹ã™",
            bad:"æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’æ®‹ã•ãšã€å®Œæˆå“ã ã‘ä½œã‚‹ã€‚",
            good:"è©°ã¾ã£ãŸçµŒç·¯ã‚„è©¦ã—ãŸã“ã¨ã‚’ãƒ¡ãƒ¢ã«æ®‹ã—ã€æœªæ¥ã®è‡ªåˆ†ã‚„ä»–äººãŒè¿½ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚",
            mindset:"éç¨‹ã®è¨˜éŒ²ã¯ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®éš›ã®å¼·åŠ›ãªæ­¦å™¨ã«ãªã‚Šã¾ã™ã€‚"
          },
          senior: {
            icon:"ğŸ’»", title:"ã‚½ãƒ­ãƒ¯ãƒ¼ã‚¯",
            advice:"æœªæ¥ã®è‡ªåˆ†ã¸",
            bad:"è‡ªåˆ†ã—ã‹èª­ã¾ãªã„ã‹ã‚‰ã¨æ±šã„ã‚³ãƒ¼ãƒ‰ã‚’æ”¾ç½®ã™ã‚‹ã€‚",
            good:"åŠå¹´å¾Œã®è‡ªåˆ†ã®ãŸã‚ã«READMEã‚„ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ®‹ã™ã€‚",
            mindset:"èª°ã‚‚è¦‹ã¦ã„ãªã„æ™‚ã®è¦å¾‹ã«ã€ãƒ—ãƒ­ã¨ã—ã¦ã®å¼·ã•ãŒå‡ºã¾ã™ã€‚"
          },
          veteran:{
            icon:"ğŸ’»", title:"ã‚½ãƒ­ãƒ¯ãƒ¼ã‚¯",
            advice:"è‡ªå‹•åŒ–ã™ã‚‹",
            bad:"æ¯å›åŒã˜æ‰‹ä½œæ¥­ã‚’ç¹°ã‚Šè¿”ã™ã€‚",
            good:"ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦è‡ªå‹•åŒ–ã—ã€è‡ªåˆ†ä»¥å¤–ã®èª°ã§ã‚‚ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚",
            mindset:"ã€Œè‡ªåˆ†ãŒã‚„ã‚‰ãªãã¦ã„ã„çŠ¶æ…‹ã€ã‚’ä½œã‚‹ã“ã¨ãŒã€æ¬¡ã®ä¾¡å€¤ã‚’ç”Ÿã‚€æ™‚é–“ã‚’å‰µã‚Šã¾ã™ã€‚"
          }
        }
      };

      return coworkerKeys.map(k => db[k] ? db[k][expVal] : null).filter(Boolean);
    }

    // PART 4: FOCUS
    function getFocusBlock(expVal, roleVal, focusVal) {
      const isJunior = (expVal === "junior" || expVal === "middle");
      const isManager = (roleVal === "manager");

      const data = {
        people: {
          name:"é–¢ã‚ã‚Šæ–¹ã«é‡å¿ƒãŒã‚ã‚‹",
          tagline:"ç›¸è«‡ãƒ»èª¿æ•´ãƒ»è‚²æˆã‚’æ”¯ãˆã‚‹å‹•ããŒå¾—æ„ã«ãªã‚Šã‚„ã™ã„",
          strengths:"å®‰å¿ƒã—ã¦ç›¸è«‡ã§ãã‚‹ç©ºæ°—ã‚’ä½œã‚Šã€å‘¨å›²ã®åŠ›ã‚’å¼•ãå‡ºã›ã‚‹ã“ã¨ãŒå¼·ã¿ã«ãªã‚Šã‚„ã™ã„ã§ã™ã€‚",
          juniorChecklist:[
            { title:"å°ã•ãªå¤‰åŒ–ã«æ°—ã¥ã", desc:"ã€Œå…ƒæ°—ãªã„ãªã€ã€Œè©°ã¾ã£ã¦ãã†ã ãªã€ã¨ã„ã†ã‚µã‚¤ãƒ³ã‚’æ‹¾ã„ã€å£°ã‚’ã‹ã‘ã‚‹ã€‚" },
            { title:"æ„Ÿè¬ã‚’è¨€è‘‰ã«ã™ã‚‹", desc:"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„é›‘å‹™ã¸ã®ã€Œã‚ã‚ŠãŒã¨ã†ã€ã‚’æ„è­˜çš„ã«ä¼ãˆã€ãƒãƒ¼ãƒ ã®æ½¤æ»‘æ²¹ã«ãªã‚‹ã€‚" }
          ],
          seniorChecklist:[
            { title:"å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é¿ã‘ãªã„", desc:"é›°å›²æ°—ã‚’å®ˆã‚Šã¤ã¤ã‚‚ã€æˆé•·ã«å¿…è¦ãªæŒ‡æ‘˜ã¯ä¸å¯§ã«ä¼ãˆã‚‹ã€‚" },
            { title:"ç§°è³›ã‚’ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚ˆãè¨€è‘‰ã«ã™ã‚‹", desc:"å°ã•ãªå‰é€²ã‚„åŠ©ã‘åˆã„ã‚’è¦‹ã¤ã‘ãŸã‚‰ã€ãã®å ´ã§çŸ­ãè¨€èªåŒ–ã™ã‚‹ã€‚" }
          ],
          theme: { accent:"#0d9488", soft:"#ccfbf1" }
        },
        tech: {
          name:"æŠ€è¡“ã«é‡å¿ƒãŒã‚ã‚‹",
          tagline:"å“è³ªã‚„å®Ÿè£…åˆ¤æ–­ã‚’æ”¯ãˆã‚‹å‹•ããŒå¾—æ„ã«ãªã‚Šã‚„ã™ã„",
          strengths:"æŠ€è¡“çš„ãªè«–ç‚¹ã‚’æ•´ç†ã—ã€å“è³ªãƒ»ä¿å®ˆæ€§ã®åˆ¤æ–­ã‚’æ”¯ãˆã‚‰ã‚Œã‚‹ã“ã¨ãŒå¼·ã¿ã«ãªã‚Šã‚„ã™ã„ã§ã™ã€‚",
          juniorChecklist:[
            { title:"åŸºç¤ã‚’å›ºã‚ã‚‹", desc:"è¨€èªä»•æ§˜ã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä»•çµ„ã¿ã‚’ç†è§£ã—ã€ã€Œãªãœå‹•ãã‹ã€ã‚’èª¬æ˜ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚" },
            { title:"å¯èª­æ€§ã‚’æ„è­˜ã™ã‚‹", desc:"å‹•ã‘ã°OKã§ã¯ãªãã€ä»–äººãŒèª­ã‚“ã§è¿·ã‚ãªã„ã‚³ãƒ¼ãƒ‰ã‚’ç›®æŒ‡ã™ã€‚" }
          ],
          seniorChecklist:[
            { title:"æ–¹é‡ã ã‘æ¡ã£ã¦ä»»ã›ã‚‹", desc:"è‡ªåˆ†ãŒæ›¸ã‘ã°æ—©ã„å ´é¢ã»ã©ã€æ–¹å‘ã ã‘ç¤ºã—å®Ÿè£…ã¯ä»»ã›ã‚‹ã€‚" },
            { title:"åˆ¤æ–­ç†ç”±ã‚’æ®‹ã™", desc:"æŠ€è¡“é¸å®šã®Pros/Consã‚’çŸ­ãæ®‹ã—ã€ãƒãƒ¼ãƒ ã®è³‡ç”£ã«ã™ã‚‹ã€‚" }
          ],
          theme: { accent:"#0284c7", soft:"#e0f2fe" }
        },
        biz: {
          name:"å…¨ä½“ã«é‡å¿ƒãŒã‚ã‚‹",
          tagline:"å„ªå…ˆé †ä½ã‚„æœŸå¾…å€¤ã‚’æƒãˆã‚‹å‹•ããŒå¾—æ„ã«ãªã‚Šã‚„ã™ã„",
          strengths:"ç›®çš„ãƒ»ä¾¡å€¤ãƒ»æœŸé™ãƒ»ã‚³ã‚¹ãƒˆã®ãƒãƒ©ãƒ³ã‚¹ã‚’è¦‹ã¦ã€å„ªå…ˆé †ä½ã‚„æœŸå¾…å€¤ã‚’æ•´ãˆã‚‹ã“ã¨ãŒå¼·ã¿ã«ãªã‚Šã‚„ã™ã„ã§ã™ã€‚",
          juniorChecklist:[
            { title:"èª°ã®èª²é¡Œã‹æ„è­˜ã™ã‚‹", desc:"ä½œã£ã¦ã„ã‚‹æ©Ÿèƒ½ãŒèª°ã®ä½•ã‚’æ¥½ã«ã™ã‚‹ã®ã‹ã‚’è¨€è‘‰ã«ã™ã‚‹ã€‚" },
            { title:"æ•°å­—ã‚„æŒ‡æ¨™ã«è§¦ã‚Œã‚‹", desc:"å¯èƒ½ãªã‚‰KPIã‚„é‹ç”¨æŒ‡æ¨™ã«è§¦ã‚Œã€æ„æ€æ±ºå®šã®ææ–™ã«æ…£ã‚Œã‚‹ã€‚" }
          ],
          seniorChecklist:[
            { title:"è¨€ã„æ›ãˆã‚‹åŠ›ã‚’ç£¨ã", desc:"æŠ€è¡“ã®è©±ã‚’ã€ä¾¡å€¤ãƒ»ã‚³ã‚¹ãƒˆãƒ»ãƒªã‚¹ã‚¯ã®è¨€è‘‰ã«ç¿»è¨³ã—ã¦ä¼ãˆã‚‹ã€‚" },
            { title:"ç¾å ´ã®é˜²æ³¢å ¤ã«ãªã‚‹", desc:"ç„¡ç†ãªè¦æ±‚ã«ã¯ãƒ‡ãƒ¼ã‚¿ã‚„æ ¹æ‹ ã‚’æ·»ãˆã¦äº¤æ¸‰ã—ã€ç–²å¼Šã‚’é˜²ãã€‚" }
          ],
          theme: { accent:"#7c3aed", soft:"#f3e8ff" }
        }
      };

      const d = data[focusVal];
      if (!d) return null;
      return { ...d, checklist: isJunior ? d.juniorChecklist : d.seniorChecklist };
    }

    // PART 5: SHARE
    function getShareHints(expVal, roleVal, shareStyle) {
      const isManagerSide = (roleVal === "lead" || roleVal === "manager");
      const help = { head:"å›°ã£ãŸæ™‚ã¯", textParts:[{t:"text", v:"å…±æœ‰ãŒã†ã¾ãã„ã‹ãªã„æ™‚ã¯ã€ä¸€äººã§æŠ±ãˆãšä¸Šå¸ã‚„å–¶æ¥­ã«ç›¸è«‡ã—ã¦ãã ã•ã„ã€‚ç’°å¢ƒèª¿æ•´ã‚‚ä»•äº‹ã§ã™ã€‚"}] };
      const anxietyNote = { head:"ğŸ’¡ ç¢ºèªãŒç´°ã‹ããªã£ã¦ã—ã¾ã†æ™‚", textParts:[{t:"text", v:"ä¸å®‰ã ã‹ã‚‰ç´°ã‹ããªã‚‹ã®ã¯è‡ªç„¶ã§ã™ã€‚ç›£è¦–ã§ã¯ãªãã€Œå®šæ™‚å ±å‘Šã€ãªã©ã®ä»•çµ„ã¿ã§ä¸å®‰ã‚’è§£æ¶ˆã—ã¾ã—ã‚‡ã†ã€‚"}] };

      if (!isManagerSide) {
        // Member side
        const tips = [];
        if(shareStyle==="detail") {
          tips.push({ head:"æ¬¡ã¯ã€Œç›¸æ‰‹ã®ã‚³ã‚¹ãƒˆã€ã‚‚æ„è­˜", textParts:[{t:"text", v:"ã“ã¾ã‚ãªå…±æœ‰ã¯å¼·ã¿ã§ã™ã€‚ã€Œçµè«–ã‹ã‚‰ã€ã€Œåˆ¤æ–­ã—ã¦ã»ã—ã„ç‚¹ã€ã‚’æ•´ç†ã™ã‚‹ã¨ã•ã‚‰ã«è‰¯ããªã‚Šã¾ã™ã€‚"}] });
        }
        if(shareStyle==="outcome") {
          tips.push({ head:"æ‰‹æˆ»ã‚Šã‚’é¿ã‘ã‚‹ï¼š20%ã§ä¸€åº¦åˆã‚ã›ã‚‹", textParts:[{t:"text", v:"æ–¹å‘ã‚ºãƒ¬ã‚’é˜²ããŸã‚ã€å®Œæˆåº¦20%ã®æ®µéšã§ã€Œã“ã®æ–¹é‡ã§åˆã£ã¦ã¾ã™ã‹ï¼Ÿã€ã¨èãã¨å®‰å…¨ã§ã™ã€‚"}] });
        }
        if(shareStyle==="adaptive") {
          tips.push({ head:"åˆã‚ã›ã™ãæ³¨æ„", textParts:[{t:"text", v:"é¡”è‰²ã‚’ä¼ºã„ã™ãã¦æ‚ªã„å ±å‘ŠãŒé…ã‚Œã‚‹ã¨é€†åŠ¹æœã§ã™ã€‚äº‹å®Ÿï¼ˆFactï¼‰ã¯æœ€çŸ­ã§ä¼ãˆã¾ã—ã‚‡ã†ã€‚"}] });
        }
        tips.push(help);
        return { title:"å…±æœ‰ã®ã‚¯ã‚»ã¨å·¥å¤«", subtitle:"ã€œè‡ªåˆ†ãŒå‹•ãã‚„ã™ããªã‚‹ãŸã‚ã«ã€œ", tips };
      } else {
        // Leader side
        const tips = [];
        if(shareStyle==="detail") {
          tips.push({ head:"ãƒã‚¤ã‚¯ãƒ­ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆæ³¨æ„", textParts:[{t:"text", v:"è‡ªåˆ†ãŒç´°ã‹ã„ã¨ç›¸æ‰‹ã«ã‚‚æ±‚ã‚ãŒã¡ã§ã™ã€‚ã‚´ãƒ¼ãƒ«ã‚’æ¡ã£ã¦ãƒ—ãƒ­ã‚»ã‚¹ã¯ä»»ã›ã‚‹æˆ‘æ…¢ãŒå¿…è¦ã§ã™ã€‚"}] });
        }
        if(shareStyle==="outcome") {
          tips.push({ head:"æ”¾ç½®ã«æ³¨æ„", textParts:[{t:"text", v:"ä»»ã›ã‚‹ã®ãŒå¾—æ„ãªåˆ†ã€æ”¾ç½®ã«ãªã‚ŠãŒã¡ã€‚ã€Œå›°ã£ã¦ãªã„ï¼Ÿã€ã¨å£°ã‚’ã‹ã‘ã‚‹ã‚¢ãƒ³ãƒ†ãƒŠã‚’å¼µã‚Šã¾ã—ã‚‡ã†ã€‚"}] });
        }
        if(shareStyle==="adaptive") {
          tips.push({ head:"ãƒ«ãƒ¼ãƒ«åŒ–ãŒåŠ¹ã", textParts:[{t:"text", v:"ã€Œã„ã¤ãƒ»ã©ã†å ±å‘Šã™ã‚‹ã‹ã€ã‚’è¨€èªåŒ–ã—ã¦ãŠãã¨ã€å¯Ÿã—åˆã†ã‚³ã‚¹ãƒˆãŒæ¸›ã‚Šã€ãŠäº’ã„æ¥½ã«ãªã‚Šã¾ã™ã€‚"}] });
        }
        tips.push(anxietyNote);
        return { title:"é€²ã‚æ–¹ã®ã‚¯ã‚»ã¨ãƒªã‚¹ã‚¯ç®¡ç†", subtitle:"ã€œãƒãƒ¼ãƒ ãŒå‹•ãã‚„ã™ããªã‚‹ãŸã‚ã«ã€œ", tips };
      }
    }

    // --- Interaction ---
    function toggleLeaderSubQ() {
      const roleVal = document.querySelector('input[name="role_scope"]:checked')?.value;
      const subArea = document.getElementById("sub-q-leader");
      
      // novice, lead, manager -> Show
      if (["novice", "lead", "manager"].includes(roleVal)) {
        subArea.classList.remove("hidden");
        setTimeout(() => subArea.classList.add("open"), 10);
      } else {
        subArea.classList.remove("open");
        setTimeout(() => subArea.classList.add("hidden"), 400); // wait for transition
        // Clear checks
        const checks = subArea.querySelectorAll('input:checked');
        checks.forEach(c => c.checked = false);
      }
      updateButtonState();
    }

    function collectSelections() {
      const exp = document.querySelector('input[name="exp_eng"]:checked')?.value || null;
      const role = document.querySelector('input[name="role_scope"]:checked')?.value || null;
      const focus = document.querySelector('input[name="focus_axis"]:checked')?.value || null;
      const share = document.querySelector('input[name="share_style"]:checked')?.value || null;
      const anxiety = Array.from(document.querySelectorAll('input[name="leader_anxiety"]:checked')).map(x => x.value);
      const coworkers = Array.from(document.querySelectorAll('input[name="coworker"]:checked')).map(x => x.value);
      return { exp, role, focus, share, anxiety, coworkers };
    }

    function isComplete(sel) {
      if (!sel.exp || !sel.role || !sel.focus || !sel.share || sel.coworkers.length === 0) return false;
      return true; 
    }

    function updateButtonState() {
      const btn = document.getElementById("build-sheet");
      const err = document.getElementById("error-msg");
      const sel = collectSelections();
      if (isComplete(sel)) {
        btn.disabled = false; btn.classList.add("primary"); err.classList.add("hidden");
      } else {
        btn.disabled = true; btn.classList.remove("primary");
      }
    }

    // --- Render ---
    function renderAnxietyBlock(anxietyKeys) {
      if(!anxietyKeys || anxietyKeys.length === 0) return null;
      
      const root = el("div", { className:"card pad-lg" });
      root.style.background = "#fff7ed"; /* orange-50 */
      root.style.borderColor = "#fdba74"; /* orange-300 */

      root.appendChild(el("div", { className:"kicker", text:"PART 2.5ï¼šãƒªãƒ¼ãƒ€ãƒ¼ã®å‡¦æ–¹ç®‹", style:"color:#c2410c" }));

      anxietyKeys.forEach((key, index) => {
        const data = getAnxietyPrescription(key);
        if(!data) return;

        // Divider for multiple items
        if(index > 0) {
          const hr = el("div", { className:"divider" });
          hr.style.background = "#fed7aa";
          hr.style.margin = "24px 0";
          root.appendChild(hr);
        }

        const container = el("div", {});
        container.appendChild(el("h3", { className:"block-title", text:`ğŸ’Š ${data.title}`, style:"color:#9a3412" }));
        container.appendChild(el("p", { className:"block-sub", text: data.msg, style:"color:#7c2d12" }));

        const grid = el("div", { className:"grid three", style:"margin-top:16px;" });
        data.steps.forEach(s => {
          const card = el("div", { className:"panel" });
          card.style.borderColor = "#fed7aa";
          card.appendChild(el("div", { className:"label", text: s.t, style:"color:#c2410c; font-size:12px;" }));
          card.appendChild(el("div", { className:"text", text: s.d, style:"color:#7c2d12;" }));
          grid.appendChild(card);
        });
        container.appendChild(grid);

        const memo = el("div", { className:"panel", style:"margin-top:12px; background:rgba(255,255,255,0.6); border-color:#fed7aa;" });
        memo.appendChild(el("strong", { text:"Memo: ", style:"color:#c2410c; font-size:12px;" }));
        memo.appendChild(document.createTextNode(data.memo));
        memo.style.fontSize = "13px";
        memo.style.color = "#7c2d12";
        container.appendChild(memo);

        root.appendChild(container);
      });

      return root;
    }

    function renderStageBlock(stageKey) {
      const data = STAGES[stageKey];
      const root = el("div", { className:"block" });
      const head = el("div", { className:"block-head" }, [
        el("div", { className:"kicker", text:"PART 1ï¼šã„ã¾ã®ç«‹å ´ã§èµ·ã“ã‚Šã‚„ã™ã„ã“ã¨" }),
        el("h3", { className:"block-title" }, [ el("span", { text: data.icon }), el("span", { text: data.title }) ]),
        el("p", { className:"block-sub", text: data.subtitle })
      ]);
      head.style.borderLeft = `8px solid ${data.theme.border}`; head.style.background = data.theme.bg;
      const body = el("div", { className:"block-body" }, []);
      const list = el("div", { className:"list" });
      data.content.forEach(item => {
        const card = el("div", { className:"item" }, [
          el("h4", { text: item.head }),
          el("div", { className:"row" }, [
            el("div", { className:"panel" }, [ el("span", { className:"label", text:"ã™ã‚Œé•ã„" }), el("div", { className:"text", text: item.bad }) ]),
            el("div", { className:"panel good" }, [ el("span", { className:"label", text:"è©¦ã›ã‚‹å‹•ã" }), el("div", { className:"text", text: item.action }) ])
          ])
        ]);
        list.appendChild(card);
      });
      body.appendChild(list);
      root.appendChild(head); root.appendChild(body);
      return root;
    }

    function renderRoleBlock(roleHints) {
      const root = el("div", { className:"card pad-lg" });
      root.style.background = "#fffbeb"; root.style.borderColor = "#fcd34d";
      root.appendChild(el("div", { className:"kicker", text:"PART 2ï¼šä»»ã•ã‚Œæ–¹ã®å¤‰åŒ–ã«åˆã‚ã›ãŸã‚³ãƒ„" }));
      root.appendChild(el("h3", { className:"block-title", text: roleHints.title }));
      roleHints.msg.forEach(line => root.appendChild(el("p", { text: line, className:"block-sub" })));

      if (roleHints.tips && roleHints.tips.length > 0) {
        const box = el("div", { className:"card pad" }, []);
        box.style.marginTop = "14px"; box.style.borderColor = "rgba(217,119,6,.2)"; box.style.boxShadow = "none"; box.style.background = "rgba(255,255,255,0.6)";
        box.appendChild(el("div", { className:"kicker", text:"ğŸ”‘ å°ã•ãåŠ¹ããƒã‚¤ãƒ³ãƒˆ" }));
        const ul = el("ul", { style:"margin:10px 0 0; padding-left:18px;" });
        roleHints.tips.forEach(t => {
          const li = el("li", { }, [ el("span", { text:`${t.icon} ` }), el("span", { text: t.text }) ]);
          li.style.margin = "8px 0"; li.style.fontWeight = "700"; li.style.color = "#334155";
          ul.appendChild(li);
        });
        box.appendChild(ul);
        root.appendChild(box);
      }
      return root;
    }

    function renderCommBlock(commList) {
      const wrap = el("div", { className:"card pad-lg" });
      wrap.style.background = "#f0fdf4"; wrap.style.borderColor = "#86efac";
      wrap.appendChild(el("div", { className:"kicker", text:"PART 3ï¼šç›¸æ‰‹åˆ¥ãƒ»ä¼ãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ" }));
      wrap.appendChild(el("h3", { className:"block-title", text:"ğŸ’¬ ç›¸æ‰‹åˆ¥ï¼šã™ã‚Œé•ã„ã‚’æ¸›ã‚‰ã™ã‚³ãƒ„" }));
      const grid = el("div", { className:"grid two" });
      commList.forEach(tip => {
        const card = el("div", { className:"card pad", style:"border-color:#bbf7d0; box-shadow:none;" });
        const top = el("div", { style:"display:flex;align-items:center;gap:10px;" }, [
          el("div", { text: tip.icon, style:"font-size:22px;" }),
          el("div", {}, [ el("div", { text: tip.title, className:"opt-title" }), el("div", { text:`ğŸ”‘ ${tip.advice}`, className:"opt-desc" }) ])
        ]);
        card.appendChild(top); card.appendChild(el("div", { className:"divider" }));
        const bad = el("div", { className:"panel" }, [ el("span", { className:"label", text:"ã™ã‚Œé•ã„" }), el("div", { className:"text", text: tip.bad }) ]);
        const good = el("div", { className:"panel good" }, [ el("span", { className:"label", text:"GOOD" }), el("div", { className:"text", text: tip.good }) ]);
        good.style.borderLeftColor = "#22c55e";
        const mindset = el("div", { className:"panel", style:"margin-top:12px; background:#f0fdfa; border-left-color:#0d9488;" }, [ el("span", { className:"label", text:"Memo" }), el("div", { className:"text", text: tip.mindset }) ]);

        card.appendChild(bad); card.appendChild(el("div", { style:"height:8px;" })); card.appendChild(good);
        card.appendChild(mindset);
        grid.appendChild(card);
      });
      wrap.appendChild(el("div", { style:"margin-top:16px;" }, [grid]));
      return wrap;
    }

    function renderFocusBlock(focus) {
      const root = el("div", { className:"block" });
      const head = el("div", { className:"block-head" }, [
        el("div", { className:"kicker", text:"PART 4ï¼šè‡ªåˆ†ã®â€œé‡å¿ƒâ€ã®å‚¾å‘" }),
        el("h3", { className:"block-title", text: focus.name }),
        el("p", { className:"block-sub", text: focus.tagline })
      ]);
      head.style.background = focus.theme.soft; head.style.borderLeft = `8px solid ${focus.theme.accent}`;
      const body = el("div", { className:"block-body" }, []);
      const strengths = el("div", { className:"item" }, [
        el("h4", { text:"ğŸ’ª ã„ã¾ã®å¼·ã¿" }),
        el("div", { className:"panel", style:`border-left-color:${focus.theme.accent}` }, [ el("div", { className:"text", text: focus.strengths }) ])
      ]);
      const listWrap = el("div", { className:"item" }, [ el("h4", { text:"âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ" }) ]);
      focus.checklist.forEach(ch => {
        const c = el("div", { className:"panel", style:`border-left-color:${focus.theme.accent}; background:#fff; margin-top:8px;` }, [
          el("div", { className:"text", text: `${ch.title}ï¼š${ch.desc}` })
        ]);
        listWrap.appendChild(c);
      });
      body.appendChild(strengths); body.appendChild(listWrap);
      root.appendChild(head); root.appendChild(body);
      return root;
    }

    function renderGrowthBlock() {
      const root = el("div", { className:"card pad-lg", style:"background:#f8fafc;" });
      root.appendChild(el("div", { className:"kicker", text:"PART 4.5ï¼šè¦–é‡ã‚’åºƒã’ã‚‹ãŸã‚ã®å‚è€ƒ" }));
      root.appendChild(el("h3", { className:"block-title", text:"ğŸ§© çµŒé¨“ã®åºƒãŒã‚Šã‚¤ãƒ¡ãƒ¼ã‚¸" }));
      const p = el("p", { className:"block-sub" });
      p.appendChild(document.createTextNode("ä»Šã®æ„è­˜ã®ç½®ãæ–¹ãŒã€ç¾å ´ã§ã©ã‚“ãªçµŒé¨“ã«ç¹‹ãŒã‚Šã‚„ã™ã„ã‹ã®å‚è€ƒã§ã™ã€‚ï¼ˆã©ã‚Œã‹ä¸€ã¤ã‚’é¸ã¶å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰"));
      root.appendChild(p);
      const grid = el("div", { className:"grid three", style:"margin-top:16px;" });
      if(window.matchMedia("(min-width:768px)").matches) grid.style.gridTemplateColumns = "repeat(3, minmax(0,1fr))";
      [{icon:"ğŸ› ï¸",t:"æŠ€è¡“",l:["è¨­è¨ˆãƒ»å®Ÿè£…åˆ¤æ–­","æŠ€è¡“é¸å®š","ç›¸è«‡å½¹"]},{icon:"ğŸŒ±",t:"é–¢ã‚ã‚Š",l:["æ–°äººãƒ•ã‚©ãƒ­ãƒ¼","ãƒãƒ¼ãƒ èª¿æ•´","ä¸€æ¬¡å—ã‘"]},{icon:"ğŸ§­",t:"å…¨ä½“",l:["å„ªå…ˆé †ä½ãƒ»è¨ˆç”»","è¦‹ç©ã‚‚ã‚Š","æ©‹æ¸¡ã—"]}].forEach(it=>{
        const c = el("div", { className:"card pad", style:"box-shadow:none;" });
        c.appendChild(el("div", { text:`${it.icon} ${it.t}`, className:"opt-title", style:"font-size:15px; margin-bottom:8px;" }));
        const ul = el("ul", { style:"padding-left:16px; margin:0;" });
        it.l.forEach(x => { const li = el("li", { text:x, style:"font-size:12px; color:#475569;" }); ul.appendChild(li); });
        c.appendChild(ul); grid.appendChild(c);
      });
      root.appendChild(grid);
      return root;
    }

    function renderShareBlock(share) {
      const root = el("div", { className:"card pad-lg", style:"background:#ecfdf5; border-color:#6ee7b7;" });
      root.appendChild(el("div", { className:"kicker", text:"PART 5ï¼šé€²ã‚æ–¹ã®ã‚¯ã‚»ã¨å·¥å¤«" }));
      root.appendChild(el("h3", { className:"block-title", text:`âš–ï¸ ${share.title}` }));
      root.appendChild(el("p", { className:"block-sub", text: share.subtitle }));
      const list = el("div", { className:"list" });
      share.tips.forEach(t => {
        const item = el("div", { className:"card pad", style:"box-shadow:none; border-color:#a7f3d0;" });
        const h4 = el("div", { className:"opt-title", text: `! ${t.head}`, style:"font-size:14px;" });
        const p = el("p", { className:"opt-desc", style:"font-size:13px; color:#334155; font-weight:700; margin:8px 0 0;" });
        appendRich(p, t.textParts);
        item.appendChild(h4); item.appendChild(p); list.appendChild(item);
      });
      root.appendChild(el("div", { style:"margin-top:16px;" }, [list]));
      return root;
    }

    function showSheet() {
      const sel = collectSelections();
      const err = document.getElementById("error-msg");
      if (!isComplete(sel)) { err.classList.remove("hidden"); return; }
      
      const mount = (id, node) => { const t = document.getElementById(id); clear(t); if(node) t.appendChild(node); };

      currentResult = { createdAt: new Date(), sel };

      mount("block-stage", renderStageBlock(sel.exp));
      mount("block-role", renderRoleBlock(getRoleHints(sel.exp, sel.role)));
      mount("block-anxiety", renderAnxietyBlock(sel.anxiety)); // Pass array
      mount("block-comm", renderCommBlock(getCommunicationHints(sel.exp, sel.coworkers)));
      
      const fBlock = getFocusBlock(sel.exp, sel.role, sel.focus);
      mount("block-focus", fBlock ? renderFocusBlock(fBlock) : null);

      mount("block-growth", renderGrowthBlock());
      mount("block-share", renderShareBlock(getShareHints(sel.exp, sel.role, sel.share)));

      setText("sum-exp", LABELS.exp[sel.exp] || "-");
      setText("sum-role", LABELS.role[sel.role] || "-");
      setText("sum-focus", LABELS.focus[sel.focus] || "-");
      setText("sum-who", sel.coworkers.map(k => LABELS.coworker[k]).join(", "));

      document.getElementById("intro-area").classList.add("hidden");
      document.getElementById("reflection-form").classList.add("hidden");
      document.getElementById("result-area").classList.remove("hidden");
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    function resetAll() {
      document.getElementById("reflection-form").reset();
      // Hide sub questions
      const subArea = document.getElementById("sub-q-leader");
      subArea.classList.remove("open"); subArea.classList.add("hidden");

      document.getElementById("result-area").classList.add("hidden");
      document.getElementById("intro-area").classList.remove("hidden");
      document.getElementById("reflection-form").classList.remove("hidden");
      document.getElementById("error-msg").classList.add("hidden");
      currentResult = null;
      updateButtonState();
      window.scrollTo({ top: 0, behavior: "auto" });
    }

    let currentResult = null;

    function buildPrint() {
      const root = document.getElementById("print-root"); clear(root);
      const sel = currentResult?.sel || collectSelections();
      const h1 = el("h1", { text:"ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æˆé•·ã‚«ãƒ«ãƒ†ï¼ˆä¿å­˜ç”¨ï¼‰" });
      h1.style.borderBottom = "2px solid #000"; h1.style.marginBottom = "10px";
      root.appendChild(h1);

      const addSec = (title, content) => {
        if(!content) return;
        root.appendChild(el("h2", { text: title, style:"background:#eee; margin-top:20px; padding:5px;" }));
        const box = el("div", { style:"white-space:pre-wrap; border:1px solid #ccc; padding:10px; break-inside:avoid;" });
        box.textContent = content; root.appendChild(box);
      };

      // Part 1
      const st = STAGES[sel.exp];
      addSec("PART 1: ã„ã¾ã®ç«‹å ´", `${st.title}\n${st.subtitle}\n\n` + st.content.map(c=>`ãƒ»${c.head} â†’ ${c.action}`).join("\n"));
      
      // Part 2
      const rh = getRoleHints(sel.exp, sel.role);
      addSec("PART 2: ä»»ã•ã‚Œæ–¹ã®ãƒ’ãƒ³ãƒˆ", `${rh.title}\n` + rh.msg.join("\n"));

      // Part 2.5 Anxiety (Loop)
      if(sel.anxiety && sel.anxiety.length > 0) {
        const anxTexts = sel.anxiety.map(key => {
          const a = getAnxietyPrescription(key);
          if(!a) return "";
          return `ã€${a.title}ã€‘\n${a.msg}\n\n` + a.steps.map(s=>`ãƒ»${s.t}: ${s.d}`).join("\n") + `\n(Memo: ${a.memo})`;
        }).filter(Boolean).join("\n\n----------------\n\n");
        
        if(anxTexts) addSec("PART 2.5: ãƒªãƒ¼ãƒ€ãƒ¼ã®å‡¦æ–¹ç®‹", anxTexts);
      }

      // Part 3
      const comms = getCommunicationHints(sel.exp, sel.coworkers);
      if(comms.length) addSec("PART 3: ä¼ãˆæ–¹", comms.map(c=>`${c.title}: ${c.advice} (Memo: ${c.mindset})`).join("\n"));

      // Part 4
      const fo = getFocusBlock(sel.exp, sel.role, sel.focus);
      if(fo) addSec("PART 4: é‡å¿ƒ", `${fo.name}\n${fo.tagline}\nå¼·ã¿: ${fo.strengths}`);
    }

    function preparePrint() {
      if(!currentResult) return;
      const root = document.getElementById("print-root");
      root.classList.remove("hidden"); root.removeAttribute("aria-hidden");
      buildPrint();
      setTimeout(() => { window.print(); root.classList.add("hidden"); }, 100);
    }
    
    // Boot
    document.addEventListener("DOMContentLoaded", () => {
      setText("app-version", APP_VERSION);
      // Role scope listener for sub-question
      document.querySelectorAll('input[name="role_scope"]').forEach(r => r.addEventListener("change", toggleLeaderSubQ));
      
      document.getElementById("reflection-form").addEventListener("change", updateButtonState);
      document.getElementById("build-sheet").addEventListener("click", showSheet);
      document.getElementById("reset-btn").addEventListener("click", resetAll);
      document.getElementById("print-btn").addEventListener("click", preparePrint);
      
      // Accessibility: Title area keyboard support
      const titleArea = document.querySelector('.title-area');
      if (titleArea) {
        titleArea.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            window.location.reload();
          }
        });
      }

      updateButtonState();
    });
  </script>
</body>
</html>