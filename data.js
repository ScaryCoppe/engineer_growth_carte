// Extracted data/config from index.html
// Keep this file alongside the HTML (same directory).
"use strict";

const APP_VERSION = "v10.0 (Mobile Opt + Leader+)";

    const LABELS = {
      exp: { junior:"1〜2年", middle:"3〜5年", senior:"6〜9年", veteran:"10年以上" },
      role: { none:"任される側が中心", novice:"ちょっと任され始めた", lead:"リード/支えるが増えた", manager:"管理・運営が多い" },
      focus: { tech:"技術重視", people:"関わり方重視", biz:"全体重視" },
      coworker: {
        internal_boss:"自社上司",
        internal_junior:"自社後輩",
        internal_peer:"自社同僚",
        client_boss:"お客様",
        partner_junior:"パートナー",
        non_engineer:"PM/QA",
        solo:"ひとり"
      }
    };

// ==========================================================
    // DATA SECTION (Expanded Format)
    // ==========================================================
    
    // PART 1: STAGE
    const STAGES = {
      junior: {
        title: "【いまの立場】初期（1〜2年目）",
        subtitle: "まずは「安心して任せてもらえる人」になるための土台作り",
        icon: "🌱",
        theme: { border: "#0d9488", bg: "linear-gradient(90deg, #ccfbf1, #fff)" },
        content: [
          {
            head:"共有で信頼を貯める",
            bad:"聞かれるまで言わない / 問題が起きてから言う",
            action:"「順調です」だけでなく「ここが不安です」もセットで共有する。不安の共有は恥ではありません。"
          },
          {
            head:"完了条件を握る",
            bad:"言われた通りに作ったつもりで、手戻りが発生する",
            action:"「何ができたら完了ですか？」を着手前に確認し、アウトプット（DoD）をすり合わせる。"
          },
          {
            head:"詰まったら早めにアラート",
            bad:"一人で抱え込んで時間が過ぎる",
            action:"「15分詰まったら相談する」などのルールを自分に課し、早めに助けを求める。"
          }
        ]
      },
      middle: {
        title: "【いまの立場】中盤（3〜5年目）",
        subtitle: "自分のタスクから「チームの成果」へ視野を広げる",
        icon: "🐣",
        theme: { border: "#0284c7", bg: "linear-gradient(90deg, #e0f2fe, #fff)" },
        content: [
          {
            head:"前後工程への配慮",
            bad:"自分の担当範囲だけ終わらせて完了とする",
            action:"「この実装でテストや運用は困らないか？」を想像し、前後の担当者と会話する。"
          },
          {
            head:"代案を持って相談する",
            bad:"「無理です」「わかりません」だけで止める",
            action:"「A案はリスクがありますが早いです。B案は確実ですが時間がかかります」と選択肢を提示する。"
          },
          {
            head:"隙間を拾う",
            bad:"担当外のボールをスルーする",
            action:"ドキュメント整備や環境設定など、誰もやっていないが必要なタスクを小さく拾う。"
          }
        ]
      },
      senior: {
        title: "【いまの立場】経験者（6〜9年目）",
        subtitle: "品質とスピードのバランスを取り、チームの基準になる",
        icon: "🦁",
        theme: { border: "#4f46e5", bg: "linear-gradient(90deg, #eef2ff, #fff)" },
        content: [
          {
            head:"作らない勇気",
            bad:"言われた機能をすべて実装し、保守コストを増やす",
            action:"「本当にその機能は必要か？」「既存機能で代用できないか？」を問い、無駄な開発を減らす。"
          },
          {
            head:"仕組みで解決する",
            bad:"「気をつける」という精神論でミスを防ごうとする",
            action:"CI/CD、Lint、チェックリストなど、誰がやっても品質が保てる仕組みを導入する。"
          },
          {
            head:"レビューは教育の場",
            bad:"細かい指摘だけして、意図を伝えない",
            action:"「なぜこの書き方が良いのか」という背景を伝え、メンバーの視座を引き上げる。"
          }
        ]
      },
      veteran: {
        title: "【いまの立場】熟練（10年目〜）",
        subtitle: "全体最適と持続可能性を設計する",
        icon: "👑",
        theme: { border: "#7c3aed", bg: "linear-gradient(90deg, #f5f3ff, #fff)" },
        content: [
          {
            head:"部分最適を疑う",
            bad:"技術的な正しさだけに固執し、ビジネス価値を損なう",
            action:"コスト、納期、運用体制を含めた全体視点で、最適なアーキテクチャや技術を選定する。"
          },
          {
            head:"価値に向き合う",
            bad:"アウトプット（作った量）だけで評価する",
            action:"アウトカム（誰がどう楽になったか）を問い続け、チームの方向修正を行う。"
          },
          {
            head:"文化を耕す",
            bad:"ルールや罰則で人を管理しようとする",
            action:"心理的安全性、失敗から学ぶ姿勢、称賛しあう文化を、自らの振る舞いで浸透させる。"
          }
        ]
      }
    };

    // PART 2: ROLE & LEADER SUPPORT
    function getRoleHints(expVal, roleVal) {
      const standard = {
        none: {
          title:"任され方の変化：これからの準備",
          msg:["まずは「自分の周辺」に関心を持つところから。質問すること、状況を共有することも立派なチーム貢献です。"],
          tips:[
            { icon:"👀", text:"進捗ボードやチケットを毎日1回眺めて「全体の温度感」を掴む。" },
            { icon:"🙋‍♂️", text:"分かったふりをせず「それはどういう意味ですか？」と聞く。" },
            { icon:"🧹", text:"議事録・環境整備など、誰もやりたがらない仕事は信頼を作る。" }
          ]
        },
        novice: {
          title:"任され方の変化：ちょっと任され始めた時期",
          msg:["後輩のケアや小さな進行管理。自分の作業時間を確保しつつ、他人のために時間を使う練習期間です。"],
          tips:[
            { icon:"🤙", text:"「明日やります」を守る。小さな約束の積み上げが一番効きます。" },
            { icon:"👂", text:"相手の話を途中で遮らない。最後まで聞くことで情報の抜けが減ります。" },
            { icon:"🆘", text:"トラブル時は謝罪より先に事実（いま何が起きているか）を短く共有する。" }
          ]
        },
        lead: {
          title:"任され方の変化：リード・支えるが増えた時期",
          msg:["自分がやった方が早くても、任せる勇気が必要になります。「60点で進めてもらい、レビューで整える」スタンスが有効です。"],
          tips:[
            { icon:"🚀", text:"自分が書けば早い場面ほど、任せる。レビューで方向だけ整えるとチームが育ちます。" },
            { icon:"🛡️", text:"メンバーの仕事を守る「防波堤」としての意識を持ち始めましょう。" }
          ]
        },
        manager: {
          title:"任され方の変化：管理・運営が多い時期",
          msg:["タスク管理ではなく「ピープルマネジメント」が中心。人の感情、キャリア、チームの人間関係に目を向けます。"],
          tips:[
            { icon:"⚙️", text:"属人化を減らす。誰が抜けても回る仕組み（手順・レビュー・自動化）を優先する。" },
            { icon:"🌱", text:"環境を整えるのが仕事。人が力を出せる「邪魔のない状態」を作る。" }
          ]
        }
      };

      const expLevel = { junior:1, middle:2, senior:3, veteran:4 };
      const roleLevel = { none:0, novice:1, lead:2, manager:3 };
      const e = expLevel[expVal];
      const r = roleLevel[roleVal];

      // Gap logic
      if (e >= 3 && r <= 1) return {
        title: "経験の深みを、影響力につなげる",
        msg: ["経験年数に対して「任され方」が少ない場合でも、焦る必要はありません。契約形態や現場の構造上、そうなることは珍しくありません。","これからは「管理」ではなく、相談に乗る／背景を言語化する／判断材料を出す、といった形で影響力を発揮してください。"],
        tips: [{ icon:"✨", text:"「役職」だけが前進ではありません。技術メンター／相談役として信頼を作る道も価値があります。" }, { icon:"📚", text:"過去のトラブルを「どう気づき、どう直したか」という物語で共有すると、周囲の学びが速くなります。" }]
      };
      
      if (e <= 1 && r >= 2) return {
        title: "任されるのが早い時期のコツ",
        msg: ["早い段階で任されるのは良い経験です。ただ、気合いだけで走ると疲れやすくなります。","「自分が一番できる必要はない」ので、年上の人や専門家に頼る“相談の設計”を先に作っておくと安定します。"],
        tips: [{ icon:"🛡️", text:"「全部自分で背負う」を捨てる。相談・レビューの頻度を先に決めておくと安心です。" }, { icon:"👂", text:"年上メンバーには「教えてください」の姿勢で。敬意があると、助けが返ってきます。" }]
      };

      return standard[roleVal];
    }

    // PART 2.5: ANXIETY PRESCRIPTION
    function getAnxietyPrescription(anxietyKey) {
      if (!anxietyKey) return null;
      const db = {
        quality: {
          title: "処方箋：SL理論（状況対応型）のアプローチ",
          msg: "「任せる」は「丸投げ」ではありません。相手の習熟度（Will/Skill）に合わせて、関わり方のギアを切り替えるのがコツです。",
          steps: [
            { t:"S1（教示型）", d:"新人や未経験タスクの場合：具体的な手順まで指示し、頻繁に確認する。「細かすぎる」くらいでOK。" },
            { t:"S2（説得型）", d:"慣れてきたら：手順の「理由」を説明し、質問を受け付ける。対話を増やす。" },
            { t:"S3（参加型）", d:"できるけど自信がない時：指示は減らし、励ましや相談に乗ることに徹する。" },
            { t:"S4（委任型）", d:"熟練者：ゴールと期限だけ握り、あとは任せる。報告だけもらう。" }
          ],
          memo: "不安なのは「相手のモード（S1〜S4）」と「自分のモード」が合っていないからかもしれません。まずはS1（細かい指示）から始めて、徐々に手を離すのが安全です。"
        },
        visibility: {
          title: "処方箋：監視ではなく「仕組み」で解決する",
          msg: "進捗が見えない不安は、リーダーの精神を削り、メンバーへのマイクロマネジメント（過干渉）を招きます。これを防ぐのは「意思」ではなく「仕組み」です。",
          steps: [
            { t:"定時連絡のルール化", d:"「毎日11時に進捗を1行チャットする」など、負担の少ない定時報告をルールにする。" },
            { t:"トリガーの設定", d:"「1日遅れたらアラート」「30分詰まったら相談」という共通認識（DoD）を作る。" },
            { t:"情報のプル型化", d:"リーダーがいちいち聞きに行くのではなく、ボードを見れば分かる状態（カンバン等）を目指す。" }
          ],
          memo: "「なんで報告してくれないの？」と悩むより、自動的に情報が入ってくるパイプラインを設計するのがエンジニアらしい解決策です。"
        },
        shield: {
          title: "処方箋：「盾になる」という役割定義",
          msg: "板挟みはリーダー最大のストレスですが、同時に最大の価値発揮ポイントでもあります。「チームを守る防波堤」としての動きを意識してみましょう。",
          steps: [
            { t:"魔法の言葉「持ち帰ります」", d:"その場で無理な要求に即答せず、一旦クッションを置く。これだけで即死を防げます。" },
            { t:"内部期限のバッファ", d:"お客様との期限より、チーム内期限を20%前倒しにする。トラブル対応の余白を設計する。" },
            { t:"トレードオフの提示", d:"「それをやると納期が伸びますが、品質とどちらを優先しますか？」と判断を相手に返す。" }
          ],
          memo: "あなたが盾になることで、メンバーは安心して開発できます。その「安心感」が、結果としてチームの生産性を最大化します。"
        },
        human: {
          title: "処方箋：人格と機能を分ける（コトに向かう）",
          msg: "「嫌われたくない」という感情は人間として正常です。しかし、リーダーとしては「人」ではなく「コト（課題・コード・成果）」に向き合う必要があります。",
          steps: [
            { t:"SBI情報の活用", d:"Situation（状況）、Behavior（行動）、Impact（影響）の事実だけを淡々と伝える。" },
            { t:"主語を変える", d:"「あなたがダメ」ではなく、「この進め方だと、こういうリスクがある」と仕組みの話にする。" },
            { t:"役割を演じる", d:"これは「自分」が言っているのではなく、「進行役」という帽子を被って言っている、と割り切る。" }
          ],
          memo: "厳しいことを言うのも、チームとプロジェクトを守るための「親切」です。事実ベースで話せば、プロ同士の信頼は壊れません。"
        }
      };
      return db[anxietyKey];
    }

    // PART 3: COMMUNICATION
    function getCommunicationHints(expVal, coworkerKeys) {
      const db = {
        internal_boss: {
          junior: {
            icon:"👨‍💼", title:"対 上司（共有・学習）",
            advice:"サプライズをなくす",
            bad:"自己判断で抱え込み、手遅れになってから共有する。",
            good:"「状況は悪いですが、案はあります」と最短で共有する。",
            mindset:"上司は「評価者」だけでなく「リソース」でもあります。遠慮せず、学びのために使いましょう。"
          },
          middle: {
            icon:"👨‍💼", title:"対 上司（提案）",
            advice:"選択肢を持っていく",
            bad:"「どうすればいいですか」と丸投げする。",
            good:"「A案とB案があり、私はA案推奨です」と自分の意見を添える。",
            mindset:"上司の時間を奪わない「判断しやすい形」で渡すと、信頼コストが下がります。"
          },
          senior: {
            icon:"👨‍💼", title:"対 上司（判断支援）",
            advice:"視座を合わせる",
            bad:"技術的な正しさだけで説得しようとする。",
            good:"「この負債を返すと、来期の開発速度が2倍になります」とメリットで語る。",
            mindset:"上司が見ている景色（納期・コスト・リスク）を想像し、同じ地図で話すと通りやすいです。"
          },
          veteran:{
            icon:"👨‍💼", title:"対 上司（パートナー）",
            advice:"課題を定義する",
            bad:"言われたことだけをやる。",
            good:"「今の事業フェーズなら、機能追加より安定性を優先すべきでは？」と前提から問う。",
            mindset:"上司の「右腕」として、組織全体の最適解を一緒に探すスタンスが価値になります。"
          }
        },
        internal_junior: {
          junior: {
            icon:"🐣", title:"対 後輩（共感）",
            advice:"一緒に悩む",
            bad:"先輩風を吹かせて、知ったかぶりをする。",
            good:"「私も分からなかったから一緒に調べよう」と横に並ぶ。",
            mindset:"教えることは学ぶこと。質問は自分の理解度を上げるチャンスです。"
          },
          middle: {
            icon:"🐣", title:"対 後輩（ガイド）",
            advice:"答えより調べ方",
            bad:"すぐに正解のコードを教える。",
            good:"「どのログを見た？」「どう検索した？」と解決プロセスをガイドする。",
            mindset:"「魚を与えるのではなく、魚の釣り方を教える」のが、お互いのためになります。"
          },
          senior: {
            icon:"🐣", title:"対 後輩（育成）",
            advice:"失敗の振り返り",
            bad:"失敗しないように先回りして全部お膳立てする。",
            good:"失敗した時は「なぜ？」と詰めず、「次どうすれば防げるか？」と未来思考で一緒に考える（SBI情報）。",
            mindset:"コピーを作るのではなく、自走できる人を増やすのがゴールです。"
          },
          veteran:{
            icon:"🐣", title:"対 後輩（文化）",
            advice:"心理的安全",
            bad:"「なんでそんなことしたの？」と詰める。",
            good:"「再発防止のために、仕組みのどこを直そうか？」と未来を向く。",
            mindset:"個人のミスを責めず、仕組みを疑う姿勢を見せることで、挑戦できる文化が育ちます。"
          }
        },
        internal_peer: {
          junior: {
            icon:"🤝", title:"対 同僚（協力）",
            advice:"GIVEから始める",
            bad:"自分のタスクに集中しすぎて周囲を見ない。",
            good:"手が空いたら「何か手伝えますか？」と声をかける。",
            mindset:"困った時に助けが返ってくるのは、普段から助けている人です。"
          },
          middle: {
            icon:"🤝", title:"対 同僚（連携）",
            advice:"ボールを拾う",
            bad:"「それは私の担当じゃない」と境界線を引く。",
            good:"ポテンヒット（落ちそうなボール）を見つけたら、まず拾ってから分担を相談する。",
            mindset:"自分の範囲を少しはみ出して動くと、チームの隙間が埋まり、感謝されます。"
          },
          senior: {
            icon:"🤝", title:"対 同僚（尊重）",
            advice:"人格とコードを分ける",
            bad:"レビューで相手を詰めて萎縮させる。",
            good:"主語を「あなた」ではなく「コード」にして議論する。",
            mindset:"心理的安全性は勝手に生まれません。経験者が守って初めて回り始めます。"
          },
          veteran:{
            icon:"🤝", title:"対 同僚（触媒）",
            advice:"強みを繋ぐ",
            bad:"自分一人で解決しようとする。",
            good:"「この件ならAさんが詳しいよ」と人と人を繋ぎ、チームの総力を上げる。",
            mindset:"自分がボトルネックにならず、情報と人がスムーズに流れるハブになります。"
          }
        },
        client_boss: {
          junior: {
            icon:"🏢", title:"対 お客様側",
            advice:"記録を残す",
            bad:"口頭で進めて「言った言わない」になる。",
            good:"決定事項は議事録やチケットに残し、リンクを送る。",
            mindset:"信頼は正確な記録から生まれます。自分とチームを守る盾になります。"
          },
          middle: {
            icon:"🏢", title:"対 お客様側",
            advice:"期待値を調整",
            bad:"その場で「できます」と安請け合いする。",
            good:"「持ち帰って確認します」と一旦クッションを置く。",
            mindset:"即答できないことは保留する勇気が、結果的にトラブルを防ぎます。"
          },
          senior: {
            icon:"🏢", title:"対 お客様側",
            advice:"盾になる（バッファ）",
            bad:"無理な要望を全部聞いて現場を疲弊させる。",
            good:"「それをやると納期が遅れます」とトレードオフを示し、内部期限には20%のバッファを持つ。",
            mindset:"御用聞きではなく、技術パートナーとして価値を最大化する視点が効きます。"
          },
          veteran:{
            icon:"🏢", title:"対 お客様側",
            advice:"信頼貯金",
            bad:"契約範囲内のことしかしない。",
            good:"相手のビジネス課題に興味を持ち、「技術でどう解決できるか」を提案する。",
            mindset:"発注者と受注者を超えた「同じゴールを目指す仲間」としての信頼を築きます。"
          }
        },
        partner_junior: {
          junior: {
            icon:"🏗️", title:"対 パートナー",
            advice:"敬意を忘れない",
            bad:"下請けのように扱う。",
            good:"同じゴールを目指す仲間として、感謝と敬意を示す。",
            mindset:"所属が違っても、同じチームです。丁寧なコミュニケーションが摩擦を減らします。"
          },
          middle: {
            icon:"🏗️", title:"対 パートナー",
            advice:"文脈を共有",
            bad:"作業だけ依頼して、背景やゴールを伝えない。",
            good:"「なぜこの機能が必要か」を伝え、より良い実装方法があれば提案してもらう。",
            mindset:"単なる作業者ではなく、専門家として頼ることで、質の高いアウトプットが返ってきます。"
          },
          senior: {
            icon:"🏗️", title:"対 パートナー",
            advice:"ゴールを握る",
            bad:"「いい感じに」で丸投げする。",
            good:"「何ができたら完了か（DoD）」を明確に握り、手戻りを防ぐ。",
            mindset:"情報の非対称性を減らすほど、相手が自律的に動けるようになります。"
          },
          veteran:{
            icon:"🏗️", title:"対 パートナー",
            advice:"環境を整える",
            bad:"使いにくい環境やツールを放置する。",
            good:"パートナーが働きやすい権限や環境を整え、パフォーマンスを最大化する。",
            mindset:"相手の生産性を上げることが、プロジェクト全体の成功への近道です。"
          }
        },
        non_engineer: {
          junior: {
            icon:"🎨", title:"対 非エンジニア",
            advice:"翻訳する",
            bad:"技術用語（DB、APIなど）をそのまま使って話す。",
            good:"「画面を表示する仕組み」など、相手の言葉に置き換える。",
            mindset:"相手は「技術が分からない」のではなく「専門外」なだけです。リスペクトを持って翻訳しましょう。"
          },
          middle: {
            icon:"🎨", title:"対 非エンジニア",
            advice:"視覚化する",
            bad:"口頭やテキストだけで仕様を詰めようとする。",
            good:"図やワイヤーフレームを書いて「こういうことですか？」と確認する。",
            mindset:"百聞は一見にしかず。動くものや絵を見せることが、認識ズレを防ぐ最短ルートです。"
          },
          senior: {
            icon:"🎨", title:"対 非エンジニア",
            advice:"価値で話す",
            bad:"「技術的に無理です」とだけ伝えてシャットアウトする。",
            good:"「それを実現すると表示が3秒遅くなりますが、許容できますか？」とトレードオフを示す。",
            mindset:"共通言語は「コード」ではなく「ユーザー価値」です。そこを握ると議論がスムーズになります。"
          },
          veteran:{
            icon:"🎨", title:"対 非エンジニア",
            advice:"実現方法を創る",
            bad:"仕様が決まるのを待つ。",
            good:"「こういう技術を使えば、もっと簡単に実現できますよ」と技術側から提案する。",
            mindset:"技術の引き出しを使って、ビジネスの可能性を広げる提案ができます。"
          }
        },
        solo: {
          junior: {
            icon:"💻", title:"ソロワーク",
            advice:"詰まりを防ぐ",
            bad:"一人で何時間も悩み続けて時間を消費する。",
            good:"時間を区切り、AIやコミュニティ・上司に相談する。",
            mindset:"孤独は視野を狭めます。意識的に外部の目を入れましょう。"
          },
          middle: {
            icon:"💻", title:"ソロワーク",
            advice:"ログを残す",
            bad:"思考プロセスを残さず、完成品だけ作る。",
            good:"詰まった経緯や試したことをメモに残し、未来の自分や他人が追えるようにする。",
            mindset:"過程の記録は、トラブルシューティングの際の強力な武器になります。"
          },
          senior: {
            icon:"💻", title:"ソロワーク",
            advice:"未来の自分へ",
            bad:"自分しか読まないからと汚いコードを放置する。",
            good:"半年後の自分のためにREADMEやコメントを残す。",
            mindset:"誰も見ていない時の規律に、プロとしての強さが出ます。"
          },
          veteran:{
            icon:"💻", title:"ソロワーク",
            advice:"自動化する",
            bad:"毎回同じ手作業を繰り返す。",
            good:"スクリプトを書いて自動化し、自分以外の誰でもできるようにする。",
            mindset:"「自分がやらなくていい状態」を作ることが、次の価値を生む時間を創ります。"
          }
        }
      };

      return coworkerKeys.map(k => db[k] ? db[k][expVal] : null).filter(Boolean);
    }

    // PART 4: FOCUS
    function getFocusBlock(expVal, roleVal, focusVal) {
      const isJunior = (expVal === "junior" || expVal === "middle");
      const isManager = (roleVal === "manager");

      const data = {
        people: {
          name:"関わり方に重心がある",
          tagline:"相談・調整・育成を支える動きが得意になりやすい",
          strengths:"安心して相談できる空気を作り、周囲の力を引き出せることが強みになりやすいです。",
          juniorChecklist:[
            { title:"小さな変化に気づく", desc:"「元気ないな」「詰まってそうだな」というサインを拾い、声をかける。" },
            { title:"感謝を言葉にする", desc:"レビューや雑務への「ありがとう」を意識的に伝え、チームの潤滑油になる。" }
          ],
          seniorChecklist:[
            { title:"必要なフィードバックを避けない", desc:"雰囲気を守りつつも、成長に必要な指摘は丁寧に伝える。" },
            { title:"称賛をタイミングよく言葉にする", desc:"小さな前進や助け合いを見つけたら、その場で短く言語化する。" }
          ],
          theme: { accent:"#0d9488", soft:"#ccfbf1" }
        },
        tech: {
          name:"技術に重心がある",
          tagline:"品質や実装判断を支える動きが得意になりやすい",
          strengths:"技術的な論点を整理し、品質・保守性の判断を支えられることが強みになりやすいです。",
          juniorChecklist:[
            { title:"基礎を固める", desc:"言語仕様やフレームワークの仕組みを理解し、「なぜ動くか」を説明できるようにする。" },
            { title:"可読性を意識する", desc:"動けばOKではなく、他人が読んで迷わないコードを目指す。" }
          ],
          seniorChecklist:[
            { title:"方針だけ握って任せる", desc:"自分が書けば早い場面ほど、方向だけ示し実装は任せる。" },
            { title:"判断理由を残す", desc:"技術選定のPros/Consを短く残し、チームの資産にする。" }
          ],
          theme: { accent:"#0284c7", soft:"#e0f2fe" }
        },
        biz: {
          name:"全体に重心がある",
          tagline:"優先順位や期待値を揃える動きが得意になりやすい",
          strengths:"目的・価値・期限・コストのバランスを見て、優先順位や期待値を整えることが強みになりやすいです。",
          juniorChecklist:[
            { title:"誰の課題か意識する", desc:"作っている機能が誰の何を楽にするのかを言葉にする。" },
            { title:"数字や指標に触れる", desc:"可能ならKPIや運用指標に触れ、意思決定の材料に慣れる。" }
          ],
          seniorChecklist:[
            { title:"言い換える力を磨く", desc:"技術の話を、価値・コスト・リスクの言葉に翻訳して伝える。" },
            { title:"現場の防波堤になる", desc:"無理な要求にはデータや根拠を添えて交渉し、疲弊を防ぐ。" }
          ],
          theme: { accent:"#7c3aed", soft:"#f3e8ff" }
        }
      };

      const d = data[focusVal];
      if (!d) return null;
      return { ...d, checklist: isJunior ? d.juniorChecklist : d.seniorChecklist };
    }

    // PART 5: SHARE
    function getShareHints(expVal, roleVal, shareStyle) {
      const isManagerSide = (roleVal === "lead" || roleVal === "manager");
      const help = { head:"困った時は", textParts:[{t:"text", v:"共有がうまくいかない時は、一人で抱えず上司や営業に相談してください。環境調整も仕事です。"}] };
      const anxietyNote = { head:"💡 確認が細かくなってしまう時", textParts:[{t:"text", v:"不安だから細かくなるのは自然です。監視ではなく「定時報告」などの仕組みで不安を解消しましょう。"}] };

      if (!isManagerSide) {
        // Member side
        const tips = [];
        if(shareStyle==="detail") {
          tips.push({ head:"次は「相手のコスト」も意識", textParts:[{t:"text", v:"こまめな共有は強みです。「結論から」「判断してほしい点」を整理するとさらに良くなります。"}] });
        }
        if(shareStyle==="outcome") {
          tips.push({ head:"手戻りを避ける：20%で一度合わせる", textParts:[{t:"text", v:"方向ズレを防ぐため、完成度20%の段階で「この方針で合ってますか？」と聞くと安全です。"}] });
        }
        if(shareStyle==="adaptive") {
          tips.push({ head:"合わせすぎ注意", textParts:[{t:"text", v:"顔色を伺いすぎて悪い報告が遅れると逆効果です。事実（Fact）は最短で伝えましょう。"}] });
        }
        tips.push(help);
        return { title:"共有のクセと工夫", subtitle:"〜自分が動きやすくなるために〜", tips };
      } else {
        // Leader side
        const tips = [];
        if(shareStyle==="detail") {
          tips.push({ head:"マイクロマネジメント注意", textParts:[{t:"text", v:"自分が細かいと相手にも求めがちです。ゴールを握ってプロセスは任せる我慢が必要です。"}] });
        }
        if(shareStyle==="outcome") {
          tips.push({ head:"放置に注意", textParts:[{t:"text", v:"任せるのが得意な分、放置になりがち。「困ってない？」と声をかけるアンテナを張りましょう。"}] });
        }
        if(shareStyle==="adaptive") {
          tips.push({ head:"ルール化が効く", textParts:[{t:"text", v:"「いつ・どう報告するか」を言語化しておくと、察し合うコストが減り、お互い楽になります。"}] });
        }
        tips.push(anxietyNote);
        return { title:"進め方のクセとリスク管理", subtitle:"〜チームが動きやすくなるために〜", tips };
      }
    }

    // --- Interaction ---
